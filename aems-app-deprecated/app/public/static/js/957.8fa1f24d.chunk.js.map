{"version":3,"file":"static/js/957.8fa1f24d.chunk.js","mappings":"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","sources":["routes/Units/Configuration.tsx","routes/Units/Holiday.tsx","routes/Units/Holidays.tsx","routes/Units/Occupancy.tsx","routes/Units/Occupancies.tsx","routes/Units/Schedule.tsx","routes/Units/Schedules.tsx","routes/Units/Setpoint.tsx","routes/Units/Setpoints.tsx","utils/util.ts","routes/Units/Units.tsx","routes/Units/index.tsx","utils/configuration.ts","utils/schedule.ts","utils/setpoint.ts"],"sourcesContent":["import { Button, InputGroup, Label, Menu, MenuItem } from \"@blueprintjs/core\";\n\nimport { IConfiguration } from \"controllers/configurations/action\";\nimport { IUnit } from \"controllers/units/action\";\nimport { IconNames } from \"@blueprintjs/icons\";\nimport { Popover2 } from \"@blueprintjs/popover2\";\nimport { get } from \"lodash\";\nimport { useCallback } from \"react\";\nimport { DeepPartial } from \"../../utils/types\";\n\nexport function Configuration(props: {\n  unit: IUnit;\n  editing: DeepPartial<IUnit> | null;\n  configurations?: IConfiguration[];\n  handleChange: (field: string, unit?: DeepPartial<IUnit> | null) => (value: any) => void;\n  handleCreate: (unit: DeepPartial<IUnit>) => void;\n  readOnly?: boolean;\n}) {\n  const { unit, editing, configurations, handleChange, handleCreate, readOnly } = props;\n\n  const getValue = useCallback((field: string) => get(editing, field, get(unit, field)), [editing, unit]);\n\n  return (\n    <>\n      {!readOnly && (\n        <div className=\"row\">\n          <div className=\"configuration select\">\n            <Label>\n              <h3>Select Configuration</h3>\n              <Popover2\n                content={\n                  <Menu>\n                    <MenuItem text=\"New Configuration\" onClick={() => handleCreate(unit)} />\n                    {configurations?.map((configuration) => (\n                      <MenuItem\n                        key={configuration.id}\n                        text={configuration.label}\n                        onClick={() => handleChange(\"configurationId\", unit)(configuration.id as number)}\n                      />\n                    ))}\n                  </Menu>\n                }\n                placement=\"bottom-start\"\n              >\n                <Button rightIcon={IconNames.CARET_DOWN} minimal>\n                  {unit?.configuration?.label || \"Select Configuration...\"}\n                </Button>\n              </Popover2>\n            </Label>\n          </div>\n          <div />\n        </div>\n      )}\n      <div className=\"row\">\n        <div className=\"label\">\n          <Label>\n            {readOnly ? <h3>Configuration Label</h3> : <b>Configuration Label</b>}\n            <InputGroup\n              type=\"text\"\n              value={getValue(\"configuration.label\")}\n              onChange={(e) => handleChange(\"configuration.label\", editing)(e.target.value)}\n              readOnly={readOnly}\n            />\n          </Label>\n        </div>\n        <div />\n      </div>\n    </>\n  );\n}\n","import { Button, Checkbox, InputGroup, Intent, Label } from \"@blueprintjs/core\";\n\nimport { IHoliday } from \"controllers/holidays/action\";\nimport { IUnit } from \"controllers/units/action\";\nimport { IconNames } from \"@blueprintjs/icons\";\nimport { ObservanceType } from \"common\";\nimport { get } from \"lodash\";\nimport moment from \"moment\";\nimport { useCallback } from \"react\";\nimport { DeepPartial } from \"../../utils/types\";\n\nexport function Holiday(props: {\n  path: string;\n  unit: DeepPartial<IUnit> | IUnit;\n  editing: DeepPartial<IUnit> | null;\n  holiday: DeepPartial<IHoliday>;\n  handleChange: (field: string, unit?: DeepPartial<IUnit> | null) => (value: any) => void;\n  readOnly?: boolean;\n}) {\n  const { path, unit, editing, holiday, handleChange, readOnly } = props;\n  const { id, label, type, month, day, observance } = holiday;\n\n  const getValue = useCallback((field: string) => get(editing, field, get(unit, field)), [editing, unit]);\n\n  switch (type) {\n    case \"Custom\":\n      const suffix = observance && ObservanceType.parse(observance)?.label;\n      const desc = `${moment()\n        .set(\"month\", (month as number) - 1)\n        .set(\"date\", day as number)\n        .format(\"MMMM Do\")} ${suffix && `(${suffix})`}`;\n\n      return (\n        <>\n          <div className=\"row\">\n            <div>\n              <Label>\n                <b>{label}</b>\n                <InputGroup type=\"text\" value={desc} readOnly />\n              </Label>\n            </div>\n            <div>\n              <Button\n                icon={IconNames.TRASH}\n                intent={Intent.WARNING}\n                minimal\n                onClick={() => {\n                  handleChange(path, editing)({ id: id, type: type, action: \"delete\" });\n                }}\n                disabled={readOnly}\n              />\n            </div>\n          </div>\n        </>\n      );\n    case \"Enabled\":\n    case \"Disabled\":\n    default:\n      return (\n        <div className=\"row\">\n          <div className=\"holiday\">\n            <Label>\n              <b>{label}</b>\n              <Checkbox\n                label=\"Enabled\"\n                checked={getValue(`${path}.type`) === \"Enabled\"}\n                indeterminate={getValue(`${path}.type`) == null}\n                onClick={() => {\n                  handleChange(\n                    `${path}`,\n                    editing\n                  )({\n                    id: getValue(`${path}.id`),\n                    type: getValue(`${path}.type`) === \"Enabled\" ? \"Disabled\" : \"Enabled\",\n                  });\n                }}\n                disabled={readOnly}\n              />\n            </Label>\n          </div>\n          <div />\n        </div>\n      );\n  }\n}\n","import { Alert, Button, InputGroup, Intent, Label, Menu, MenuItem } from \"@blueprintjs/core\";\nimport { HolidayType, ObservanceType } from \"common\";\nimport { IHoliday, deleteHoliday } from \"controllers/holidays/action\";\nimport { get, isEmpty, merge } from \"lodash\";\n\nimport { DatePicker } from \"@blueprintjs/datetime\";\nimport { Holiday } from \"./Holiday\";\nimport { IUnit } from \"controllers/units/action\";\nimport { IconNames } from \"@blueprintjs/icons\";\nimport { Popover2 } from \"@blueprintjs/popover2\";\nimport moment from \"moment\";\nimport { useDispatch } from \"react-redux\";\nimport { useState } from \"react\";\nimport { DeepPartial } from \"../../utils/types\";\n\nconst holidayOrder = HolidayType.values.map((a) => a.label);\n\nfunction CreateHoliday(props: {\n  unit: DeepPartial<IUnit> | IUnit;\n  editing: DeepPartial<IUnit> | null;\n  handleChange: (field: string, unit?: DeepPartial<IUnit> | null) => (value: any) => void;\n  holidays: IHoliday[];\n}) {\n  const { unit, editing, handleChange, holidays } = props;\n\n  const [label, setLabel] = useState(\"\");\n  const [date, setDate] = useState(new Date());\n  const [observance, setObservance] = useState(\"\");\n  const [open, setOpen] = useState(false);\n\n  return (\n    <div className=\"row\">\n      <div className=\"label\">\n        <Label>\n          <b>Holiday Label</b>\n          <InputGroup type=\"text\" value={label} onChange={(e) => setLabel(e.target.value)} />\n        </Label>\n      </div>\n      <div>\n        <Label>\n          <b>Date</b>\n          <Popover2\n            content={\n              <DatePicker\n                value={date}\n                onChange={(d, u) => {\n                  if (d) {\n                    setDate(d);\n                  }\n                  setOpen(!u);\n                }}\n              />\n            }\n            isOpen={open}\n            placement=\"bottom-start\"\n          >\n            <Button rightIcon={IconNames.CALENDAR} onClick={() => setOpen(true)} minimal>\n              {moment(date).format(\"MMMM Do\")}\n            </Button>\n          </Popover2>\n        </Label>\n      </div>\n      <div>\n        <Label>\n          <b>Observance</b>\n          <Popover2\n            content={\n              <Menu>\n                <MenuItem text=\"Always on Date\" onClick={() => setObservance(\"\")} />\n                {ObservanceType.values.map((o) => (\n                  <MenuItem key={o.name} text={o.label} onClick={() => setObservance(o.label)} />\n                ))}\n              </Menu>\n            }\n            placement=\"bottom-start\"\n          >\n            <Button rightIcon={IconNames.CARET_DOWN} minimal>\n              {observance || \"Always on Date\"}\n            </Button>\n          </Popover2>\n        </Label>\n      </div>\n      <div>\n        <Button\n          icon={IconNames.NEW_LAYER}\n          intent={Intent.PRIMARY}\n          minimal\n          disabled={isEmpty(label) || holidays.find((v) => v.label === label) !== undefined}\n          onClick={() => {\n            const i = Math.max(\n              get(unit, \"configuration.holidays.length\", 0),\n              get(editing, \"configuration.holidays.length\", 0)\n            );\n            handleChange(\n              `configuration.holidays.${i}`,\n              editing\n            )({\n              type: \"Custom\",\n              label,\n              month: date.getMonth() + 1,\n              day: date.getDate(),\n              observance,\n              configurationId: unit?.configuration?.id,\n              createdAt: moment().format(),\n              action: \"create\",\n            } as IHoliday);\n            setLabel(\"\");\n            setDate(new Date());\n            setObservance(\"\");\n          }}\n        >\n          Create Holiday\n        </Button>\n      </div>\n    </div>\n  );\n}\n\nexport function Holidays(props: {\n  unit: DeepPartial<IUnit> | IUnit;\n  editing: DeepPartial<IUnit> | null;\n  handleChange: (field: string, unit?: DeepPartial<IUnit> | null) => (value: any) => void;\n  readOnly?: boolean;\n}) {\n  const { unit, editing, handleChange, readOnly } = props;\n\n  const dispatch = useDispatch();\n  const [deleting, setDeleting] = useState(undefined as DeepPartial<IHoliday> | undefined);\n\n  const holidays = merge([], unit.configuration?.holidays, get(editing, \"configuration.holidays\")) as (IHoliday & {\n    index: number;\n  })[];\n  holidays.forEach((h, i) => (h.index = i));\n  return (\n    <>\n      {!readOnly && (\n        <Label>\n          <h3>Create Holiday</h3>\n          <CreateHoliday unit={unit} editing={editing} handleChange={handleChange} holidays={holidays} />\n        </Label>\n      )}\n      <Label>\n        <h3>Custom Holidays</h3>\n        <ul>\n          {isEmpty(holidays.filter((a) => a.type === \"Custom\" && a.action !== \"delete\")) ? (\n            <li key={\"empty\"}>No Custom Holidays Defined</li>\n          ) : (\n            holidays\n              .filter((a) => a.type === \"Custom\" && a.action !== \"delete\")\n              .sort((a, b) => moment(b.createdAt).valueOf() - moment(a.createdAt).valueOf())\n              .map((holiday, i) => (\n                <li key={holiday.index}>\n                  <Holiday\n                    key={holiday.index}\n                    path={`configuration.holidays.${holiday.index}`}\n                    unit={unit}\n                    editing={editing}\n                    holiday={holiday}\n                    handleChange={handleChange}\n                    readOnly={readOnly}\n                  />\n                </li>\n              ))\n          )}\n        </ul>\n      </Label>\n      <Label>\n        <h3>Predefined Holidays</h3>\n        <ul>\n          {holidays\n            .filter((a) => a.type !== \"Custom\")\n            .sort((a, b) => holidayOrder.indexOf(a.label) - holidayOrder.indexOf(b.label))\n            .map((holiday, i) => (\n              <li key={holiday.index}>\n                <Holiday\n                  key={holiday.index}\n                  path={`configuration.holidays.${holiday.index}`}\n                  unit={unit}\n                  editing={editing}\n                  holiday={holiday}\n                  handleChange={handleChange}\n                  readOnly={readOnly}\n                />\n              </li>\n            ))}\n        </ul>\n      </Label>\n      <Alert\n        intent={Intent.DANGER}\n        isOpen={deleting !== undefined}\n        confirmButtonText=\"Yes\"\n        cancelButtonText=\"Cancel\"\n        onConfirm={() => dispatch(deleteHoliday(deleting?.id ?? -1))}\n        onClose={() => setDeleting(undefined)}\n      >\n        <p>Permanently delete the holiday {deleting?.label}?</p>\n      </Alert>\n    </>\n  );\n}\n","import { Button, InputGroup, Intent, Label } from \"@blueprintjs/core\";\n\nimport { IOccupancy } from \"controllers/occupancies/action\";\nimport { IUnit } from \"controllers/units/action\";\nimport { IconNames } from \"@blueprintjs/icons\";\nimport moment from \"moment\";\nimport { DeepPartial } from \"../../utils/types\";\n\nexport function Occupancy(props: {\n  path: string;\n  unit: DeepPartial<IUnit> | IUnit;\n  editing: DeepPartial<IUnit> | null;\n  occupancy: DeepPartial<IOccupancy>;\n  handleChange: (field: string, unit?: DeepPartial<IUnit> | null) => (value: any) => void;\n}) {\n  const { path, editing, occupancy, handleChange } = props;\n  const { id, label, date, schedule } = occupancy;\n\n  const suffix = schedule?.label;\n  const desc = `${moment(date).format(\"dddd MMMM Do YYYY\")} ${suffix && `(${suffix})`}`;\n  const disable = moment(date).startOf(\"day\").isBefore(moment().startOf(\"day\"), \"day\");\n\n  return (\n    <>\n      <div className=\"row\">\n        <div>\n          <Label disabled={disable}>\n            <b>{label}</b>\n            <InputGroup type=\"text\" value={desc} disabled={disable} readOnly />\n          </Label>\n        </div>\n        <div>\n          <Button\n            icon={IconNames.TRASH}\n            intent={Intent.WARNING}\n            minimal\n            onClick={() => {\n              handleChange(path, editing)({ id: id, action: \"delete\" });\n            }}\n          />\n        </div>\n      </div>\n    </>\n  );\n}\n","import {\n  Alert,\n  Button,\n  Checkbox,\n  HandleInteractionKind,\n  HandleType,\n  InputGroup,\n  Intent,\n  Label,\n  MultiSlider,\n} from \"@blueprintjs/core\";\nimport {\n  END_TIME_DEFAULT,\n  END_TIME_MAX,\n  START_TIME_DEFAULT,\n  START_TIME_MIN,\n  TIME_PADDING,\n  createScheduleLabel,\n  toDataFormat,\n  toMinutes,\n  toTimeFormat,\n} from \"utils/schedule\";\nimport { IOccupancy, deleteOccupancy } from \"controllers/occupancies/action\";\nimport { clamp, clone, cloneDeep, get, inRange, isEmpty, merge } from \"lodash\";\nimport { useCallback, useState } from \"react\";\n\nimport { DatePicker } from \"@blueprintjs/datetime\";\nimport { ISchedule } from \"controllers/schedules/action\";\nimport { IUnit } from \"controllers/units/action\";\nimport { IconNames } from \"@blueprintjs/icons\";\nimport { Occupancy } from \"./Occupancy\";\nimport { Popover2 } from \"@blueprintjs/popover2\";\nimport moment from \"moment\";\nimport { parseBoolean } from \"utils/utils\";\nimport { useDispatch } from \"react-redux\";\nimport { DeepPartial } from \"../../utils/types\";\n\nconst allowUnoccupied = parseBoolean(process.env.REACT_APP_ALLOW_UNOCCUPIED || \"\");\n\nconst defaultSchedule: ISchedule = {\n  label: \"\",\n  occupied: true,\n  startTime: toDataFormat(START_TIME_DEFAULT),\n  endTime: toDataFormat(END_TIME_DEFAULT),\n};\ndefaultSchedule.label = createScheduleLabel(\"all\", defaultSchedule);\n\nfunction CreateOccupancy(props: {\n  unit: DeepPartial<IUnit> | IUnit;\n  editing: DeepPartial<IUnit> | null;\n  handleChange: (field: string, unit?: DeepPartial<IUnit> | null) => (value: any) => void;\n}) {\n  const { unit, editing, handleChange } = props;\n\n  const [label, setLabel] = useState(\"\");\n  const [date, setDate] = useState(new Date());\n  const [schedule, setSchedule] = useState(clone(defaultSchedule));\n  const [open, setOpen] = useState(false);\n\n  const getValue = useCallback((field: string) => get(editing, field, get(unit, field)), [editing, unit]);\n\n  const day = moment(date).format(\"dddd\").toLowerCase();\n  const values = {\n    schedule: {\n      start: !schedule.occupied ? START_TIME_MIN : toMinutes(schedule.startTime, false),\n      end: !schedule.occupied ? END_TIME_MAX : toMinutes(schedule.endTime, true),\n    },\n    previous: {\n      start: !getValue(`configuration.${day}Schedule.occupied`)\n        ? START_TIME_MIN\n        : toMinutes(getValue(`configuration.${day}Schedule.startTime`), false),\n      end: !getValue(`configuration.${day}Schedule.occupied`)\n        ? END_TIME_MAX\n        : toMinutes(getValue(`configuration.${day}Schedule.endTime`), true),\n      occupied: getValue(`configuration.${day}Schedule.occupied`),\n    },\n  };\n\n  return (\n    <div className=\"row\">\n      <div className=\"label\">\n        <Label>\n          <b>Occupancy Label</b>\n          <InputGroup type=\"text\" value={label} onChange={(e) => setLabel(e.target.value)} />\n        </Label>\n      </div>\n      <div className=\"row\">\n        <div className=\"label\">\n          <Label>\n            <b>Occupancy Schedule</b>\n            <InputGroup type=\"text\" value={schedule.label} readOnly />\n          </Label>\n        </div>\n        <div className=\"occupancy\">\n          <MultiSlider\n            min={START_TIME_MIN}\n            max={END_TIME_MAX}\n            stepSize={5}\n            labelStepSize={240}\n            labelRenderer={(v, o) =>\n              o?.isHandleTooltip || (v > START_TIME_MIN && v < END_TIME_MAX) ? toTimeFormat(v) : \"\"\n            }\n            disabled={!schedule.occupied}\n          >\n            <MultiSlider.Handle\n              type={HandleType.START}\n              interactionKind={HandleInteractionKind.LOCK}\n              intentAfter={!schedule.occupied ? Intent.NONE : Intent.SUCCESS}\n              value={values.schedule.start}\n              onChange={(v) => {\n                const copy = cloneDeep(schedule);\n                const occupied = schedule.occupied;\n                const endTime = toMinutes(schedule.endTime, true);\n                const startTime = clamp(v, START_TIME_MIN, Math.min(endTime, END_TIME_MAX) - TIME_PADDING);\n                const label = createScheduleLabel(\"all\", {\n                  occupied,\n                  startTime,\n                  endTime,\n                });\n                merge(copy, {\n                  startTime: toDataFormat(startTime),\n                  label,\n                });\n                setSchedule(copy);\n              }}\n            />\n            <MultiSlider.Handle\n              type={HandleType.START}\n              interactionKind={HandleInteractionKind.NONE}\n              intentAfter={\n                !values.previous.occupied\n                  ? Intent.NONE\n                  : inRange(values.previous.start, values.schedule.start, values.schedule.end)\n                  ? Intent.SUCCESS\n                  : Intent.PRIMARY\n              }\n              value={values.previous.start}\n            />\n            <MultiSlider.Handle\n              type={HandleType.END}\n              interactionKind={HandleInteractionKind.NONE}\n              intentBefore={\n                !values.previous.occupied\n                  ? Intent.NONE\n                  : inRange(values.previous.end, values.schedule.start, values.schedule.end)\n                  ? Intent.SUCCESS\n                  : Intent.PRIMARY\n              }\n              value={values.previous.end}\n            />\n            <MultiSlider.Handle\n              type={HandleType.END}\n              interactionKind={HandleInteractionKind.LOCK}\n              intentBefore={!schedule.occupied ? Intent.NONE : Intent.SUCCESS}\n              value={values.schedule.end}\n              onChange={(v) => {\n                const copy = cloneDeep(schedule);\n                const occupied = schedule.occupied;\n                const startTime = toMinutes(schedule.startTime, false);\n                const endTime = clamp(v, Math.max(startTime, START_TIME_MIN) + TIME_PADDING, END_TIME_MAX);\n                const label = createScheduleLabel(\"all\", {\n                  occupied,\n                  startTime,\n                  endTime,\n                });\n                merge(copy, {\n                  endTime: toDataFormat(endTime),\n                  label,\n                });\n                setSchedule(copy);\n              }}\n            />\n          </MultiSlider>\n        </div>\n        {allowUnoccupied ? (\n          <div className=\"unoccupied\">\n            <Checkbox\n              label=\"Unoccupied\"\n              checked={!schedule.occupied}\n              onClick={() => {\n                const copy = cloneDeep(schedule);\n                const occupied = !schedule.occupied;\n                const startTime = toMinutes(schedule.startTime, false);\n                const endTime = toMinutes(schedule.endTime, true);\n                const label = createScheduleLabel(\"all\", { occupied, startTime, endTime });\n                merge(copy, {\n                  occupied,\n                  label,\n                });\n                setSchedule(copy);\n              }}\n            />\n          </div>\n        ) : (\n          <div />\n        )}\n      </div>\n      <div>\n        <Label>\n          <b>Date</b>\n          <Popover2\n            content={\n              <DatePicker\n                value={date}\n                onChange={(d, u) => {\n                  if (d) {\n                    setDate(d);\n                  }\n                  setOpen(!u);\n                }}\n              />\n            }\n            isOpen={open}\n            placement=\"bottom-start\"\n          >\n            <Button rightIcon={IconNames.CALENDAR} onClick={() => setOpen(true)} minimal>\n              {moment(date).format(\"dddd MMMM Do YYYY\")}\n            </Button>\n          </Popover2>\n        </Label>\n      </div>\n      <div>\n        <Button\n          icon={IconNames.NEW_LAYER}\n          intent={Intent.PRIMARY}\n          minimal\n          onClick={() => {\n            const i = Math.max(\n              get(unit, \"configuration.occupancies.length\", 0),\n              get(editing, \"configuration.occupancies.length\", 0)\n            );\n            handleChange(\n              `configuration.occupancies.${i}`,\n              editing\n            )({\n              label: label,\n              date: date.toISOString(),\n              schedule: schedule,\n              configurationId: unit?.configuration?.id,\n              createdAt: moment().format(),\n              action: \"create\",\n            } as IOccupancy);\n            setLabel(\"\");\n            setDate(new Date());\n            setSchedule(clone(defaultSchedule));\n          }}\n        >\n          Create Occupancy\n        </Button>\n      </div>\n    </div>\n  );\n}\n\nexport function Occupancies(props: {\n  unit: IUnit;\n  editing: DeepPartial<IUnit> | null;\n  handleChange: (field: string, unit?: DeepPartial<IUnit> | null) => (value: any) => void;\n}) {\n  const { unit, editing, handleChange } = props;\n\n  const dispatch = useDispatch();\n  const [deleting, setDeleting] = useState(undefined as DeepPartial<IOccupancy> | undefined);\n\n  const occupancies = merge(\n    [],\n    unit.configuration?.occupancies,\n    get(editing, \"configuration.occupancies\")\n  ) as (IOccupancy & {\n    index: number;\n  })[];\n  occupancies.forEach((h, i) => (h.index = i));\n  return (\n    <>\n      <Label>\n        <h3>Create Occupancy</h3>\n        <CreateOccupancy unit={unit} editing={editing} handleChange={handleChange} />\n      </Label>\n      <Label>\n        <h3>Temporary Occupancies</h3>\n        <ul>\n          {isEmpty(occupancies.filter((a) => a.action !== \"delete\")) ? (\n            <li key={\"empty\"}>No Temporary Occupancies Defined</li>\n          ) : (\n            occupancies\n              .filter((a) => a.action !== \"delete\")\n              .sort((a, b) => moment(b.date).valueOf() - moment(a.date).valueOf())\n              .map((occupancy, i) => (\n                <li key={occupancy.index}>\n                  <Occupancy\n                    key={occupancy.index}\n                    path={`configuration.occupancies.${occupancy.index}`}\n                    unit={unit}\n                    editing={editing}\n                    occupancy={occupancy}\n                    handleChange={handleChange}\n                  />\n                </li>\n              ))\n          )}\n        </ul>\n      </Label>\n      <Alert\n        intent={Intent.DANGER}\n        isOpen={deleting !== undefined}\n        confirmButtonText=\"Yes\"\n        cancelButtonText=\"Cancel\"\n        onConfirm={() => dispatch(deleteOccupancy(deleting?.id ?? -1))}\n        onClose={() => setDeleting(undefined)}\n      >\n        <p>Permanently delete the occupancy {deleting?.label}?</p>\n      </Alert>\n    </>\n  );\n}\n","import { Checkbox, InputGroup, Intent, Label, NumberRange, RangeSlider } from \"@blueprintjs/core\";\nimport {\n  END_TIME_MAX,\n  START_TIME_MIN,\n  TIME_PADDING,\n  createScheduleLabel,\n  toDataFormat,\n  toMinutes,\n  toTimeFormat,\n} from \"utils/schedule\";\nimport { clamp, get } from \"lodash\";\n\nimport { IUnit } from \"controllers/units/action\";\nimport { useCallback } from \"react\";\nimport { DeepPartial } from \"../../utils/types\";\n\nexport function Schedule(props: {\n  title: string;\n  path: string;\n  unit: DeepPartial<IUnit> | IUnit;\n  editing: DeepPartial<IUnit> | null;\n  handleChange: (field: string, unit?: DeepPartial<IUnit> | null) => (value: any) => void;\n  readOnly?: Array<\"title\" | \"occupied\" | \"unoccupied\">;\n}) {\n  const { title, path, unit, editing, handleChange, readOnly = [\"title\"] } = props;\n\n  const getValue = useCallback((field: string) => get(editing, field, get(unit, field)), [editing, unit]);\n\n  return (\n    <div className=\"row\">\n      <h3> </h3>\n      <div className=\"label\">\n        <Label>\n          <b>{title}</b>\n          <InputGroup\n            type=\"text\"\n            value={getValue(`${path}.label`)}\n            onChange={(e) => {\n              handleChange(`${path}.label`, editing)(e.target.value);\n            }}\n            readOnly={readOnly?.includes(\"title\")}\n          />\n        </Label>\n      </div>\n      <div className=\"schedule\">\n        <RangeSlider\n          min={START_TIME_MIN}\n          max={END_TIME_MAX}\n          stepSize={5}\n          labelStepSize={240}\n          intent={Intent.SUCCESS}\n          value={\n            getValue(`${path}.occupied`)\n              ? [toMinutes(getValue(`${path}.startTime`), false), toMinutes(getValue(`${path}.endTime`), true)]\n              : [START_TIME_MIN, START_TIME_MIN]\n          }\n          labelRenderer={(v, o) =>\n            o?.isHandleTooltip || (v > START_TIME_MIN && v < END_TIME_MAX) ? toTimeFormat(v) : \"\"\n          }\n          disabled={readOnly?.includes(\"occupied\") || !get(editing, `${path}.occupied`, get(unit, `${path}.occupied`))}\n          onChange={(v) => {\n            const occupied = getValue(`${path}.occupied`);\n            const startTime = clamp(\n              (v as NumberRange)[0],\n              START_TIME_MIN,\n              Math.min((v as NumberRange)[1], END_TIME_MAX) - TIME_PADDING\n            );\n            const endTime = clamp(\n              (v as NumberRange)[1],\n              Math.max((v as NumberRange)[0], START_TIME_MIN) + TIME_PADDING,\n              END_TIME_MAX\n            );\n            const label = createScheduleLabel(\"all\", { occupied, startTime, endTime });\n            handleChange(\n              `${path}`,\n              editing\n            )({ startTime: toDataFormat(startTime), endTime: toDataFormat(endTime), label });\n          }}\n        />\n      </div>\n      <div className=\"unoccupied\">\n        <Checkbox\n          label=\"Unoccupied\"\n          checked={!getValue(`${path}.occupied`)}\n          onClick={() => {\n            const occupied = !getValue(`${path}.occupied`);\n            const startTime = toMinutes(getValue(`${path}.startTime`), false);\n            const endTime = toMinutes(getValue(`${path}.endTime`), true);\n            const label = createScheduleLabel(\"all\", { occupied, startTime, endTime });\n            handleChange(`${path}`, editing)({ occupied, label });\n          }}\n          disabled={readOnly?.includes(\"unoccupied\")}\n        />\n      </div>\n    </div>\n  );\n}\n","import { IUnit } from \"controllers/units/action\";\nimport { Schedule } from \"./Schedule\";\nimport { parseBoolean } from \"utils/utils\";\nimport { DeepPartial } from \"../../utils/types\";\n\nconst holidaySchedule = parseBoolean(process.env.REACT_APP_HOLIDAY_SCHEDULE ?? \"\");\n\nexport function Schedules(props: {\n  unit: DeepPartial<IUnit> | IUnit;\n  editing: DeepPartial<IUnit> | null;\n  handleChange: (field: string, unit?: DeepPartial<IUnit> | null) => (value: any) => void;\n  readOnly?: boolean;\n}) {\n  const { unit, editing, handleChange, readOnly } = props;\n  return (\n    <>\n      <Schedule\n        title=\"Monday Schedule\"\n        path=\"configuration.mondaySchedule\"\n        unit={unit}\n        editing={editing}\n        handleChange={handleChange}\n        readOnly={readOnly ? [\"title\", \"occupied\", \"unoccupied\"] : undefined}\n      />\n      <Schedule\n        title=\"Tuesday Schedule\"\n        path=\"configuration.tuesdaySchedule\"\n        unit={unit}\n        editing={editing}\n        handleChange={handleChange}\n        readOnly={readOnly ? [\"title\", \"occupied\", \"unoccupied\"] : undefined}\n      />\n      <Schedule\n        title=\"Wednesday Schedule\"\n        path=\"configuration.wednesdaySchedule\"\n        unit={unit}\n        editing={editing}\n        handleChange={handleChange}\n        readOnly={readOnly ? [\"title\", \"occupied\", \"unoccupied\"] : undefined}\n      />\n      <Schedule\n        title=\"Thursday Schedule\"\n        path=\"configuration.thursdaySchedule\"\n        unit={unit}\n        editing={editing}\n        handleChange={handleChange}\n        readOnly={readOnly ? [\"title\", \"occupied\", \"unoccupied\"] : undefined}\n      />\n      <Schedule\n        title=\"Friday Schedule\"\n        path=\"configuration.fridaySchedule\"\n        unit={unit}\n        editing={editing}\n        handleChange={handleChange}\n        readOnly={readOnly ? [\"title\", \"occupied\", \"unoccupied\"] : undefined}\n      />\n      <Schedule\n        title=\"Saturday Schedule\"\n        path=\"configuration.saturdaySchedule\"\n        unit={unit}\n        editing={editing}\n        handleChange={handleChange}\n        readOnly={readOnly ? [\"title\", \"occupied\", \"unoccupied\"] : undefined}\n      />\n      <Schedule\n        title=\"Sunday Schedule\"\n        path=\"configuration.sundaySchedule\"\n        unit={unit}\n        editing={editing}\n        handleChange={handleChange}\n        readOnly={readOnly ? [\"title\", \"occupied\", \"unoccupied\"] : undefined}\n      />\n      {holidaySchedule && (\n        <Schedule\n          title=\"Holiday Schedule\"\n          path=\"configuration.holidaySchedule\"\n          unit={unit}\n          editing={editing}\n          handleChange={handleChange}\n          readOnly={readOnly ? [\"title\", \"occupied\", \"unoccupied\"] : undefined}\n        />\n      )}\n    </>\n  );\n}\n","import {\n  COOLING_MAX,\n  DEADBAND_MAX,\n  DEADBAND_MIN,\n  HEATING_MIN,\n  SETPOINT_MAX,\n  SETPOINT_MIN,\n  SETPOINT_PADDING,\n  createSetpointLabel,\n  getSetpointMessage,\n} from \"utils/setpoint\";\nimport {\n  HandleInteractionKind,\n  HandleType,\n  InputGroup,\n  Intent,\n  Label,\n  MultiSlider,\n  NumericInput,\n} from \"@blueprintjs/core\";\nimport { clamp, get, merge } from \"lodash\";\nimport { useCallback, useMemo } from \"react\";\n\nimport { ISetpoint } from \"controllers/setpoints/action\";\nimport { IUnit } from \"controllers/units/action\";\nimport { DeepPartial } from \"../../utils/types\";\n\nexport function Setpoint(props: {\n  type: \"single\" | \"separate\" | \"both\";\n  title: string;\n  path: string;\n  unit: DeepPartial<IUnit> | IUnit;\n  editing: DeepPartial<IUnit> | null;\n  setpoint: DeepPartial<ISetpoint> | undefined;\n  handleChange: (field: string, unit?: DeepPartial<IUnit> | null) => (value: any) => void;\n  readOnly?: Array<\"title\">;\n}) {\n  const { type, title, path, unit, editing, setpoint, handleChange, readOnly = [\"title\"] } = props;\n\n  const getValue = useCallback((field: string) => get(editing, field, get(unit, field)), [editing, unit]);\n\n  const error = useMemo(\n    () => getSetpointMessage(merge({}, get(unit, path), setpoint)) || \"\\u00A0\",\n    [path, unit, setpoint]\n  );\n\n  const renderSingle = () => (\n    <MultiSlider\n      min={SETPOINT_MIN}\n      max={SETPOINT_MAX}\n      stepSize={0.5}\n      labelStepSize={5}\n      labelRenderer={(v, o) => (o?.isHandleTooltip || (v > HEATING_MIN && v < COOLING_MAX) ? `${v}\\xa0F` : \"\")}\n    >\n      <MultiSlider.Handle\n        type={HandleType.START}\n        interactionKind={HandleInteractionKind.LOCK}\n        intentAfter={Intent.WARNING}\n        value={getValue(`${path}.heating`)}\n        onChange={(v) => {\n          const setpoint = getValue(`${path}.setpoint`);\n          const deadband = getValue(`${path}.deadband`);\n          const padding = SETPOINT_PADDING + deadband / 2;\n          const heating = clamp(v, HEATING_MIN, setpoint - padding);\n          const cooling = getValue(`${path}.cooling`);\n          const label = createSetpointLabel(\"all\", { setpoint, deadband, heating, cooling });\n          handleChange(`${path}`, editing)({ heating, label });\n        }}\n      />\n      <MultiSlider.Handle\n        type={HandleType.START}\n        interactionKind={HandleInteractionKind.LOCK}\n        intentAfter={Intent.NONE}\n        value={getValue(`${path}.setpoint`) - getValue(`${path}.deadband`) / 2}\n        onChange={(v) => {\n          const deadband = getValue(`${path}.deadband`);\n          const padding = SETPOINT_PADDING + deadband / 2;\n          const heating = getValue(`${path}.heating`);\n          const cooling = getValue(`${path}.cooling`);\n          const value = v + deadband / 2;\n          const setpoint = clamp(value, heating + padding, cooling - padding);\n          const label = createSetpointLabel(\"all\", { setpoint, deadband, heating, cooling });\n          handleChange(`${path}`, editing)({ setpoint, label });\n        }}\n      />\n      <MultiSlider.Handle\n        type={HandleType.END}\n        interactionKind={HandleInteractionKind.LOCK}\n        intentBefore={Intent.NONE}\n        value={getValue(`${path}.setpoint`) + getValue(`${path}.deadband`) / 2}\n        onChange={(v) => {\n          const deadband = getValue(`${path}.deadband`);\n          const padding = SETPOINT_PADDING + deadband / 2;\n          const heating = getValue(`${path}.heating`);\n          const cooling = getValue(`${path}.cooling`);\n          const value = v - deadband / 2;\n          const setpoint = clamp(value, heating + padding, cooling - padding);\n          const label = createSetpointLabel(\"all\", { setpoint, deadband, heating, cooling });\n          handleChange(`${path}`, editing)({ setpoint, label });\n        }}\n      />\n      <MultiSlider.Handle\n        type={HandleType.END}\n        interactionKind={HandleInteractionKind.LOCK}\n        intentBefore={Intent.PRIMARY}\n        value={getValue(`${path}.cooling`)}\n        onChange={(v) => {\n          const setpoint = getValue(`${path}.setpoint`);\n          const deadband = getValue(`${path}.deadband`);\n          const padding = SETPOINT_PADDING + deadband / 2;\n          const heating = getValue(`${path}.heating`);\n          const cooling = clamp(v, setpoint + padding, COOLING_MAX);\n          const label = createSetpointLabel(\"all\", { setpoint, deadband, heating, cooling });\n          handleChange(`${path}`, editing)({ cooling, label });\n        }}\n      />\n    </MultiSlider>\n  );\n\n  const renderOccupied = () => (\n    <Label>\n      <b>Occupied</b>\n      <MultiSlider\n        min={SETPOINT_MIN}\n        max={SETPOINT_MAX}\n        stepSize={0.5}\n        labelStepSize={5}\n        intent={Intent.SUCCESS}\n        labelRenderer={(v, o) => (o?.isHandleTooltip || (v > HEATING_MIN && v < COOLING_MAX) ? `${v}\\xa0F` : \"\")}\n      >\n        <MultiSlider.Handle\n          type={HandleType.START}\n          interactionKind={HandleInteractionKind.LOCK}\n          intentBefore={Intent.WARNING}\n          intentAfter={Intent.SUCCESS}\n          value={getValue(`${path}.setpoint`) - getValue(`${path}.deadband`) / 2}\n          onChange={(v) => {\n            const deadband = getValue(`${path}.deadband`);\n            const padding = SETPOINT_PADDING + deadband / 2;\n            const heating = getValue(`${path}.heating`);\n            const cooling = getValue(`${path}.cooling`);\n            const value = v + deadband / 2;\n            const setpoint = clamp(value, heating + padding, cooling - padding);\n            const label = createSetpointLabel(\"all\", { setpoint, deadband, heating, cooling });\n            handleChange(`${path}`, editing)({ setpoint, label });\n          }}\n        />\n        <MultiSlider.Handle\n          type={HandleType.END}\n          interactionKind={HandleInteractionKind.LOCK}\n          intentBefore={Intent.SUCCESS}\n          intentAfter={Intent.PRIMARY}\n          value={getValue(`${path}.setpoint`) + getValue(`${path}.deadband`) / 2}\n          onChange={(v) => {\n            const deadband = getValue(`${path}.deadband`);\n            const padding = SETPOINT_PADDING + deadband / 2;\n            const heating = getValue(`${path}.heating`);\n            const cooling = getValue(`${path}.cooling`);\n            const value = v - deadband / 2;\n            const setpoint = clamp(value, heating + padding, cooling - padding);\n            const label = createSetpointLabel(\"all\", { setpoint, deadband, heating, cooling });\n            handleChange(`${path}`, editing)({ setpoint, label });\n          }}\n        />\n      </MultiSlider>\n    </Label>\n  );\n\n  const renderUnoccupied = () => (\n    <Label>\n      <b>Unoccupied</b>\n      <MultiSlider\n        min={SETPOINT_MIN}\n        max={SETPOINT_MAX}\n        stepSize={0.5}\n        labelStepSize={5}\n        labelRenderer={(v, o) => (o?.isHandleTooltip || (v > HEATING_MIN && v < COOLING_MAX) ? `${v}\\xa0F` : \"\")}\n      >\n        <MultiSlider.Handle\n          type={HandleType.START}\n          interactionKind={HandleInteractionKind.LOCK}\n          intentBefore={Intent.WARNING}\n          value={getValue(`${path}.heating`)}\n          onChange={(v) => {\n            const setpoint = getValue(`${path}.setpoint`);\n            const deadband = getValue(`${path}.deadband`);\n            const padding = SETPOINT_PADDING + deadband / 2;\n            const heating = clamp(v, HEATING_MIN, setpoint - padding);\n            const cooling = getValue(`${path}.cooling`);\n            const label = createSetpointLabel(\"all\", { setpoint, deadband, heating, cooling });\n            handleChange(`${path}`, editing)({ heating, label });\n          }}\n        />\n        <MultiSlider.Handle\n          type={HandleType.END}\n          interactionKind={HandleInteractionKind.LOCK}\n          intentAfter={Intent.PRIMARY}\n          value={getValue(`${path}.cooling`)}\n          onChange={(v) => {\n            const setpoint = getValue(`${path}.setpoint`);\n            const deadband = getValue(`${path}.deadband`);\n            const padding = SETPOINT_PADDING + deadband / 2;\n            const heating = getValue(`${path}.heating`);\n            const cooling = clamp(v, setpoint + padding, COOLING_MAX);\n            const label = createSetpointLabel(\"all\", { setpoint, deadband, heating, cooling });\n            handleChange(`${path}`, editing)({ cooling, label });\n          }}\n        />\n      </MultiSlider>\n    </Label>\n  );\n\n  const renderSliders = () => {\n    switch (type) {\n      case \"both\":\n        return (\n          <div className=\"row\">\n            <div className=\"setpoint\">{renderSingle()}</div>\n            <div className=\"break\" />\n            <div className=\"setpoint\">{renderOccupied()}</div>\n            <div className=\"break\" />\n            <div className=\"setpoint\">{renderUnoccupied()}</div>\n            <div className=\"break\" />\n            <div />\n          </div>\n        );\n      case \"single\":\n        return (\n          <div className=\"row\">\n            <div className=\"setpoint\">{renderSingle()}</div>\n            <div className=\"break\" />\n            <div />\n          </div>\n        );\n      case \"separate\":\n      default:\n        return (\n          <div className=\"row\">\n            <div className=\"setpoint\">{renderOccupied()}</div>\n            <div className=\"break\" />\n            <div className=\"setpoint\">{renderUnoccupied()}</div>\n            <div className=\"break\" />\n            <div />\n          </div>\n        );\n    }\n  };\n\n  return (\n    <>\n      <div className=\"row\">\n        <h3> </h3>\n        <div className=\"label\">\n          <Label>\n            <b>{title}</b>\n            <InputGroup\n              type=\"text\"\n              value={getValue(`${path}.label`)}\n              onChange={(e) => {\n                handleChange(`${path}.label`, editing)(e.target.value);\n              }}\n              readOnly={readOnly?.includes(\"title\")}\n            />\n          </Label>\n        </div>\n        <div className=\"deadband\">\n          <Label>\n            <b>Deadband</b>\n            <NumericInput\n              step={1}\n              min={DEADBAND_MIN}\n              max={DEADBAND_MAX}\n              value={getValue(`${path}.deadband`)}\n              onValueChange={(v) => {\n                const setpoint = getValue(`${path}.setpoint`);\n                const deadband = v;\n                const heating = getValue(`${path}.heating`);\n                const cooling = getValue(`${path}.cooling`);\n                const label = createSetpointLabel(\"all\", { setpoint, deadband, heating, cooling });\n                handleChange(`${path}`, editing)({ deadband, label });\n              }}\n            />\n          </Label>\n        </div>\n        <div className=\"error\">\n          <h4>{error}</h4>\n        </div>\n        <div></div>\n      </div>\n      {renderSliders()}\n    </>\n  );\n}\n","import { IUnit } from \"controllers/units/action\";\nimport { Setpoint } from \"./Setpoint\";\nimport { get } from \"lodash\";\nimport { DeepPartial } from \"../../utils/types\";\n\nexport function Setpoints(props: {\n  unit: DeepPartial<IUnit> | IUnit;\n  editing: DeepPartial<IUnit> | null;\n  handleChange: (field: string, unit?: DeepPartial<IUnit> | null) => (value: any) => void;\n}) {\n  const { unit, editing, handleChange } = props;\n  return (\n    <Setpoint\n      type=\"separate\"\n      title=\"Setpoints\"\n      path=\"configuration.setpoint\"\n      unit={unit}\n      editing={editing}\n      setpoint={get(editing, \"configuration.setpoint\")}\n      handleChange={handleChange}\n    />\n  );\n}\n","import { every, get, isArray, isEqual, isNil, isObject, union } from \"lodash\";\r\nimport { DeepTyped, DeepPartial } from \"./types\";\r\n\r\n/**\r\n * Type guard for non null or undefined value.\r\n */\r\nexport const typeofNonNullable = <T>(value: T): value is NonNullable<T> => value !== null && value !== undefined;\r\n\r\n/**\r\n * Type guard for object keys.\r\n */\r\nexport const keyofObject = <T extends {}>(key: string | number | symbol): key is keyof T => true;\r\n\r\n/**\r\n * Typed version of Object.keys()\r\n */\r\nexport const objectKeys = <T extends object>(obj: T): (keyof T)[] => {\r\n  return Object.keys(obj) as (keyof T)[];\r\n};\r\n\r\n/**\r\n * Type guard for enumeration types.\r\n */\r\nexport const typeofEnum =\r\n  <T extends {}>(type: T) =>\r\n  (value: any): value is T[keyof T] =>\r\n    Object.values(type).includes(value as T[keyof T]);\r\n\r\n/**\r\n * Type guard for object.\r\n */\r\nexport const typeofObject = <T extends {}>(value: any, callback?: (v: any) => boolean): value is T =>\r\n  typeof value === \"object\" && (callback ? callback(value) : true);\r\n\r\n/**\r\n * Recursively applies Object.freeze() to an object.\r\n */\r\nexport function deepFreeze<T extends {}>(object: T) {\r\n  type P = keyof typeof object;\r\n  const propNames = Reflect.ownKeys(object) as P[];\r\n  for (const name of propNames) {\r\n    const value = object[name];\r\n    if (value && typeof value === \"object\") {\r\n      deepFreeze(value);\r\n    }\r\n  }\r\n  return Object.freeze(object);\r\n}\r\n\r\n/**\r\n * Marks a value as removed.\r\n */\r\nexport const Removed = Symbol(\"Removed\");\r\n\r\nconst isArrayType = (value: any): value is any[] | null | undefined => isArray(value) || isNil(value);\r\n\r\nconst isObjectType = (value: any): value is object | null | undefined => isObject(value) || isNil(value);\r\n\r\n/**\r\n * Get the difference between two values.\r\n * The result will be a new value with the differences shown as follows:\r\n * - If a property is removed, the value will be `Removed`.\r\n * - If a property is added, the value will be the new value.\r\n * - If a property is updated, the value will be the new value.\r\n * - If a property is unchanged, the value will be `undefined`.\r\n * - If a property is an array, the value will be an array of differences.\r\n *\r\n * @param a the original value\r\n * @param b the updated value\r\n * @param omit optional list of properties to omit\r\n * @returns the difference between the two values\r\n */\r\nexport const getDifference = <A, B>(\r\n  a: A,\r\n  b: B,\r\n  omit?: string[]\r\n): (DeepTyped<A, typeof Removed> & DeepPartial<B>) | A | B | typeof Removed | undefined => {\r\n  if (isEqual(a, b)) {\r\n    return undefined;\r\n  } else if (isNil(b)) {\r\n    return Removed;\r\n  } else if (isArrayType(a) && isArrayType(b)) {\r\n    // return range(Math.max(a?.length || 0, b?.length || 0)).map((i) => getDifference(a?.[i], b?.[i])) as\r\n    //   | (DeepTyped<A, typeof Removed> & DeepPartial<B>)\r\n    //   | undefined;\r\n  } else if (isObjectType(a) && isObjectType(b)) {\r\n    const diff = {} as (DeepTyped<A, typeof Removed> & DeepPartial<B>) & any;\r\n    const keys = union(Object.keys(a ?? {}), Object.keys(b ?? {})).filter((key) => !omit?.includes(key));\r\n    for (const key of keys) {\r\n      const value = getDifference(a?.[key as keyof A], b?.[key as keyof B], omit);\r\n      if (value !== undefined) {\r\n        diff[key] = value;\r\n      }\r\n    }\r\n    return Object.keys(diff).length ? diff : undefined;\r\n  } else {\r\n    return b;\r\n  }\r\n};\r\n\r\n/**\r\n * Get the common values between a list of objects.\r\n *\r\n * @param objects\r\n * @param omit optional list of properties to omit\r\n */\r\nexport function getCommon<T extends object>(objects: T[], omit?: string[]): Partial<T> | undefined {\r\n  if (objects.length === 0) {\r\n    return undefined;\r\n  } else if (objects.length === 1) {\r\n    return objects[0] as Partial<T>;\r\n  }\r\n  const result: Partial<T> = {} as any;\r\n  const keys = union(...objects.map((obj) => objectKeys(obj))).filter((key) => !omit?.includes(key.toString()));\r\n  for (const key of keys) {\r\n    const values = objects.map((o) => o[key]);\r\n    if (every(values, (v) => isEqual(values[0], v))) {\r\n      (result as any)[key] = values[0];\r\n    }\r\n  }\r\n  return result;\r\n}\r\n\r\n/**\r\n * Parse a string and return a boolean value.\r\n */\r\nexport const parseBoolean = (value?: string) => (value ? /^\\s*true|yes|t|y|1\\s*$/i.test(value) : false);\r\n\r\n/**\r\n * Parse the template and replace all {enclosed} entries with the corresponding property.\r\n */\r\nexport const templateFormat = (template: string, props: any) => {\r\n  return template.replace(/{([^{}]+)}/g, (v, k) => get(props, k));\r\n};\r\n\r\n/**\r\n * Executes the list of tasks in series.\r\n * The result will be an array of the results.\r\n */\r\nexport const promiseChain = (tasks: ((r: any) => Promise<any>)[]) => {\r\n  return tasks.reduce(async (chain: Promise<any>, task) => {\r\n    return chain.then((results) => task(results).then((result) => [...results, result]));\r\n  }, Promise.resolve([]));\r\n};\r\n\r\n/**\r\n * Executes the list of tasks in series.\r\n * The result will be the first promise to resolve.\r\n */\r\nexport const promiseFirst = <T>(tasks: (() => Promise<T>)[]) => {\r\n  return new Promise<T>(async (resolve, reject) => {\r\n    let fault;\r\n    for (const task of tasks) {\r\n      try {\r\n        const result = await task();\r\n        resolve(result);\r\n      } catch (error) {\r\n        fault = error;\r\n      }\r\n    }\r\n    reject(fault);\r\n  });\r\n};\r\n\r\nexport const delay = (d: number) => new Promise((r) => setTimeout(r, d));\r\n","import \"./style.scss\";\n\nimport { Alert, Button, Card, Collapse, InputGroup, Intent, Label, Position, Tree } from \"@blueprintjs/core\";\nimport { Header, Prompt } from \"components\";\nimport {\n  IConfiguration,\n  createConfiguration,\n  deleteConfiguration,\n  readConfigurations,\n  readConfigurationsPoll,\n  selectReadConfigurations,\n  updateConfiguration,\n} from \"controllers/configurations/action\";\nimport {\n  IFilter,\n  IUnit,\n  filterUnits,\n  readUnits,\n  readUnitsPoll,\n  selectFilterUnits,\n  selectReadUnits,\n  updateUnit,\n} from \"controllers/units/action\";\nimport { IconName, IconNames } from \"@blueprintjs/icons\";\nimport { cloneDeep, get, isEqualWith, isNil, isObject, merge, set } from \"lodash\";\n\nimport { Configuration } from \"./Configuration\";\nimport { Holidays } from \"./Holidays\";\nimport { Occupancies } from \"./Occupancies\";\nimport React from \"react\";\nimport { RootProps } from \"routes\";\nimport { Schedules } from \"./Schedules\";\nimport { Setpoints } from \"./Setpoints\";\nimport { HolidayType, RoleType, StageType } from \"common\";\nimport { Tooltip2 } from \"@blueprintjs/popover2\";\nimport { Unit } from \"./Unit\";\nimport { connect } from \"react-redux\";\nimport { createConfigurationDefault } from \"utils/configuration\";\nimport { defaultPollInterval } from \"controllers/poll/action\";\nimport { isSetpointValid } from \"utils/setpoint\";\nimport { DeepPartial } from \"../../utils/types\";\nimport { ISetpoint, updateSetpoint } from \"controllers/setpoints/action\";\nimport { getCommon } from \"utils/util\";\nimport { Holiday } from \"./Holiday\";\n\ninterface UnitsProps extends RootProps {\n  readUnits: () => void;\n  readUnitsPoll: (payload?: number) => void;\n  filterUnits: (payload: IFilter) => void;\n  updateUnit: (payload: DeepPartial<IUnit>) => void;\n  units?: IUnit[];\n  filtered?: IUnit[];\n  readConfigurations: () => void;\n  readConfigurationsPoll: (payload?: number) => void;\n  createConfiguration: (payload: DeepPartial<IConfiguration>) => void;\n  updateConfiguration: (payload: DeepPartial<IConfiguration>) => void;\n  deleteConfiguration: (payload: number) => void;\n  configurations?: IConfiguration[];\n  updateSetpoint: (payload: DeepPartial<ISetpoint>) => void;\n}\n\ninterface UnitsState {\n  editing: DeepPartial<IUnit> | null;\n  editingAll: DeepPartial<IUnit> | null;\n  expanded: string | null;\n  confirm: (() => void) | null;\n}\n\nclass Units extends React.Component<UnitsProps, UnitsState> {\n  private configRouteIsHidden: boolean;\n\n  constructor(props: UnitsProps) {\n    super(props);\n    const configRoute = Object.values(props.routes.map).find((v) => v.data?.name === \"configuration\")?.data;\n    this.configRouteIsHidden = !!configRoute?.hidden;\n    this.state = {\n      editing: null,\n      editingAll: { configuration: { holidays: HolidayType.values.map(() => ({})) } },\n      expanded: null,\n      confirm: null,\n    };\n  }\n\n  componentDidMount() {\n    this.props.readUnits();\n    this.props.readUnitsPoll(defaultPollInterval);\n    if (!this.configRouteIsHidden) {\n      this.props.readConfigurations();\n      this.props.readConfigurationsPoll(defaultPollInterval);\n    }\n  }\n\n  componentWillUnmount() {\n    this.props.readUnitsPoll();\n    this.props.readConfigurationsPoll();\n  }\n\n  getValue = (field: string, editing?: DeepPartial<IUnit> | null, unit?: DeepPartial<IUnit> | null) => {\n    const { units } = this.props;\n    const temp = unit ? unit : units?.find((v) => v.id === editing?.id);\n    return get(editing, field, get(temp, field));\n  };\n\n  handleChange = (field: string, editing?: DeepPartial<IUnit> | null) => {\n    return (value: any) => {\n      const doDefault = (value: any) => {\n        if (editing) {\n          if (isObject(this.getValue(field, editing))) {\n            set(editing, field, merge(cloneDeep(get(editing, field)), value));\n          } else {\n            set(editing, field, value);\n          }\n          this.setState({ editing });\n        }\n      };\n      switch (field) {\n        case \"configurationId\":\n          this.props.updateUnit({ id: editing?.id, configurationId: value as number });\n          break;\n        default:\n          doDefault(value);\n      }\n    };\n  };\n\n  handleCreate = (unit: DeepPartial<IUnit>) => {\n    const configuration = createConfigurationDefault();\n    configuration.unitId = unit.id;\n    this.props.createConfiguration(configuration);\n    this.setState({\n      editing: null,\n      expanded: null,\n    });\n  };\n\n  handleEdit = (unit: IUnit) => {\n    const { filtered } = this.props;\n    const { editing } = this.state;\n    const current = editing && filtered?.find((v) => v.id === editing.id);\n    if (current && this.isSave(current)) {\n      this.setState({ confirm: () => this.setState({ editing: { id: unit.id } }) });\n    } else {\n      this.setState({ editing: { id: unit.id } });\n    }\n  };\n\n  handleCancel = () => {\n    const { filtered } = this.props;\n    const { editing } = this.state;\n    const current = editing && filtered?.find((v) => v.id === editing.id);\n    if (current && this.isSave(current)) {\n      this.setState({ confirm: () => this.setState({ editing: null, expanded: null }) });\n    } else {\n      this.setState({ editing: null, expanded: null });\n    }\n  };\n\n  handleConfirm = () => {\n    const { confirm } = this.state;\n    this.setState({ confirm: null }, confirm ?? undefined);\n  };\n\n  handleSave = () => {\n    const { editing } = this.state;\n    if (editing) {\n      this.props.updateUnit(editing);\n      this.setState({ editing: null, expanded: null });\n    }\n  };\n\n  handleClearAll = () => {\n    this.setState({ editingAll: { configuration: { holidays: HolidayType.values.map(() => ({})) } }, expanded: null });\n  };\n\n  handleSaveAll = () => {\n    const { editingAll } = this.state;\n    const { filtered } = this.props;\n    if (editingAll) {\n      filtered?.forEach((unit) => {\n        const id = unit.id;\n        const location = {\n          name: editingAll.location?.name,\n          latitude: editingAll.location?.latitude,\n          longitude: editingAll.location?.longitude,\n        };\n        const configuration = {\n          id: unit.configuration?.id,\n          holidays: HolidayType.values\n            .map((holiday, i) => {\n              const type = editingAll.configuration?.holidays?.[i]?.type;\n              if (type) {\n                const id = unit.configuration?.holidays?.find((h) => h?.label === holiday?.label)?.id;\n                return { id, type };\n              } else {\n                return undefined;\n              }\n            })\n            .filter((v) => v),\n        };\n        if (location.name || configuration.holidays.length) {\n          this.props.updateUnit({\n            id,\n            ...(location.name ? { location } : {}),\n            ...(configuration.holidays.length ? { configuration } : {}),\n          });\n        }\n      });\n      this.handleClearAll();\n    }\n  };\n\n  handleDelete = (configuration: DeepPartial<IConfiguration>) => {\n    const { id } = configuration;\n    if (id !== undefined) {\n      this.props.deleteConfiguration(id);\n    }\n  };\n\n  handlePush = (unit: DeepPartial<IUnit>) => {\n    const { id } = unit;\n    if (id !== undefined) {\n      this.props.updateUnit({ id, stage: StageType.UpdateType.label });\n    }\n  };\n\n  isSave = (unit: DeepPartial<IUnit> | IUnit, editing?: DeepPartial<IUnit> | null) => {\n    editing = editing ?? this.state.editing;\n    const temp = merge({}, unit, editing);\n    const valid = temp.configuration?.setpoint ? isSetpointValid(temp.configuration.setpoint) : true;\n    return (\n      valid &&\n      !isEqualWith(unit, temp, (_a, _b, k) =>\n        [\"createdAt\", \"updatedAt\", \"action\"].includes(k as any) ? true : undefined\n      )\n    );\n  };\n\n  isPush = (unit: IUnit) => {\n    switch (unit.stage) {\n      case StageType.UpdateType.label:\n      case StageType.DeleteType.label:\n      case StageType.ProcessType.label:\n        return false;\n      case StageType.CreateType.label:\n      case StageType.CompleteType.label:\n      case StageType.FailType.label:\n      default:\n        return !this.isSave(unit);\n    }\n  };\n\n  isAdmin() {\n    const { user } = this.props;\n    return RoleType.Admin.granted(...(user?.role.split(\" \") ?? [\"\"]));\n  }\n\n  renderStatus(unit: IUnit) {\n    let icon: IconName = IconNames.ISSUE;\n    let intent: Intent = Intent.WARNING;\n    let message: string = \"Push Unit Configuration\";\n    switch (unit.stage) {\n      case StageType.UpdateType.label:\n        icon = IconNames.REFRESH;\n        intent = Intent.PRIMARY;\n        break;\n      case StageType.ProcessType.label:\n        icon = IconNames.REFRESH;\n        intent = Intent.SUCCESS;\n        break;\n      case StageType.CreateType.label:\n        icon = IconNames.ISSUE;\n        intent = Intent.WARNING;\n        break;\n      case StageType.DeleteType.label:\n        icon = IconNames.DELETE;\n        intent = Intent.DANGER;\n        break;\n      case StageType.CompleteType.label:\n        icon = IconNames.CONFIRM;\n        intent = Intent.SUCCESS;\n        break;\n      case StageType.FailType.label:\n        icon = IconNames.ERROR;\n        intent = Intent.DANGER;\n        break;\n      default:\n    }\n    return (\n      <Tooltip2 content={message} placement={Position.TOP} disabled={!this.isPush(unit)}>\n        <Button\n          icon={icon}\n          intent={intent}\n          minimal\n          onClick={() => this.handlePush(unit)}\n          disabled={!this.isPush(unit)}\n        />\n      </Tooltip2>\n    );\n  }\n\n  renderConfirm() {\n    const { confirm } = this.state;\n    if (confirm === null) {\n      return null;\n    }\n    return (\n      <Alert\n        intent={Intent.DANGER}\n        isOpen={true}\n        confirmButtonText=\"Yes\"\n        cancelButtonText=\"Cancel\"\n        onConfirm={() => this.handleConfirm()}\n        onClose={() => this.setState({ confirm: null })}\n      >\n        <p>There are changes which have not been saved. Do you still want to continue?</p>\n      </Alert>\n    );\n  }\n\n  renderPrompt() {\n    const { filtered } = this.props;\n    const { editing } = this.state;\n    const current = editing && filtered?.find((v) => v.id === editing.id);\n    const prompt = !isNil(current) && this.isSave(current);\n    return (\n      <Prompt when={prompt} message=\"There are changes which have not been saved. Do you still want to continue?\" />\n    );\n  }\n\n  render() {\n    const { filtered, configurations } = this.props;\n    const { editingAll, editing, expanded } = this.state;\n    const copy = cloneDeep(filtered) ?? [];\n    copy.forEach((v) => {\n      v.configuration!.holidays = HolidayType.values.map(\n        (t) => v.configuration?.holidays?.find((h) => h?.label === t.label) ?? {}\n      );\n    });\n    const defaultUnit = {\n      location: filtered\n        ? getCommon(\n            filtered.map((f) => f.location ?? {}),\n            [\"createdAt\", \"updatedAt\", \"action\", \"terms\"]\n          )\n        : {},\n      configuration: {\n        holidays: HolidayType.values.map((t) =>\n          filtered\n            ? getCommon(\n                filtered.map((f) => f.configuration?.holidays?.find((h) => h?.label === t.label) ?? {}),\n                [\"createdAt\", \"updatedAt\", \"action\", \"terms\"]\n              )\n            : {}\n        ),\n      },\n    };\n\n    return (\n      <div className={\"units\"}>\n        {this.renderPrompt()}\n        <Header {...this.props} />\n        {defaultUnit && (\n          <div className=\"list padding\">\n            <Card interactive>\n              <div className=\"row\">\n                <div>\n                  <Label>\n                    <h3>Update All Units</h3>\n                  </Label>\n                </div>\n                <div>\n                  {this.isSave(defaultUnit, editingAll) ? (\n                    <>\n                      <Tooltip2 content=\"Save\" placement={Position.TOP}>\n                        <Button\n                          icon={IconNames.FLOPPY_DISK}\n                          intent={Intent.PRIMARY}\n                          minimal\n                          onClick={() => this.handleSaveAll()}\n                        />\n                      </Tooltip2>\n                      <Tooltip2 content=\"Exit\" placement={Position.TOP}>\n                        <Button\n                          icon={IconNames.CROSS}\n                          intent={Intent.PRIMARY}\n                          minimal\n                          onClick={() => this.handleClearAll()}\n                        />\n                      </Tooltip2>\n                    </>\n                  ) : null}\n                </div>\n              </div>\n              <div>\n                <Tree\n                  contents={[\n                    {\n                      id: \"holidays-all\",\n                      label: \"Holidays\",\n                      icon: IconNames.SERIES_CONFIGURATION,\n                      hasCaret: true,\n                      isExpanded: expanded === \"holidays-all\",\n                    },\n                  ]}\n                  onNodeExpand={(e) => this.setState({ expanded: e.id as string })}\n                  onNodeCollapse={() => this.setState({ expanded: null })}\n                  onNodeClick={(e) => this.setState({ expanded: e.id === expanded ? null : (e.id as string) })}\n                />\n                <Collapse isOpen={expanded === \"holidays-all\"}>\n                  <Label>\n                    <h3>Predefined Holidays</h3>\n                    <ul>\n                      {defaultUnit?.configuration?.holidays?.map((holiday, i) => (\n                        <li key={holiday?.label ?? i}>\n                          <Holiday\n                            key={holiday?.label}\n                            path={`configuration.holidays.${i}`}\n                            unit={defaultUnit}\n                            editing={editingAll}\n                            holiday={holiday!}\n                            handleChange={this.handleChange}\n                            readOnly={!this.isAdmin()}\n                          />\n                        </li>\n                      ))}\n                    </ul>\n                  </Label>\n                </Collapse>\n                <Tree\n                  contents={[\n                    {\n                      id: \"configuration-all\",\n                      label: \"Configuration\",\n                      icon: IconNames.SERIES_CONFIGURATION,\n                      hasCaret: true,\n                      isExpanded: expanded === \"configuration-all\",\n                    },\n                  ]}\n                  onNodeExpand={(e) => this.setState({ expanded: e.id as string })}\n                  onNodeCollapse={() => this.setState({ expanded: null })}\n                  onNodeClick={(e) => this.setState({ expanded: e.id === expanded ? null : (e.id as string) })}\n                />\n                <Collapse isOpen={expanded === \"configuration-all\"}>\n                  <Unit\n                    unit={defaultUnit}\n                    editing={editingAll}\n                    handleChange={this.handleChange}\n                    hidden={[\n                      \"label\",\n                      \"peakLoadExclude\",\n                      \"coolingPeakOffset\",\n                      \"heatingPeakOffset\",\n                      \"zoneLocation\",\n                      \"zoneMass\",\n                      \"zoneOrientation\",\n                      \"zoneBuilding\",\n                      \"coolingCapacity\",\n                      \"compressors\",\n                      \"optimalStartLockout\",\n                      \"optimalStartDeviation\",\n                      \"earliestStart\",\n                      \"latestStart\",\n                      \"heatPump\",\n                      \"heatPumpBackup\",\n                      \"heatPumpLockout\",\n                      \"economizer\",\n                      \"economizerSetpoint\",\n                      \"coolingLockout\",\n                    ]}\n                  />\n                </Collapse>\n              </div>\n            </Card>\n          </div>\n        )}\n        <h1>Units</h1>\n        <div className=\"list\">\n          {filtered?.map((unit, i) => {\n            return unit.id === editing?.id ? (\n              <Card key={unit.id ?? i} interactive>\n                <div className=\"row\">\n                  <div>\n                    <Label>\n                      <h3>{unit.label}</h3>\n                    </Label>\n                  </div>\n                  <div>\n                    {this.renderStatus(unit)}\n                    <Tooltip2 content=\"Save\" placement={Position.TOP} disabled={!this.isSave(unit)}>\n                      <Button\n                        icon={IconNames.FLOPPY_DISK}\n                        intent={Intent.PRIMARY}\n                        minimal\n                        onClick={() => this.handleSave()}\n                        disabled={!this.isSave(unit)}\n                      />\n                    </Tooltip2>\n                    <Tooltip2 content=\"Exit\" placement={Position.TOP}>\n                      <Button\n                        icon={IconNames.CROSS}\n                        intent={Intent.PRIMARY}\n                        minimal\n                        onClick={() => this.handleCancel()}\n                      />\n                    </Tooltip2>\n                  </div>\n                </div>\n                <div className=\"row\">\n                  <div>\n                    <Label>\n                      <b>Campus</b>\n                      <InputGroup type=\"text\" value={unit.campus} readOnly />\n                    </Label>\n                  </div>\n                  <div>\n                    <Label>\n                      <b>Building</b>\n                      <InputGroup type=\"text\" value={unit.building} readOnly />\n                    </Label>\n                  </div>\n                  <div>\n                    <Label>\n                      <b>System</b>\n                      <InputGroup type=\"text\" value={unit.system} readOnly />\n                    </Label>\n                  </div>\n                  <div>\n                    <Label>\n                      <b>Timezone</b>\n                      <InputGroup type=\"text\" value={unit.timezone} readOnly />\n                    </Label>\n                  </div>\n                  <div />\n                </div>\n                <Collapse isOpen={true}>\n                  {!this.configRouteIsHidden && (\n                    <>\n                      <Tree\n                        contents={[\n                          {\n                            id: \"configuration\",\n                            label: \"Configuration\",\n                            icon: IconNames.SERIES_CONFIGURATION,\n                            hasCaret: true,\n                            isExpanded: expanded === \"configuration\",\n                          },\n                        ]}\n                        onNodeExpand={(e) => this.setState({ expanded: e.id as string })}\n                        onNodeCollapse={() => this.setState({ expanded: null })}\n                        onNodeClick={(e) => this.setState({ expanded: e.id === expanded ? null : (e.id as string) })}\n                      />\n                      <Collapse isOpen={expanded === \"configuration\"}>\n                        <Configuration\n                          unit={unit}\n                          editing={editing}\n                          configurations={configurations}\n                          handleChange={this.handleChange}\n                          handleCreate={this.handleCreate}\n                          readOnly={!this.isAdmin()}\n                        />\n                      </Collapse>\n                    </>\n                  )}\n                  <Tree\n                    contents={[\n                      {\n                        id: \"setpoints\",\n                        label: \"Setpoints\",\n                        icon: IconNames.TEMPERATURE,\n                        hasCaret: true,\n                        isExpanded: expanded === \"setpoints\",\n                      },\n                    ]}\n                    onNodeExpand={(e) => this.setState({ expanded: e.id as string })}\n                    onNodeCollapse={() => this.setState({ expanded: null })}\n                    onNodeClick={(e) => this.setState({ expanded: e.id === expanded ? null : (e.id as string) })}\n                  />\n                  <Collapse isOpen={expanded === \"setpoints\"}>\n                    <Setpoints unit={unit} editing={editing} handleChange={this.handleChange} />\n                  </Collapse>\n                  <Tree\n                    contents={[\n                      {\n                        id: \"schedules\",\n                        label: \"Occupancy Schedules\",\n                        icon: IconNames.TIME,\n                        hasCaret: true,\n                        isExpanded: expanded === \"schedules\",\n                      },\n                    ]}\n                    onNodeExpand={(e) => this.setState({ expanded: e.id as string })}\n                    onNodeCollapse={() => this.setState({ expanded: null })}\n                    onNodeClick={(e) => this.setState({ expanded: e.id === expanded ? null : (e.id as string) })}\n                  />\n                  <Collapse isOpen={expanded === \"schedules\"}>\n                    <Schedules\n                      unit={unit}\n                      editing={editing}\n                      handleChange={this.handleChange}\n                      readOnly={!this.isAdmin()}\n                    />\n                  </Collapse>\n                  <Tree\n                    contents={[\n                      {\n                        id: \"holidays\",\n                        label: \"Holidays\",\n                        icon: IconNames.TIMELINE_EVENTS,\n                        hasCaret: true,\n                        isExpanded: expanded === \"holidays\",\n                      },\n                    ]}\n                    onNodeExpand={(e) => this.setState({ expanded: e.id as string })}\n                    onNodeCollapse={() => this.setState({ expanded: null })}\n                    onNodeClick={(e) => this.setState({ expanded: e.id === expanded ? null : (e.id as string) })}\n                  />\n                  <Collapse isOpen={expanded === \"holidays\"}>\n                    <Holidays\n                      unit={unit}\n                      editing={editing}\n                      handleChange={this.handleChange}\n                      readOnly={!this.isAdmin()}\n                    />\n                  </Collapse>\n                  <Tree\n                    contents={[\n                      {\n                        id: \"occupancies\",\n                        label: \"Temporary Occupancy\",\n                        icon: IconNames.HOME,\n                        hasCaret: true,\n                        isExpanded: expanded === \"occupancies\",\n                      },\n                    ]}\n                    onNodeExpand={(e) => this.setState({ expanded: e.id as string })}\n                    onNodeCollapse={() => this.setState({ expanded: null })}\n                    onNodeClick={(e) => this.setState({ expanded: e.id === expanded ? null : (e.id as string) })}\n                  />\n                  <Collapse isOpen={expanded === \"occupancies\"}>\n                    <Occupancies unit={unit} editing={editing} handleChange={this.handleChange} />\n                  </Collapse>\n                  {/* <Tree\n                    contents={[\n                      {\n                        id: \"lockouts\",\n                        label: \"Lockouts\",\n                        icon: IconNames.LOCK,\n                        hasCaret: true,\n                        isExpanded: expanded === \"lockouts\",\n                      },\n                    ]}\n                    onNodeExpand={(e) => this.setState({ expanded: e.id as string })}\n                    onNodeCollapse={() => this.setState({ expanded: null })}\n                    onNodeClick={(e) => this.setState({ expanded: e.id === expanded ? null : (e.id as string) })}\n                  />\n                  <Collapse isOpen={expanded === \"lockouts\"}>\n                    <span>Lockouts Coming Soon</span>\n                  </Collapse> */}\n                  <Tree\n                    contents={[\n                      {\n                        id: \"rtu\",\n                        label: \"RTU Configuration\",\n                        icon: IconNames.COG,\n                        hasCaret: true,\n                        isExpanded: expanded === \"rtu\",\n                      },\n                    ]}\n                    onNodeExpand={(e) => this.setState({ expanded: e.id as string })}\n                    onNodeCollapse={() => this.setState({ expanded: null })}\n                    onNodeClick={(e) => this.setState({ expanded: e.id === expanded ? null : (e.id as string) })}\n                  />\n                  <Collapse isOpen={expanded === \"rtu\"}>\n                    <Unit\n                      unit={unit}\n                      editing={editing}\n                      handleChange={this.handleChange}\n                      hidden={\n                        this.isAdmin()\n                          ? [\n                              \"peakLoadExclude\",\n                              \"coolingPeakOffset\",\n                              \"heatingPeakOffset\",\n                              \"zoneLocation\",\n                              \"zoneMass\",\n                              \"zoneOrientation\",\n                              \"zoneBuilding\",\n                              \"coolingCapacity\",\n                              \"compressors\",\n                              \"heatPumpBackup\",\n                            ]\n                          : [\n                              \"location\",\n                              \"peakLoadExclude\",\n                              \"coolingPeakOffset\",\n                              \"heatingPeakOffset\",\n                              \"zoneLocation\",\n                              \"zoneMass\",\n                              \"zoneOrientation\",\n                              \"zoneBuilding\",\n                              \"coolingCapacity\",\n                              \"compressors\",\n                              \"optimalStartLockout\",\n                              \"optimalStartDeviation\",\n                              \"earliestStart\",\n                              \"latestStart\",\n                              \"heatPump\",\n                              \"heatPumpBackup\",\n                              \"heatPumpLockout\",\n                              \"economizer\",\n                              \"economizerSetpoint\",\n                              \"coolingLockout\",\n                            ]\n                      }\n                    />\n                  </Collapse>\n                </Collapse>\n              </Card>\n            ) : (\n              <Card key={unit.id ?? i} interactive>\n                <div className=\"row\">\n                  <div>\n                    <Label>\n                      <h3>{unit.label}</h3>\n                    </Label>\n                  </div>\n                  <div>\n                    {this.renderStatus(unit)}\n                    <Tooltip2 content=\"Edit\" placement={Position.TOP}>\n                      <Button\n                        icon={IconNames.EDIT}\n                        intent={Intent.PRIMARY}\n                        minimal\n                        onClick={() => this.handleEdit(unit)}\n                      />\n                    </Tooltip2>\n                  </div>\n                </div>\n              </Card>\n            );\n          })}\n          {this.renderConfirm()}\n        </div>\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = (state: any) => ({\n  units: selectReadUnits(state),\n  filtered: selectFilterUnits(state),\n  configurations: selectReadConfigurations(state),\n});\n\nconst mapActionToProps = {\n  readUnits,\n  readUnitsPoll,\n  filterUnits,\n  updateUnit,\n  readConfigurations,\n  readConfigurationsPoll,\n  createConfiguration,\n  updateConfiguration,\n  deleteConfiguration,\n  updateSetpoint,\n};\n\nexport default connect(mapStateToProps, mapActionToProps)(Units);\n","import RouteBase from \"routes/RouteBase\";\nimport Units from \"./Units\";\n\nconst Root = (props: any) => <RouteBase {...props} renderRoute={(p) => <Units {...p} />} />;\n\nexport default Root;\n","import {\n  COOLING_DEFAULT,\n  DEADBAND_DEFAULT,\n  HEATING_DEFAULT,\n  SETPOINT_DEFAULT,\n  createSetpointLabel,\n} from \"utils/setpoint\";\nimport { END_TIME_DEFAULT, START_TIME_DEFAULT, createScheduleLabel, toDataFormat } from \"utils/schedule\";\n\nimport { DeepPartial } from \"./types\";\nimport { HolidayType } from \"common\";\nimport { IConfiguration } from \"controllers/configurations/action\";\nimport moment from \"moment\";\nimport { sum } from \"lodash\";\n\nconst createConfigurationLabel = (configuration?: DeepPartial<IConfiguration>) => {\n  return moment().format(\"dddd, MMMM Do YYYY\");\n};\n\nconst isConfigurationDelete = (configuration: DeepPartial<IConfiguration>) => {\n  return sum(Object.values(configuration?._count || {})) === 0;\n};\n\nconst createConfigurationDefault = (label: string = createConfigurationLabel()): DeepPartial<IConfiguration> => {\n  const setpoint = {\n    label: \"\",\n    setpoint: SETPOINT_DEFAULT,\n    deadband: DEADBAND_DEFAULT,\n    heating: HEATING_DEFAULT,\n    cooling: COOLING_DEFAULT,\n  };\n  setpoint.label = createSetpointLabel(\"all\", setpoint);\n  const schedule = {\n    label: \"\",\n    occupied: true,\n    startTime: toDataFormat(START_TIME_DEFAULT),\n    endTime: toDataFormat(END_TIME_DEFAULT),\n  };\n  schedule.label = createScheduleLabel(\"all\", schedule);\n  const unoccupied = {\n    label: \"\",\n    occupied: false,\n    startTime: toDataFormat(START_TIME_DEFAULT),\n    endTime: toDataFormat(END_TIME_DEFAULT),\n  };\n  unoccupied.label = createScheduleLabel(\"all\", unoccupied);\n  const enabled = [\n    HolidayType.NewYearsDayType,\n    HolidayType.MartinLutherKingJrType,\n    HolidayType.PresidentsDayType,\n    HolidayType.MemorialDayType,\n    HolidayType.JuneteenthType,\n    HolidayType.IndependenceDayType,\n    HolidayType.LaborDayType,\n    HolidayType.ColumbusDayType,\n    HolidayType.VeteransDayType,\n    HolidayType.ThanksgivingType,\n    HolidayType.BlackFridayType,\n    HolidayType.ChristmasType,\n  ].map((h) => h.name);\n  const holidays = HolidayType.values.map((h) => ({\n    label: h.label,\n    type: enabled.includes(h.name) ? (\"Enabled\" as const) : (\"Disabled\" as const),\n  }));\n  return {\n    label,\n    setpoint,\n    mondaySchedule: schedule,\n    tuesdaySchedule: schedule,\n    wednesdaySchedule: schedule,\n    thursdaySchedule: schedule,\n    fridaySchedule: schedule,\n    saturdaySchedule: unoccupied,\n    sundaySchedule: unoccupied,\n    holidaySchedule: unoccupied,\n    holidays: holidays,\n  };\n};\n\nexport { createConfigurationLabel, createConfigurationDefault, isConfigurationDelete };\n","import { isNumber, sum } from \"lodash\";\n\nimport { ISchedule } from \"controllers/schedules/action\";\nimport moment from \"moment\";\nimport { DeepPartial } from \"./types\";\n\nconst TIME_PADDING = 120;\nconst START_TIME_MIN = 0 * 60;\nconst START_TIME_DEFAULT = 8 * 60;\nconst END_TIME_MAX = 24 * 60;\nconst END_TIME_DEFAULT = 18 * 60;\nconst DATA_FORMAT = \"HH:mm\";\nconst TIME_FORMAT = \"h:mm\\xa0a\";\n\ntype Required = \"startTime\" | \"endTime\";\n\nconst toDataFormat = (value: number) =>\n  moment(\"00:00\", [DATA_FORMAT])\n    .add(Math.trunc(value / 60), \"hours\")\n    .add(value % 60, \"minutes\")\n    .format(DATA_FORMAT);\n\nconst toTimeFormat = (value: number) =>\n  moment(\"00:00\", [DATA_FORMAT])\n    .add(Math.trunc(value / 60), \"hours\")\n    .add(value % 60, \"minutes\")\n    .format(TIME_FORMAT);\n\nconst toUpperBound = (value: number, boundary: number, upper?: boolean) => (upper && value === 0 ? boundary : value);\n\nconst toMinutes = (value?: string, upper?: boolean) =>\n  toUpperBound(moment(value, [DATA_FORMAT, TIME_FORMAT]).hours(), 24, upper) * 60 +\n  moment(value, [DATA_FORMAT, TIME_FORMAT]).minutes();\n\nconst createScheduleLabel = (\n  type: \"all\" | Required,\n  schedule:\n    | (DeepPartial<ISchedule> & Pick<ISchedule, Required>)\n    | { occupied?: boolean; startTime: number; endTime: number }\n): string => {\n  const occupied = schedule?.occupied === undefined ? true : schedule.occupied;\n  const startTime = isNumber(schedule.startTime) ? schedule.startTime : toMinutes(schedule.startTime, false);\n  const endTime = isNumber(schedule.endTime) ? schedule.endTime : toMinutes(schedule.endTime, true);\n  switch (type) {\n    case \"startTime\":\n      return `${toTimeFormat(startTime)}`;\n    case \"endTime\":\n      return `${toTimeFormat(endTime)}`;\n    case \"all\":\n    default:\n      return occupied\n        ? startTime === 0 && endTime === 1440\n          ? \"Occupied All Day\"\n          : `Occupied From Start Time: ${toTimeFormat(startTime)} To End Time: ${toTimeFormat(endTime)}`\n        : \"Unoccupied All Day\";\n  }\n};\n\nconst getScheduleMessage = (schedule: DeepPartial<ISchedule> & Pick<ISchedule, Required>): string | undefined => {\n  return undefined;\n};\n\nconst isScheduleValid = (schedule: DeepPartial<ISchedule> & Pick<ISchedule, Required>): boolean => {\n  return getScheduleMessage(schedule) === undefined;\n};\n\nconst isScheduleDelete = (schedule: DeepPartial<ISchedule>) => {\n  return sum(Object.values(schedule?._count || {})) === 0;\n};\n\nexport {\n  TIME_PADDING,\n  START_TIME_MIN,\n  START_TIME_DEFAULT,\n  END_TIME_MAX,\n  END_TIME_DEFAULT,\n  DATA_FORMAT,\n  TIME_FORMAT,\n  toDataFormat,\n  toTimeFormat,\n  toMinutes,\n  createScheduleLabel,\n  getScheduleMessage,\n  isScheduleValid,\n  isScheduleDelete,\n};\n","import { isNumber, sum } from \"lodash\";\n\nimport { ISetpoint } from \"controllers/setpoints/action\";\nimport { ValidateType } from \"common\";\nimport { DeepPartial } from \"./types\";\n\nconst SETPOINT_PADDING = parseInt(process.env.REACT_APP_SETPOINT_PADDING || \"2\");\nconst DEADBAND_MIN = (ValidateType.DeadbandType.options?.min as number) || 2;\nconst DEADBAND_MAX = (ValidateType.DeadbandType.options?.max as number) || 6;\nconst DEADBAND_DEFAULT = (ValidateType.DeadbandType.options?.default as number) || 4;\nconst HEATING_MIN = (ValidateType.HeatingType.options?.min as number) || 55;\nconst HEATING_DEFAULT = (ValidateType.HeatingType.options?.default as number) || 60;\nconst COOLING_MAX = (ValidateType.CoolingType.options?.max as number) || 85;\nconst COOLING_DEFAULT = (ValidateType.CoolingType.options?.default as number) || 80;\nconst SETPOINT_MIN = HEATING_MIN;\nconst SETPOINT_MAX = COOLING_MAX;\nconst SETPOINT_DEFAULT = (ValidateType.SetpointType.options?.default as number) || 70;\n\ntype Required = \"setpoint\" | \"deadband\" | \"heating\" | \"cooling\";\n\nconst createSetpointLabel = (\n  type: \"all\" | Required,\n  setpoint: DeepPartial<ISetpoint> & Pick<ISetpoint, Required>\n): string => {\n  switch (type) {\n    case \"all\":\n      return `Occupied Setpoint: ${createSetpointLabel(\"setpoint\", setpoint)} Deadband: ${createSetpointLabel(\n        \"deadband\",\n        setpoint\n      )} Unoccupied Heating: ${createSetpointLabel(\"heating\", setpoint)} Cooling: ${createSetpointLabel(\n        \"cooling\",\n        setpoint\n      )}`;\n    case \"setpoint\":\n    case \"deadband\":\n    case \"heating\":\n    case \"cooling\":\n    default:\n      return `${setpoint[type]}\\xa0F`;\n  }\n};\n\nconst getSetpointMessage = (setpoint: DeepPartial<ISetpoint> & Pick<ISetpoint, Required>): string | undefined => {\n  if (setpoint.deadband < DEADBAND_MIN || setpoint.deadband > DEADBAND_MAX) {\n    return `Deadband must be in the range [${DEADBAND_MIN},${DEADBAND_MAX}].`;\n  } else if (\n    setpoint.setpoint < setpoint.heating + SETPOINT_PADDING + setpoint.deadband / 2 ||\n    setpoint.setpoint > setpoint.cooling - SETPOINT_PADDING - setpoint.deadband / 2\n  ) {\n    return `Occupied setpoint must be in the range [${setpoint.heating + SETPOINT_PADDING + setpoint.deadband / 2},${\n      setpoint.cooling - SETPOINT_PADDING - setpoint.deadband / 2\n    }]`;\n  } else if (setpoint.heating < HEATING_MIN || setpoint.cooling > COOLING_MAX) {\n    return `Unoccupied heating and cooling must be in the range [${HEATING_MIN},${COOLING_MAX}]`;\n  } else if (setpoint.setpoint % 0.5 !== 0) {\n    return \"Occupied setpoint must be a whole or half degree.\";\n  } else if (setpoint.deadband % 1 !== 0) {\n    return \"Deadband must be a whole degree.\";\n  } else if (setpoint.heating % 0.5 !== 0 || setpoint.cooling % 0.5 !== 0) {\n    return \"Unoccupied heating or cooling must be a whole or half degree.\";\n  }\n};\n\nconst isSetpointValid = (setpoint: DeepPartial<ISetpoint> | undefined): boolean => {\n  if (\n    !setpoint ||\n    !isNumber(setpoint.setpoint) ||\n    !isNumber(setpoint.deadband) ||\n    !isNumber(setpoint.heating) ||\n    !isNumber(setpoint.cooling)\n  ) {\n    return false;\n  }\n  return getSetpointMessage(setpoint as DeepPartial<ISetpoint> & Pick<ISetpoint, Required>) === undefined;\n};\n\nconst isSetpointDelete = (setpoint: DeepPartial<ISetpoint>) => {\n  return sum(Object.values(setpoint?._count || {})) === 0;\n};\n\nexport {\n  SETPOINT_PADDING,\n  DEADBAND_MIN,\n  DEADBAND_MAX,\n  DEADBAND_DEFAULT,\n  HEATING_MIN,\n  HEATING_DEFAULT,\n  COOLING_MAX,\n  COOLING_DEFAULT,\n  SETPOINT_MIN,\n  SETPOINT_MAX,\n  SETPOINT_DEFAULT,\n  createSetpointLabel,\n  getSetpointMessage,\n  isSetpointValid,\n  isSetpointDelete,\n};\n"],"names":["Configuration","props","unit","editing","configurations","handleChange","handleCreate","readOnly","getValue","useCallback","field","get","className","content","text","onClick","map","configuration","label","id","placement","rightIcon","IconNames","minimal","type","value","onChange","e","target","Holiday","path","holiday","month","day","observance","suffix","ObservanceType","desc","moment","set","format","icon","intent","Intent","action","disabled","checked","indeterminate","holidayOrder","HolidayType","a","CreateHoliday","holidays","useState","setLabel","Date","date","setDate","setObservance","open","setOpen","d","u","isOpen","o","name","isEmpty","undefined","find","v","i","Math","max","getMonth","getDate","configurationId","createdAt","Holidays","dispatch","useDispatch","deleting","setDeleting","merge","forEach","h","index","filter","sort","b","valueOf","indexOf","confirmButtonText","cancelButtonText","onConfirm","deleteHoliday","onClose","Occupancy","occupancy","schedule","disable","startOf","isBefore","allowUnoccupied","parseBoolean","process","defaultSchedule","occupied","startTime","toDataFormat","START_TIME_DEFAULT","endTime","END_TIME_DEFAULT","CreateOccupancy","clone","setSchedule","toLowerCase","values","start","toMinutes","START_TIME_MIN","end","END_TIME_MAX","previous","min","stepSize","labelStepSize","labelRenderer","isHandleTooltip","toTimeFormat","HandleType","interactionKind","HandleInteractionKind","intentAfter","copy","cloneDeep","clamp","TIME_PADDING","createScheduleLabel","inRange","intentBefore","toISOString","Occupancies","occupancies","deleteOccupancy","Schedule","title","includes","holidaySchedule","Schedules","Setpoint","setpoint","error","useMemo","getSetpointMessage","renderSingle","SETPOINT_MIN","SETPOINT_MAX","HEATING_MIN","COOLING_MAX","deadband","padding","SETPOINT_PADDING","heating","cooling","createSetpointLabel","renderOccupied","renderUnoccupied","step","DEADBAND_MIN","DEADBAND_MAX","onValueChange","renderSliders","Setpoints","Symbol","getCommon","objects","omit","length","result","keys","union","obj","Object","objectKeys","key","toString","every","isEqual","Units","configRouteIsHidden","units","temp","updateUnit","isObject","setState","doDefault","createConfigurationDefault","unitId","createConfiguration","expanded","handleEdit","filtered","state","current","isSave","confirm","handleCancel","handleConfirm","handleSave","handleClearAll","editingAll","handleSaveAll","location","latitude","longitude","handleDelete","deleteConfiguration","handlePush","stage","StageType","isSetpointValid","isEqualWith","_a","_b","k","isPush","configRoute","routes","data","hidden","this","readUnits","readUnitsPoll","defaultPollInterval","readConfigurations","readConfigurationsPoll","user","RoleType","granted","role","split","Position","prompt","isNil","when","message","t","defaultUnit","f","renderPrompt","interactive","contents","hasCaret","isExpanded","onNodeExpand","onNodeCollapse","onNodeClick","isAdmin","Unit","renderStatus","campus","building","system","timezone","renderConfirm","React","mapActionToProps","filterUnits","updateConfiguration","updateSetpoint","connect","selectReadUnits","selectFilterUnits","selectReadConfigurations","RouteBase","renderRoute","p","createConfigurationLabel","isConfigurationDelete","sum","_count","SETPOINT_DEFAULT","DEADBAND_DEFAULT","HEATING_DEFAULT","COOLING_DEFAULT","unoccupied","enabled","mondaySchedule","tuesdaySchedule","wednesdaySchedule","thursdaySchedule","fridaySchedule","saturdaySchedule","sundaySchedule","DATA_FORMAT","TIME_FORMAT","add","trunc","upper","boundary","toUpperBound","hours","minutes","isNumber","parseInt","ValidateType","default"],"sourceRoot":""}