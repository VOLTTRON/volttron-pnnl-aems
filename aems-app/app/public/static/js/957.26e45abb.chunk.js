"use strict";(self.webpackChunkaems_client=self.webpackChunkaems_client||[]).push([[957],{97957:function(n,e,i){i.r(e),i.d(e,{default:function(){return on}});var t=i(1413),a=i(9153),o=i(93433),l=i(15671),d=i(43144),c=i(60136),r=i(43668),s=i(50698),u=i(32183),h=i(9418),p=i(36625),f=i(4481),v=i(97626),x=i(23122),g=i(763),m=i(99574),j=i(72791),b=i(80184);function y(n){var e,i=n.unit,t=n.editing,a=n.configurations,o=n.handleChange,l=n.handleCreate,d=n.readOnly,c=(0,j.useCallback)((function(n){return(0,g.get)(t,n,(0,g.get)(i,n))}),[t,i]);return(0,b.jsxs)(b.Fragment,{children:[!d&&(0,b.jsxs)("div",{className:"row",children:[(0,b.jsx)("div",{className:"configuration select",children:(0,b.jsxs)(h.__,{children:[(0,b.jsx)("h3",{children:"Select Configuration"}),(0,b.jsx)(m.p,{content:(0,b.jsxs)(h.v2,{children:[(0,b.jsx)(h.sN,{text:"New Configuration",onClick:function(){return l(i)}}),null===a||void 0===a?void 0:a.map((function(n){return(0,b.jsx)(h.sN,{text:n.label,onClick:function(){return o("configurationId",i)(n.id)}},n.id)}))]}),placement:"bottom-start",children:(0,b.jsx)(h.zx,{rightIcon:x.vv6,minimal:!0,children:(null===i||void 0===i||null===(e=i.configuration)||void 0===e?void 0:e.label)||"Select Configuration..."})})]})}),(0,b.jsx)("div",{})]}),(0,b.jsxs)("div",{className:"row",children:[(0,b.jsx)("div",{className:"label",children:(0,b.jsxs)(h.__,{children:[d?(0,b.jsx)("h3",{children:"Configuration Label"}):(0,b.jsx)("b",{children:"Configuration Label"}),(0,b.jsx)(h.BZ,{type:"text",value:c("configuration.label"),onChange:function(n){return o("configuration.label",t)(n.target.value)},readOnly:d})]})}),(0,b.jsx)("div",{})]})]})}var S=i(29439),C=i(696),N=i(78719),O=i(42632),T=i(72426),R=i.n(T);function M(n){var e,i=n.path,t=n.unit,a=n.editing,o=n.holiday,l=n.handleChange,d=n.readOnly,c=o.id,r=o.label,u=o.type,p=o.month,f=o.day,v=o.observance,m=(0,j.useCallback)((function(n){return(0,g.get)(a,n,(0,g.get)(t,n))}),[a,t]);if("Custom"===u){var y=v&&(null===(e=C.VD.parse(v))||void 0===e?void 0:e.label),S="".concat(R()().set("month",p-1).set("date",f).format("MMMM Do")," ").concat(y&&"(".concat(y,")"));return(0,b.jsx)(b.Fragment,{children:(0,b.jsxs)("div",{className:"row",children:[(0,b.jsx)("div",{children:(0,b.jsxs)(h.__,{children:[(0,b.jsx)("b",{children:r}),(0,b.jsx)(h.BZ,{type:"text",value:S,readOnly:!0})]})}),(0,b.jsx)("div",{children:(0,b.jsx)(h.zx,{icon:x.R4W,intent:s.S.WARNING,minimal:!0,onClick:function(){l(i,a)({id:c,type:u,action:"delete"})},disabled:d})})]})})}return(0,b.jsxs)("div",{className:"row",children:[(0,b.jsx)("div",{className:"holiday",children:(0,b.jsxs)(h.__,{children:[(0,b.jsx)("b",{children:r}),(0,b.jsx)(h.XZ,{label:"Enabled",checked:"Enabled"===m("".concat(i,".type")),indeterminate:null==m("".concat(i,".type")),onClick:function(){l("".concat(i),a)({id:m("".concat(i,".id")),type:"Enabled"===m("".concat(i,".type"))?"Disabled":"Enabled"})},disabled:d})]})}),(0,b.jsx)("div",{})]})}var k=i(60364),D=C.R$.values.map((function(n){return n.label}));function Z(n){var e=n.unit,i=n.editing,t=n.handleChange,a=n.holidays,o=(0,j.useState)(""),l=(0,S.Z)(o,2),d=l[0],c=l[1],r=(0,j.useState)(new Date("2024-01-01")),u=(0,S.Z)(r,2),p=u[0],f=u[1],v=(0,j.useState)(""),y=(0,S.Z)(v,2),N=y[0],T=y[1],M=(0,j.useState)(!1),k=(0,S.Z)(M,2),D=k[0],Z=k[1];return(0,b.jsxs)("div",{className:"row",children:[(0,b.jsx)("div",{className:"label",children:(0,b.jsxs)(h.__,{children:[(0,b.jsx)("b",{children:"Holiday Label"}),(0,b.jsx)(h.BZ,{type:"text",value:d,onChange:function(n){return c(n.target.value)}})]})}),(0,b.jsx)("div",{children:(0,b.jsxs)(h.__,{children:[(0,b.jsx)("b",{children:"Date"}),(0,b.jsx)(m.p,{content:(0,b.jsx)(O.M,{minDate:new Date("2024-01-01"),maxDate:new Date("2024-12-31"),value:p,onChange:function(n,e){n&&f(n),Z(!e)}}),isOpen:D,placement:"bottom-start",children:(0,b.jsx)(h.zx,{rightIcon:x.XNV,onClick:function(){return Z(!0)},minimal:!0,children:R()(p).format("MMMM Do")})})]})}),(0,b.jsx)("div",{children:(0,b.jsxs)(h.__,{children:[(0,b.jsx)("b",{children:"Observance"}),(0,b.jsx)(m.p,{content:(0,b.jsxs)(h.v2,{children:[(0,b.jsx)(h.sN,{text:"Always on Date",onClick:function(){return T("")}}),C.VD.values.map((function(n){return(0,b.jsx)(h.sN,{text:n.label,onClick:function(){return T(n.label)}},n.name)}))]}),placement:"bottom-start",children:(0,b.jsx)(h.zx,{rightIcon:x.vv6,minimal:!0,children:N||"Always on Date"})})]})}),(0,b.jsx)("div",{children:(0,b.jsx)(h.zx,{icon:x.YZ9,intent:s.S.PRIMARY,minimal:!0,disabled:(0,g.isEmpty)(d)||void 0!==a.find((function(n){return n.label===d})),onClick:function(){var n,a=Math.max((0,g.get)(e,"configuration.holidays.length",0),(0,g.get)(i,"configuration.holidays.length",0));t("configuration.holidays.".concat(a),i)({type:"Custom",label:d,month:p.getMonth()+1,day:p.getDate(),observance:N,configurationId:null===e||void 0===e||null===(n=e.configuration)||void 0===n?void 0:n.id,createdAt:R()().format(),action:"create"}),c(""),f(new Date),T("")},children:"Create Holiday"})})]})}function z(n){var e,i=n.unit,t=n.editing,a=n.handleChange,o=n.readOnly,l=(0,k.I0)(),d=(0,j.useState)(void 0),c=(0,S.Z)(d,2),r=c[0],u=c[1],p=(0,g.merge)([],null===(e=i.configuration)||void 0===e?void 0:e.holidays,(0,g.get)(t,"configuration.holidays"));return p.forEach((function(n,e){return n.index=e})),(0,b.jsxs)(b.Fragment,{children:[!o&&(0,b.jsxs)(h.__,{children:[(0,b.jsx)("h3",{children:"Create Holiday"}),(0,b.jsx)(Z,{unit:i,editing:t,handleChange:a,holidays:p})]}),(0,b.jsxs)(h.__,{children:[(0,b.jsx)("h3",{children:"Custom Holidays"}),(0,b.jsx)("ul",{children:(0,g.isEmpty)(p.filter((function(n){return"Custom"===n.type&&"delete"!==n.action})))?(0,b.jsx)("li",{children:"No Custom Holidays Defined"},"empty"):p.filter((function(n){return"Custom"===n.type&&"delete"!==n.action})).sort((function(n,e){return R()(e.createdAt).valueOf()-R()(n.createdAt).valueOf()})).map((function(n,e){return(0,b.jsx)("li",{children:(0,b.jsx)(M,{path:"configuration.holidays.".concat(n.index),unit:i,editing:t,holiday:n,handleChange:a,readOnly:o},n.index)},n.index)}))})]}),(0,b.jsxs)(h.__,{children:[(0,b.jsx)("h3",{children:"Predefined Holidays"}),(0,b.jsx)("ul",{children:p.filter((function(n){return"Custom"!==n.type})).sort((function(n,e){return D.indexOf(n.label)-D.indexOf(e.label)})).map((function(n,e){return(0,b.jsx)("li",{children:(0,b.jsx)(M,{path:"configuration.holidays.".concat(n.index),unit:i,editing:t,holiday:n,handleChange:a,readOnly:o},n.index)},n.index)}))})]}),(0,b.jsx)(h.bZ,{intent:s.S.DANGER,isOpen:void 0!==r,confirmButtonText:"Yes",cancelButtonText:"Cancel",onConfirm:function(){var n;return l((0,N.qd)(null!==(n=null===r||void 0===r?void 0:r.id)&&void 0!==n?n:-1))},onClose:function(){return u(void 0)},children:(0,b.jsxs)("p",{children:["Permanently delete the holiday ",null===r||void 0===r?void 0:r.label,"?"]})})]})}var E=i(63769),A=i(48565);function _(n){var e=n.path,i=n.editing,t=n.occupancy,a=n.handleChange,o=t.id,l=t.label,d=t.date,c=t.schedule,r=null===c||void 0===c?void 0:c.label,u="".concat(R()(d).format("dddd MMMM Do YYYY")," ").concat(r&&"(".concat(r,")")),p=R()(d).startOf("day").isBefore(R()().startOf("day"),"day");return(0,b.jsx)(b.Fragment,{children:(0,b.jsxs)("div",{className:"row",children:[(0,b.jsx)("div",{children:(0,b.jsxs)(h.__,{disabled:p,children:[(0,b.jsx)("b",{children:l}),(0,b.jsx)(h.BZ,{type:"text",value:u,disabled:p,readOnly:!0})]})}),(0,b.jsx)("div",{children:(0,b.jsx)(h.zx,{icon:x.R4W,intent:s.S.WARNING,minimal:!0,onClick:function(){a(e,i)({id:o,action:"delete"})}})})]})})}var L,B=i(50668),P=(0,B.parseBoolean)("false"),I={label:"",occupied:!0,startTime:(0,E.cz)(E.S$),endTime:(0,E.cz)(E.Be)};function U(n){var e=n.unit,i=n.editing,t=n.handleChange,a=(0,j.useState)(""),o=(0,S.Z)(a,2),l=o[0],d=o[1],c=(0,j.useState)(new Date),r=(0,S.Z)(c,2),u=r[0],p=r[1],f=(0,j.useState)((0,g.clone)(I)),v=(0,S.Z)(f,2),y=v[0],C=v[1],N=(0,j.useState)(!1),T=(0,S.Z)(N,2),M=T[0],k=T[1],D=(0,j.useCallback)((function(n){return(0,g.get)(i,n,(0,g.get)(e,n))}),[i,e]),Z=R()(u).format("dddd").toLowerCase(),z={schedule:{start:y.occupied?(0,E.xM)(y.startTime,!1):E.lL,end:y.occupied?(0,E.xM)(y.endTime,!0):E.QM},previous:{start:D("configuration.".concat(Z,"Schedule.occupied"))?(0,E.xM)(D("configuration.".concat(Z,"Schedule.startTime")),!1):E.lL,end:D("configuration.".concat(Z,"Schedule.occupied"))?(0,E.xM)(D("configuration.".concat(Z,"Schedule.endTime")),!0):E.QM,occupied:D("configuration.".concat(Z,"Schedule.occupied"))}};return(0,b.jsxs)("div",{className:"row",children:[(0,b.jsx)("div",{className:"label",children:(0,b.jsxs)(h.__,{children:[(0,b.jsx)("b",{children:"Occupancy Label"}),(0,b.jsx)(h.BZ,{type:"text",value:l,onChange:function(n){return d(n.target.value)}})]})}),(0,b.jsxs)("div",{className:"row",children:[(0,b.jsx)("div",{className:"label",children:(0,b.jsxs)(h.__,{children:[(0,b.jsx)("b",{children:"Occupancy Schedule"}),(0,b.jsx)(h.BZ,{type:"text",value:y.label,readOnly:!0})]})}),(0,b.jsx)("div",{className:"occupancy",children:(0,b.jsxs)(h.Zz,{min:E.lL,max:E.QM,stepSize:5,labelStepSize:240,labelRenderer:function(n,e){return null!==e&&void 0!==e&&e.isHandleTooltip||n>E.lL&&n<E.QM?(0,E.li)(n):""},disabled:!y.occupied,children:[(0,b.jsx)(h.Zz.Handle,{type:h.gZ.START,interactionKind:h.qB.LOCK,intentAfter:y.occupied?s.S.SUCCESS:s.S.NONE,value:z.schedule.start,onChange:function(n){var e=(0,g.cloneDeep)(y),i=y.occupied,t=(0,E.xM)(y.endTime,!0),a=(0,g.clamp)(n,E.lL,Math.min(t,E.QM)-E.Ls),o=(0,E.sG)("all",{occupied:i,startTime:a,endTime:t});(0,g.merge)(e,{startTime:(0,E.cz)(a),label:o}),C(e)}}),(0,b.jsx)(h.Zz.Handle,{type:h.gZ.START,interactionKind:h.qB.NONE,intentAfter:z.previous.occupied?(0,g.inRange)(z.previous.start,z.schedule.start,z.schedule.end)?s.S.SUCCESS:s.S.PRIMARY:s.S.NONE,value:z.previous.start}),(0,b.jsx)(h.Zz.Handle,{type:h.gZ.END,interactionKind:h.qB.NONE,intentBefore:z.previous.occupied?(0,g.inRange)(z.previous.end,z.schedule.start,z.schedule.end)?s.S.SUCCESS:s.S.PRIMARY:s.S.NONE,value:z.previous.end}),(0,b.jsx)(h.Zz.Handle,{type:h.gZ.END,interactionKind:h.qB.LOCK,intentBefore:y.occupied?s.S.SUCCESS:s.S.NONE,value:z.schedule.end,onChange:function(n){var e=(0,g.cloneDeep)(y),i=y.occupied,t=(0,E.xM)(y.startTime,!1),a=(0,g.clamp)(n,Math.max(t,E.lL)+E.Ls,E.QM),o=(0,E.sG)("all",{occupied:i,startTime:t,endTime:a});(0,g.merge)(e,{endTime:(0,E.cz)(a),label:o}),C(e)}})]})}),P?(0,b.jsx)("div",{className:"unoccupied",children:(0,b.jsx)(h.XZ,{label:"Unoccupied",checked:!y.occupied,onClick:function(){var n=(0,g.cloneDeep)(y),e=!y.occupied,i=(0,E.xM)(y.startTime,!1),t=(0,E.xM)(y.endTime,!0),a=(0,E.sG)("all",{occupied:e,startTime:i,endTime:t});(0,g.merge)(n,{occupied:e,label:a}),C(n)}})}):(0,b.jsx)("div",{})]}),(0,b.jsx)("div",{children:(0,b.jsxs)(h.__,{children:[(0,b.jsx)("b",{children:"Date"}),(0,b.jsx)(m.p,{content:(0,b.jsx)(O.M,{value:u,onChange:function(n,e){n&&p(n),k(!e)}}),isOpen:M,placement:"bottom-start",children:(0,b.jsx)(h.zx,{rightIcon:x.XNV,onClick:function(){return k(!0)},minimal:!0,children:R()(u).format("dddd MMMM Do YYYY")})})]})}),(0,b.jsx)("div",{children:(0,b.jsx)(h.zx,{icon:x.YZ9,intent:s.S.PRIMARY,minimal:!0,onClick:function(){var n,a=Math.max((0,g.get)(e,"configuration.occupancies.length",0),(0,g.get)(i,"configuration.occupancies.length",0));t("configuration.occupancies.".concat(a),i)({label:l,date:u.toISOString(),schedule:y,configurationId:null===e||void 0===e||null===(n=e.configuration)||void 0===n?void 0:n.id,createdAt:R()().format(),action:"create"}),d(""),p(new Date),C((0,g.clone)(I))},children:"Create Occupancy"})})]})}function w(n){var e,i=n.unit,t=n.editing,a=n.handleChange,o=(0,k.I0)(),l=(0,j.useState)(void 0),d=(0,S.Z)(l,2),c=d[0],r=d[1],u=(0,g.merge)([],null===(e=i.configuration)||void 0===e?void 0:e.occupancies,(0,g.get)(t,"configuration.occupancies"));return u.forEach((function(n,e){return n.index=e})),(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)(h.__,{children:[(0,b.jsx)("h3",{children:"Create Occupancy"}),(0,b.jsx)(U,{unit:i,editing:t,handleChange:a})]}),(0,b.jsxs)(h.__,{children:[(0,b.jsx)("h3",{children:"Temporary Occupancies"}),(0,b.jsx)("ul",{children:(0,g.isEmpty)(u.filter((function(n){return"delete"!==n.action})))?(0,b.jsx)("li",{children:"No Temporary Occupancies Defined"},"empty"):u.filter((function(n){return"delete"!==n.action})).sort((function(n,e){return R()(e.date).valueOf()-R()(n.date).valueOf()})).map((function(n,e){return(0,b.jsx)("li",{children:(0,b.jsx)(_,{path:"configuration.occupancies.".concat(n.index),unit:i,editing:t,occupancy:n,handleChange:a},n.index)},n.index)}))})]}),(0,b.jsx)(h.bZ,{intent:s.S.DANGER,isOpen:void 0!==c,confirmButtonText:"Yes",cancelButtonText:"Cancel",onConfirm:function(){var n;return o((0,A.VT)(null!==(n=null===c||void 0===c?void 0:c.id)&&void 0!==n?n:-1))},onClose:function(){return r(void 0)},children:(0,b.jsxs)("p",{children:["Permanently delete the occupancy ",null===c||void 0===c?void 0:c.label,"?"]})})]})}function $(n){var e=n.title,i=n.path,t=n.unit,a=n.editing,o=n.handleChange,l=n.readOnly,d=void 0===l?["title"]:l,c=(0,j.useCallback)((function(n){return(0,g.get)(a,n,(0,g.get)(t,n))}),[a,t]);return(0,b.jsxs)("div",{className:"row",children:[(0,b.jsx)("h3",{children:" "}),(0,b.jsx)("div",{className:"label",children:(0,b.jsxs)(h.__,{children:[(0,b.jsx)("b",{children:e}),(0,b.jsx)(h.BZ,{type:"text",value:c("".concat(i,".label")),onChange:function(n){o("".concat(i,".label"),a)(n.target.value)},readOnly:null===d||void 0===d?void 0:d.includes("title")})]})}),(0,b.jsx)("div",{className:"schedule",children:(0,b.jsx)(h.U2,{min:E.lL,max:E.QM,stepSize:5,labelStepSize:240,intent:s.S.SUCCESS,value:c("".concat(i,".occupied"))?[(0,E.xM)(c("".concat(i,".startTime")),!1),(0,E.xM)(c("".concat(i,".endTime")),!0)]:[E.lL,E.lL],labelRenderer:function(n,e){return null!==e&&void 0!==e&&e.isHandleTooltip||n>E.lL&&n<E.QM?(0,E.li)(n):""},disabled:(null===d||void 0===d?void 0:d.includes("occupied"))||!(0,g.get)(a,"".concat(i,".occupied"),(0,g.get)(t,"".concat(i,".occupied"))),onChange:function(n){var e=c("".concat(i,".occupied")),t=(0,g.clamp)(n[0],E.lL,Math.min(n[1],E.QM)-E.Ls),l=(0,g.clamp)(n[1],Math.max(n[0],E.lL)+E.Ls,E.QM),d=(0,E.sG)("all",{occupied:e,startTime:t,endTime:l});o("".concat(i),a)({startTime:(0,E.cz)(t),endTime:(0,E.cz)(l),label:d})}})}),(0,b.jsx)("div",{className:"unoccupied",children:(0,b.jsx)(h.XZ,{label:"Unoccupied",checked:!c("".concat(i,".occupied")),onClick:function(){var n=!c("".concat(i,".occupied")),e=(0,E.xM)(c("".concat(i,".startTime")),!1),t=(0,E.xM)(c("".concat(i,".endTime")),!0),l=(0,E.sG)("all",{occupied:n,startTime:e,endTime:t});o("".concat(i),a)({occupied:n,label:l})},disabled:null===d||void 0===d?void 0:d.includes("unoccupied")})})]})}I.label=(0,E.sG)("all",I);var H=(0,B.parseBoolean)(null!==(L="false")?L:"");function Y(n){var e=n.unit,i=n.editing,t=n.handleChange,a=n.readOnly;return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)($,{title:"Monday Schedule",path:"configuration.mondaySchedule",unit:e,editing:i,handleChange:t,readOnly:a?["title","occupied","unoccupied"]:void 0}),(0,b.jsx)($,{title:"Tuesday Schedule",path:"configuration.tuesdaySchedule",unit:e,editing:i,handleChange:t,readOnly:a?["title","occupied","unoccupied"]:void 0}),(0,b.jsx)($,{title:"Wednesday Schedule",path:"configuration.wednesdaySchedule",unit:e,editing:i,handleChange:t,readOnly:a?["title","occupied","unoccupied"]:void 0}),(0,b.jsx)($,{title:"Thursday Schedule",path:"configuration.thursdaySchedule",unit:e,editing:i,handleChange:t,readOnly:a?["title","occupied","unoccupied"]:void 0}),(0,b.jsx)($,{title:"Friday Schedule",path:"configuration.fridaySchedule",unit:e,editing:i,handleChange:t,readOnly:a?["title","occupied","unoccupied"]:void 0}),(0,b.jsx)($,{title:"Saturday Schedule",path:"configuration.saturdaySchedule",unit:e,editing:i,handleChange:t,readOnly:a?["title","occupied","unoccupied"]:void 0}),(0,b.jsx)($,{title:"Sunday Schedule",path:"configuration.sundaySchedule",unit:e,editing:i,handleChange:t,readOnly:a?["title","occupied","unoccupied"]:void 0}),H&&(0,b.jsx)($,{title:"Holiday Schedule",path:"configuration.holidaySchedule",unit:e,editing:i,handleChange:t,readOnly:a?["title","occupied","unoccupied"]:void 0})]})}var G=i(49107);function K(n){var e=n.type,i=n.title,t=n.path,a=n.unit,o=n.editing,l=n.setpoint,d=n.handleChange,c=n.readOnly,r=void 0===c?["title"]:c,u=(0,j.useCallback)((function(n){return(0,g.get)(o,n,(0,g.get)(a,n))}),[o,a]),p=(0,j.useMemo)((function(){return(0,G.qr)((0,g.merge)({},(0,g.get)(a,t),l))||"\xa0"}),[t,a,l]),f=function(){return(0,b.jsxs)(h.Zz,{min:G.QG,max:G.Of,stepSize:.5,labelStepSize:5,labelRenderer:function(n,e){return null!==e&&void 0!==e&&e.isHandleTooltip||n>G.op&&n<G.Ig?"".concat(n,"\xba\xa0F"):""},children:[(0,b.jsx)(h.Zz.Handle,{type:h.gZ.START,interactionKind:h.qB.LOCK,intentAfter:s.S.WARNING,value:u("".concat(t,".heating")),onChange:function(n){var e=u("".concat(t,".setpoint")),i=u("".concat(t,".deadband")),a=G.ax+i/2,l=(0,g.clamp)(n,G.op,e-a),c=u("".concat(t,".cooling")),r=(0,G.hD)("all",{setpoint:e,deadband:i,heating:l,cooling:c});d("".concat(t),o)({heating:l,label:r})}}),(0,b.jsx)(h.Zz.Handle,{type:h.gZ.START,interactionKind:h.qB.LOCK,intentAfter:s.S.NONE,value:u("".concat(t,".setpoint"))-u("".concat(t,".deadband"))/2,onChange:function(n){var e=u("".concat(t,".deadband")),i=G.ax+e/2,a=u("".concat(t,".heating")),l=u("".concat(t,".cooling")),c=n+e/2,r=(0,g.clamp)(c,a+i,l-i),s=(0,G.hD)("all",{setpoint:r,deadband:e,heating:a,cooling:l});d("".concat(t),o)({setpoint:r,label:s})}}),(0,b.jsx)(h.Zz.Handle,{type:h.gZ.END,interactionKind:h.qB.LOCK,intentBefore:s.S.NONE,value:u("".concat(t,".setpoint"))+u("".concat(t,".deadband"))/2,onChange:function(n){var e=u("".concat(t,".deadband")),i=G.ax+e/2,a=u("".concat(t,".heating")),l=u("".concat(t,".cooling")),c=n-e/2,r=(0,g.clamp)(c,a+i,l-i),s=(0,G.hD)("all",{setpoint:r,deadband:e,heating:a,cooling:l});d("".concat(t),o)({setpoint:r,label:s})}}),(0,b.jsx)(h.Zz.Handle,{type:h.gZ.END,interactionKind:h.qB.LOCK,intentBefore:s.S.PRIMARY,value:u("".concat(t,".cooling")),onChange:function(n){var e=u("".concat(t,".setpoint")),i=u("".concat(t,".deadband")),a=G.ax+i/2,l=u("".concat(t,".heating")),c=(0,g.clamp)(n,e+a,G.Ig),r=(0,G.hD)("all",{setpoint:e,deadband:i,heating:l,cooling:c});d("".concat(t),o)({cooling:c,label:r})}})]})},v=function(){return(0,b.jsxs)(h.__,{children:[(0,b.jsx)("b",{children:"Occupied"}),(0,b.jsxs)(h.Zz,{min:G.QG,max:G.Of,stepSize:.5,labelStepSize:5,intent:s.S.SUCCESS,labelRenderer:function(n,e){return null!==e&&void 0!==e&&e.isHandleTooltip||n>G.op&&n<G.Ig?"".concat(n,"\xba\xa0F"):""},children:[(0,b.jsx)(h.Zz.Handle,{type:h.gZ.START,interactionKind:h.qB.LOCK,intentBefore:s.S.WARNING,intentAfter:s.S.SUCCESS,value:u("".concat(t,".setpoint"))-u("".concat(t,".deadband"))/2,onChange:function(n){var e=u("".concat(t,".deadband")),i=G.ax+e/2,a=u("".concat(t,".heating")),l=u("".concat(t,".cooling")),c=n+e/2,r=(0,g.clamp)(c,a+i,l-i),s=(0,G.hD)("all",{setpoint:r,deadband:e,heating:a,cooling:l});d("".concat(t),o)({setpoint:r,label:s})}}),(0,b.jsx)(h.Zz.Handle,{type:h.gZ.END,interactionKind:h.qB.LOCK,intentBefore:s.S.SUCCESS,intentAfter:s.S.PRIMARY,value:u("".concat(t,".setpoint"))+u("".concat(t,".deadband"))/2,onChange:function(n){var e=u("".concat(t,".deadband")),i=G.ax+e/2,a=u("".concat(t,".heating")),l=u("".concat(t,".cooling")),c=n-e/2,r=(0,g.clamp)(c,a+i,l-i),s=(0,G.hD)("all",{setpoint:r,deadband:e,heating:a,cooling:l});d("".concat(t),o)({setpoint:r,label:s})}})]})]})},x=function(){return(0,b.jsxs)(h.__,{children:[(0,b.jsx)("b",{children:"Unoccupied"}),(0,b.jsxs)(h.Zz,{min:G.QG,max:G.Of,stepSize:.5,labelStepSize:5,labelRenderer:function(n,e){return null!==e&&void 0!==e&&e.isHandleTooltip||n>G.op&&n<G.Ig?"".concat(n,"\xba\xa0F"):""},children:[(0,b.jsx)(h.Zz.Handle,{type:h.gZ.START,interactionKind:h.qB.LOCK,intentBefore:s.S.WARNING,value:u("".concat(t,".heating")),onChange:function(n){var e=u("".concat(t,".setpoint")),i=u("".concat(t,".deadband")),a=G.ax+i/2,l=(0,g.clamp)(n,G.op,e-a),c=u("".concat(t,".cooling")),r=(0,G.hD)("all",{setpoint:e,deadband:i,heating:l,cooling:c});d("".concat(t),o)({heating:l,label:r})}}),(0,b.jsx)(h.Zz.Handle,{type:h.gZ.END,interactionKind:h.qB.LOCK,intentAfter:s.S.PRIMARY,value:u("".concat(t,".cooling")),onChange:function(n){var e=u("".concat(t,".setpoint")),i=u("".concat(t,".deadband")),a=G.ax+i/2,l=u("".concat(t,".heating")),c=(0,g.clamp)(n,e+a,G.Ig),r=(0,G.hD)("all",{setpoint:e,deadband:i,heating:l,cooling:c});d("".concat(t),o)({cooling:c,label:r})}})]})]})};return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"row",children:[(0,b.jsx)("h3",{children:" "}),(0,b.jsx)("div",{className:"label",children:(0,b.jsxs)(h.__,{children:[(0,b.jsx)("b",{children:i}),(0,b.jsx)(h.BZ,{type:"text",value:u("".concat(t,".label")),onChange:function(n){d("".concat(t,".label"),o)(n.target.value)},readOnly:null===r||void 0===r?void 0:r.includes("title")})]})}),(0,b.jsx)("div",{className:"deadband",children:(0,b.jsxs)(h.__,{children:[(0,b.jsx)("b",{children:"Deadband"}),(0,b.jsx)(h.Af,{step:1,min:G.bM,max:G.iz,value:u("".concat(t,".deadband")),onValueChange:function(n){var e=u("".concat(t,".setpoint")),i=n,a=u("".concat(t,".heating")),l=u("".concat(t,".cooling")),c=(0,G.hD)("all",{setpoint:e,deadband:i,heating:a,cooling:l});d("".concat(t),o)({deadband:i,label:c})}})]})}),(0,b.jsx)("div",{className:"error",children:(0,b.jsx)("h4",{children:p})}),(0,b.jsx)("div",{})]}),function(){switch(e){case"both":return(0,b.jsxs)("div",{className:"row",children:[(0,b.jsx)("div",{className:"setpoint",children:f()}),(0,b.jsx)("div",{className:"break"}),(0,b.jsx)("div",{className:"setpoint",children:v()}),(0,b.jsx)("div",{className:"break"}),(0,b.jsx)("div",{className:"setpoint",children:x()}),(0,b.jsx)("div",{className:"break"}),(0,b.jsx)("div",{})]});case"single":return(0,b.jsxs)("div",{className:"row",children:[(0,b.jsx)("div",{className:"setpoint",children:f()}),(0,b.jsx)("div",{className:"break"}),(0,b.jsx)("div",{})]});default:return(0,b.jsxs)("div",{className:"row",children:[(0,b.jsx)("div",{className:"setpoint",children:v()}),(0,b.jsx)("div",{className:"break"}),(0,b.jsx)("div",{className:"setpoint",children:x()}),(0,b.jsx)("div",{className:"break"}),(0,b.jsx)("div",{})]})}}()]})}function q(n){var e=n.unit,i=n.editing,t=n.handleChange;return(0,b.jsx)(K,{type:"separate",title:"Setpoints",path:"configuration.setpoint",unit:e,editing:i,setpoint:(0,g.get)(i,"configuration.setpoint"),handleChange:t})}var F=i(95785),Q=i(53381),W=i(77848),V=i(24824),X=i(89521),J=i(37762);i(87757);Symbol("Removed");function nn(n,e){if(0!==n.length){if(1===n.length)return n[0];var i,t={},a=g.union.apply(void 0,(0,o.Z)(n.map((function(n){return function(n){return Object.keys(n)}(n)})))).filter((function(n){return!(null!==e&&void 0!==e&&e.includes(n.toString()))})),l=(0,J.Z)(a);try{var d=function(){var e=i.value,a=n.map((function(n){return n[e]}));(0,g.every)(a,(function(n){return(0,g.isEqual)(a[0],n)}))&&(t[e]=a[0])};for(l.s();!(i=l.n()).done;)d()}catch(c){l.e(c)}finally{l.f()}return t}}var en=function(n){(0,c.Z)(i,n);var e=(0,r.Z)(i);function i(n){var a,o;(0,l.Z)(this,i),(o=e.call(this,n)).configRouteIsHidden=void 0,o.getValue=function(n,e,i){var t=o.props.units,a=i||(null===t||void 0===t?void 0:t.find((function(n){return n.id===(null===e||void 0===e?void 0:e.id)})));return(0,g.get)(e,n,(0,g.get)(a,n))},o.handleChange=function(n,e){return function(i){if("configurationId"===n)o.props.updateUnit({id:null===e||void 0===e?void 0:e.id,configurationId:i});else!function(i){e&&((0,g.isObject)(o.getValue(n,e))?(0,g.set)(e,n,(0,g.merge)((0,g.cloneDeep)((0,g.get)(e,n)),i)):(0,g.set)(e,n,i),o.setState({editing:e}))}(i)}},o.handleCreate=function(n){var e=(0,W.ER)();e.unitId=n.id,o.props.createConfiguration(e),o.setState({editing:null,expanded:null})},o.handleEdit=function(n){var e=o.props.filtered,i=o.state.editing,t=i&&(null===e||void 0===e?void 0:e.find((function(n){return n.id===i.id})));t&&o.isSave(t)?o.setState({confirm:function(){return o.setState({editing:{id:n.id}})}}):o.setState({editing:{id:n.id}})},o.handleCancel=function(){var n=o.props.filtered,e=o.state.editing,i=e&&(null===n||void 0===n?void 0:n.find((function(n){return n.id===e.id})));i&&o.isSave(i)?o.setState({confirm:function(){return o.setState({editing:null,expanded:null})}}):o.setState({editing:null,expanded:null})},o.handleConfirm=function(){var n=o.state.confirm;o.setState({confirm:null},null!==n&&void 0!==n?n:void 0)},o.handleSave=function(){var n=o.state.editing;n&&(o.props.updateUnit(n),o.setState({editing:null,expanded:null}))},o.handleClearAll=function(){o.setState({editingAll:{configuration:{holidays:C.R$.values.map((function(){return{}}))}},expanded:null})},o.handleSaveAll=function(){var n=o.state.editingAll,e=o.props.filtered;n&&(null===e||void 0===e||e.forEach((function(e){var i,a,l,d,c=e.id,r={name:null===(i=n.location)||void 0===i?void 0:i.name,latitude:null===(a=n.location)||void 0===a?void 0:a.latitude,longitude:null===(l=n.location)||void 0===l?void 0:l.longitude},s={id:null===(d=e.configuration)||void 0===d?void 0:d.id,holidays:C.R$.values.map((function(i,t){var a,o,l,d,c,r,s=null===(a=n.configuration)||void 0===a||null===(o=a.holidays)||void 0===o||null===(l=o[t])||void 0===l?void 0:l.type;return s?{id:null===(d=e.configuration)||void 0===d||null===(c=d.holidays)||void 0===c||null===(r=c.find((function(n){return(null===n||void 0===n?void 0:n.label)===(null===i||void 0===i?void 0:i.label)})))||void 0===r?void 0:r.id,type:s}:void 0})).filter((function(n){return n}))};(r.name||s.holidays.length)&&o.props.updateUnit((0,t.Z)((0,t.Z)({id:c},r.name?{location:r}:{}),s.holidays.length?{configuration:s}:{}))})),o.handleClearAll())},o.handleDelete=function(n){var e=n.id;void 0!==e&&o.props.deleteConfiguration(e)},o.handlePush=function(n){var e=n.id;void 0!==e&&o.props.updateUnit({id:e,stage:C.$b.UpdateType.label})},o.isSave=function(n,e){var i,t;e=null!==(i=e)&&void 0!==i?i:o.state.editing;var a=(0,g.merge)({},n,e);return(null===(t=a.configuration)||void 0===t||!t.setpoint||(0,G.hQ)(a.configuration.setpoint))&&!(0,g.isEqualWith)(n,a,(function(n,e,i){return!!["createdAt","updatedAt","action"].includes(i)||void 0}))},o.isPush=function(n){switch(n.stage){case C.$b.UpdateType.label:case C.$b.DeleteType.label:case C.$b.ProcessType.label:return!1;case C.$b.CreateType.label:case C.$b.CompleteType.label:case C.$b.FailType.label:default:return!o.isSave(n)}};var d=null===(a=Object.values(n.routes.map).find((function(n){var e;return"configuration"===(null===(e=n.data)||void 0===e?void 0:e.name)})))||void 0===a?void 0:a.data;return o.configRouteIsHidden=!(null===d||void 0===d||!d.hidden),o.state={editing:null,editingAll:{configuration:{holidays:C.R$.values.map((function(){return{}}))}},expanded:null,confirm:null},o}return(0,d.Z)(i,[{key:"componentDidMount",value:function(){this.props.readUnits(),this.props.readUnitsPoll(V.Jd),this.configRouteIsHidden||(this.props.readConfigurations(),this.props.readConfigurationsPoll(V.Jd))}},{key:"componentWillUnmount",value:function(){this.props.readUnitsPoll(),this.props.readConfigurationsPoll()}},{key:"isAdmin",value:function(){var n,e,i=this.props.user;return(n=C.GD.Admin).granted.apply(n,(0,o.Z)(null!==(e=null===i||void 0===i?void 0:i.role.split(" "))&&void 0!==e?e:[""]))}},{key:"renderStatus",value:function(n){var e=this,i=x.WNC,t=s.S.WARNING;switch(n.stage){case C.$b.UpdateType.label:i=x.RGM,t=s.S.PRIMARY;break;case C.$b.ProcessType.label:i=x.RGM,t=s.S.SUCCESS;break;case C.$b.CreateType.label:i=x.WNC,t=s.S.WARNING;break;case C.$b.DeleteType.label:i=x.yY6,t=s.S.DANGER;break;case C.$b.CompleteType.label:i=x.ae_,t=s.S.SUCCESS;break;case C.$b.FailType.label:i=x.pnR,t=s.S.DANGER}return(0,b.jsx)(F.u,{content:"Push Unit Configuration",placement:u.Ly.TOP,disabled:!this.isPush(n),children:(0,b.jsx)(h.zx,{icon:i,intent:t,minimal:!0,onClick:function(){return e.handlePush(n)},disabled:!this.isPush(n)})})}},{key:"renderConfirm",value:function(){var n=this;return null===this.state.confirm?null:(0,b.jsx)(h.bZ,{intent:s.S.DANGER,isOpen:!0,confirmButtonText:"Yes",cancelButtonText:"Cancel",onConfirm:function(){return n.handleConfirm()},onClose:function(){return n.setState({confirm:null})},children:(0,b.jsx)("p",{children:"There are changes which have not been saved. Do you still want to continue?"})})}},{key:"renderPrompt",value:function(){var n=this.props.filtered,e=this.state.editing,i=e&&(null===n||void 0===n?void 0:n.find((function(n){return n.id===e.id}))),t=!(0,g.isNil)(i)&&this.isSave(i);return(0,b.jsx)(p.NL,{when:t,message:"There are changes which have not been saved. Do you still want to continue?"})}},{key:"render",value:function(){var n,e,i,a=this,o=this.props,l=o.filtered,d=o.configurations,c=this.state,r=c.editingAll,f=c.editing,v=c.expanded;(null!==(n=(0,g.cloneDeep)(l))&&void 0!==n?n:[]).forEach((function(n){n.configuration.holidays=C.R$.values.map((function(e){var i,t,a;return null!==(i=null===(t=n.configuration)||void 0===t||null===(a=t.holidays)||void 0===a?void 0:a.find((function(n){return(null===n||void 0===n?void 0:n.label)===e.label})))&&void 0!==i?i:{}}))}));var m={location:l?nn(l.map((function(n){var e;return null!==(e=n.location)&&void 0!==e?e:{}})),["createdAt","updatedAt","action","terms"]):{},configuration:{holidays:C.R$.values.map((function(n){return l?nn(l.map((function(e){var i,t,a;return null!==(i=null===(t=e.configuration)||void 0===t||null===(a=t.holidays)||void 0===a?void 0:a.find((function(e){return(null===e||void 0===e?void 0:e.label)===n.label})))&&void 0!==i?i:{}})),["createdAt","updatedAt","action","terms"]):{}}))}};return(0,b.jsxs)("div",{className:"units",children:[this.renderPrompt(),(0,b.jsx)(p.h4,(0,t.Z)({},this.props)),m&&(0,b.jsx)("div",{className:"list padding",children:(0,b.jsxs)(h.Zb,{interactive:!0,children:[(0,b.jsxs)("div",{className:"row",children:[(0,b.jsx)("div",{children:(0,b.jsx)(h.__,{children:(0,b.jsx)("h3",{children:"Update All Units"})})}),(0,b.jsx)("div",{children:this.isSave(m,r)?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(F.u,{content:"Save",placement:u.Ly.TOP,children:(0,b.jsx)(h.zx,{icon:x.$eC,intent:s.S.PRIMARY,minimal:!0,onClick:function(){return a.handleSaveAll()}})}),(0,b.jsx)(F.u,{content:"Exit",placement:u.Ly.TOP,children:(0,b.jsx)(h.zx,{icon:x.eV6,intent:s.S.PRIMARY,minimal:!0,onClick:function(){return a.handleClearAll()}})})]}):null})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(h.mp,{contents:[{id:"holidays-all",label:"Holidays",icon:x.$qo,hasCaret:!0,isExpanded:"holidays-all"===v}],onNodeExpand:function(n){return a.setState({expanded:n.id})},onNodeCollapse:function(){return a.setState({expanded:null})},onNodeClick:function(n){return a.setState({expanded:n.id===v?null:n.id})}}),(0,b.jsx)(h.UO,{isOpen:"holidays-all"===v,children:(0,b.jsxs)(h.__,{children:[(0,b.jsx)("h3",{children:"Predefined Holidays"}),(0,b.jsx)("ul",{children:null===m||void 0===m||null===(e=m.configuration)||void 0===e||null===(i=e.holidays)||void 0===i?void 0:i.map((function(n,e){var i;return(0,b.jsx)("li",{children:(0,b.jsx)(M,{path:"configuration.holidays.".concat(e),unit:m,editing:r,holiday:n,handleChange:a.handleChange,readOnly:!a.isAdmin()},null===n||void 0===n?void 0:n.label)},null!==(i=null===n||void 0===n?void 0:n.label)&&void 0!==i?i:e)}))})]})}),(0,b.jsx)(h.mp,{contents:[{id:"configuration-all",label:"Configuration",icon:x.$qo,hasCaret:!0,isExpanded:"configuration-all"===v}],onNodeExpand:function(n){return a.setState({expanded:n.id})},onNodeCollapse:function(){return a.setState({expanded:null})},onNodeClick:function(n){return a.setState({expanded:n.id===v?null:n.id})}}),(0,b.jsx)(h.UO,{isOpen:"configuration-all"===v,children:(0,b.jsx)(Q.f,{unit:m,editing:r,handleChange:this.handleChange,hidden:["label","peakLoadExclude","coolingPeakOffset","heatingPeakOffset","zoneLocation","zoneMass","zoneOrientation","zoneBuilding","coolingCapacity","compressors","optimalStartLockout","optimalStartDeviation","earliestStart","latestStart","heatPump","heatPumpBackup","heatPumpLockout","economizer","economizerSetpoint","coolingLockout"]})})]})]})}),(0,b.jsx)("h1",{children:"Units"}),(0,b.jsxs)("div",{className:"list",children:[null===l||void 0===l?void 0:l.map((function(n,e){var i,t;return n.id===(null===f||void 0===f?void 0:f.id)?(0,b.jsxs)(h.Zb,{interactive:!0,children:[(0,b.jsxs)("div",{className:"row",children:[(0,b.jsx)("div",{children:(0,b.jsx)(h.__,{children:(0,b.jsx)("h3",{children:n.label})})}),(0,b.jsxs)("div",{children:[a.renderStatus(n),(0,b.jsx)(F.u,{content:"Save",placement:u.Ly.TOP,disabled:!a.isSave(n),children:(0,b.jsx)(h.zx,{icon:x.$eC,intent:s.S.PRIMARY,minimal:!0,onClick:function(){return a.handleSave()},disabled:!a.isSave(n)})}),(0,b.jsx)(F.u,{content:"Exit",placement:u.Ly.TOP,children:(0,b.jsx)(h.zx,{icon:x.eV6,intent:s.S.PRIMARY,minimal:!0,onClick:function(){return a.handleCancel()}})})]})]}),(0,b.jsxs)("div",{className:"row",children:[(0,b.jsx)("div",{children:(0,b.jsxs)(h.__,{children:[(0,b.jsx)("b",{children:"Campus"}),(0,b.jsx)(h.BZ,{type:"text",value:n.campus,readOnly:!0})]})}),(0,b.jsx)("div",{children:(0,b.jsxs)(h.__,{children:[(0,b.jsx)("b",{children:"Building"}),(0,b.jsx)(h.BZ,{type:"text",value:n.building,readOnly:!0})]})}),(0,b.jsx)("div",{children:(0,b.jsxs)(h.__,{children:[(0,b.jsx)("b",{children:"System"}),(0,b.jsx)(h.BZ,{type:"text",value:n.system,readOnly:!0})]})}),(0,b.jsx)("div",{children:(0,b.jsxs)(h.__,{children:[(0,b.jsx)("b",{children:"Timezone"}),(0,b.jsx)(h.BZ,{type:"text",value:n.timezone,readOnly:!0})]})}),(0,b.jsx)("div",{})]}),(0,b.jsxs)(h.UO,{isOpen:!0,children:[!a.configRouteIsHidden&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(h.mp,{contents:[{id:"configuration",label:"Configuration",icon:x.$qo,hasCaret:!0,isExpanded:"configuration"===v}],onNodeExpand:function(n){return a.setState({expanded:n.id})},onNodeCollapse:function(){return a.setState({expanded:null})},onNodeClick:function(n){return a.setState({expanded:n.id===v?null:n.id})}}),(0,b.jsx)(h.UO,{isOpen:"configuration"===v,children:(0,b.jsx)(y,{unit:n,editing:f,configurations:d,handleChange:a.handleChange,handleCreate:a.handleCreate,readOnly:!a.isAdmin()})})]}),(0,b.jsx)(h.mp,{contents:[{id:"setpoints",label:"Setpoints",icon:x.IXo,hasCaret:!0,isExpanded:"setpoints"===v}],onNodeExpand:function(n){return a.setState({expanded:n.id})},onNodeCollapse:function(){return a.setState({expanded:null})},onNodeClick:function(n){return a.setState({expanded:n.id===v?null:n.id})}}),(0,b.jsx)(h.UO,{isOpen:"setpoints"===v,children:(0,b.jsx)(q,{unit:n,editing:f,handleChange:a.handleChange})}),(0,b.jsx)(h.mp,{contents:[{id:"schedules",label:"Occupancy Schedules",icon:x.nfX,hasCaret:!0,isExpanded:"schedules"===v}],onNodeExpand:function(n){return a.setState({expanded:n.id})},onNodeCollapse:function(){return a.setState({expanded:null})},onNodeClick:function(n){return a.setState({expanded:n.id===v?null:n.id})}}),(0,b.jsx)(h.UO,{isOpen:"schedules"===v,children:(0,b.jsx)(Y,{unit:n,editing:f,handleChange:a.handleChange,readOnly:!a.isAdmin()})}),(0,b.jsx)(h.mp,{contents:[{id:"holidays",label:"Holidays",icon:x.q4R,hasCaret:!0,isExpanded:"holidays"===v}],onNodeExpand:function(n){return a.setState({expanded:n.id})},onNodeCollapse:function(){return a.setState({expanded:null})},onNodeClick:function(n){return a.setState({expanded:n.id===v?null:n.id})}}),(0,b.jsx)(h.UO,{isOpen:"holidays"===v,children:(0,b.jsx)(z,{unit:n,editing:f,handleChange:a.handleChange,readOnly:!a.isAdmin()})}),(0,b.jsx)(h.mp,{contents:[{id:"occupancies",label:"Temporary Occupancy",icon:x.SdJ,hasCaret:!0,isExpanded:"occupancies"===v}],onNodeExpand:function(n){return a.setState({expanded:n.id})},onNodeCollapse:function(){return a.setState({expanded:null})},onNodeClick:function(n){return a.setState({expanded:n.id===v?null:n.id})}}),(0,b.jsx)(h.UO,{isOpen:"occupancies"===v,children:(0,b.jsx)(w,{unit:n,editing:f,handleChange:a.handleChange})}),(0,b.jsx)(h.mp,{contents:[{id:"rtu",label:"RTU Configuration",icon:x.lt1,hasCaret:!0,isExpanded:"rtu"===v}],onNodeExpand:function(n){return a.setState({expanded:n.id})},onNodeCollapse:function(){return a.setState({expanded:null})},onNodeClick:function(n){return a.setState({expanded:n.id===v?null:n.id})}}),(0,b.jsx)(h.UO,{isOpen:"rtu"===v,children:(0,b.jsx)(Q.f,{unit:n,editing:f,handleChange:a.handleChange,hidden:a.isAdmin()?["peakLoadExclude","coolingPeakOffset","heatingPeakOffset","zoneLocation","zoneMass","zoneOrientation","zoneBuilding","coolingCapacity","compressors","heatPumpBackup"]:["location","peakLoadExclude","coolingPeakOffset","heatingPeakOffset","zoneLocation","zoneMass","zoneOrientation","zoneBuilding","coolingCapacity","compressors","optimalStartLockout","optimalStartDeviation","earliestStart","latestStart","heatPump","heatPumpBackup","heatPumpLockout","economizer","economizerSetpoint","coolingLockout"]})})]})]},null!==(i=n.id)&&void 0!==i?i:e):(0,b.jsx)(h.Zb,{interactive:!0,children:(0,b.jsxs)("div",{className:"row",children:[(0,b.jsx)("div",{children:(0,b.jsx)(h.__,{children:(0,b.jsx)("h3",{children:n.label})})}),(0,b.jsxs)("div",{children:[a.renderStatus(n),(0,b.jsx)(F.u,{content:"Edit",placement:u.Ly.TOP,children:(0,b.jsx)(h.zx,{icon:x.dme,intent:s.S.PRIMARY,minimal:!0,onClick:function(){return a.handleEdit(n)}})})]})]})},null!==(t=n.id)&&void 0!==t?t:e)})),this.renderConfirm()]})]})}}]),i}(j.Component),tn={readUnits:v.Vh,readUnitsPoll:v.j5,filterUnits:v.Oe,updateUnit:v.t1,readConfigurations:f.uu,readConfigurationsPoll:f.z2,createConfiguration:f.Gx,updateConfiguration:f.a3,deleteConfiguration:f.Xc,updateSetpoint:X.d8},an=(0,k.$j)((function(n){return{units:(0,v.OB)(n),filtered:(0,v.ey)(n),configurations:(0,f.yp)(n)}}),tn)(en),on=function(n){return(0,b.jsx)(a.Z,(0,t.Z)((0,t.Z)({},n),{},{renderRoute:function(n){return(0,b.jsx)(an,(0,t.Z)({},n))}}))}},77848:function(n,e,i){i.d(e,{LK:function(){return r},ER:function(){return u},kI:function(){return s}});var t=i(49107),a=i(63769),o=i(696),l=i(72426),d=i.n(l),c=i(763),r=function(n){return d()().format("dddd, MMMM Do YYYY")},s=function(n){return 0===(0,c.sum)(Object.values((null===n||void 0===n?void 0:n._count)||{}))},u=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r(),e={label:"",setpoint:t.Qf,deadband:t.tz,heating:t.cF,cooling:t.tE};e.label=(0,t.hD)("all",e);var i={label:"",occupied:!0,startTime:(0,a.cz)(a.S$),endTime:(0,a.cz)(a.Be)};i.label=(0,a.sG)("all",i);var l={label:"",occupied:!1,startTime:(0,a.cz)(a.S$),endTime:(0,a.cz)(a.Be)};l.label=(0,a.sG)("all",l);var d=[o.R$.NewYearsDayType,o.R$.MartinLutherKingJrType,o.R$.PresidentsDayType,o.R$.MemorialDayType,o.R$.JuneteenthType,o.R$.IndependenceDayType,o.R$.LaborDayType,o.R$.ColumbusDayType,o.R$.VeteransDayType,o.R$.ThanksgivingType,o.R$.BlackFridayType,o.R$.ChristmasType].map((function(n){return n.name})),c=o.R$.values.map((function(n){return{label:n.label,type:d.includes(n.name)?"Enabled":"Disabled"}}));return{label:n,setpoint:e,mondaySchedule:i,tuesdaySchedule:i,wednesdaySchedule:i,thursdaySchedule:i,fridaySchedule:i,saturdaySchedule:l,sundaySchedule:l,holidaySchedule:l,holidays:c}}},63769:function(n,e,i){i.d(e,{Ls:function(){return l},lL:function(){return d},S$:function(){return c},QM:function(){return r},Be:function(){return s},cz:function(){return p},li:function(){return f},xM:function(){return v},sG:function(){return x}});var t=i(763),a=i(72426),o=i.n(a),l=120,d=0,c=480,r=1440,s=1080,u="HH:mm",h="h:mm\xa0a",p=function(n){return o()("00:00",[u]).add(Math.trunc(n/60),"hours").add(n%60,"minutes").format(u)},f=function(n){return o()("00:00",[u]).add(Math.trunc(n/60),"hours").add(n%60,"minutes").format(h)},v=function(n,e){return 60*function(n,e,i){return i&&0===n?e:n}(o()(n,[u,h]).hours(),24,e)+o()(n,[u,h]).minutes()},x=function(n,e){var i=void 0===(null===e||void 0===e?void 0:e.occupied)||e.occupied,a=(0,t.isNumber)(e.startTime)?e.startTime:v(e.startTime,!1),o=(0,t.isNumber)(e.endTime)?e.endTime:v(e.endTime,!0);switch(n){case"startTime":return"".concat(f(a));case"endTime":return"".concat(f(o));default:return i?0===a&&1440===o?"Occupied All Day":"Occupied From Start Time: ".concat(f(a)," To End Time: ").concat(f(o)):"Unoccupied All Day"}}},49107:function(n,e,i){i.d(e,{ax:function(){return p},bM:function(){return f},iz:function(){return v},tz:function(){return x},op:function(){return g},cF:function(){return m},Ig:function(){return j},tE:function(){return b},QG:function(){return y},Of:function(){return S},Qf:function(){return C},hD:function(){return N},qr:function(){return O},hQ:function(){return T}});var t,a,o,l,d,c,r,s,u=i(763),h=i(696),p=parseInt("2"),f=(null===(t=h.g9.DeadbandType.options)||void 0===t?void 0:t.min)||2,v=(null===(a=h.g9.DeadbandType.options)||void 0===a?void 0:a.max)||6,x=(null===(o=h.g9.DeadbandType.options)||void 0===o?void 0:o.default)||4,g=(null===(l=h.g9.HeatingType.options)||void 0===l?void 0:l.min)||55,m=(null===(d=h.g9.HeatingType.options)||void 0===d?void 0:d.default)||60,j=(null===(c=h.g9.CoolingType.options)||void 0===c?void 0:c.max)||85,b=(null===(r=h.g9.CoolingType.options)||void 0===r?void 0:r.default)||80,y=g,S=j,C=(null===(s=h.g9.SetpointType.options)||void 0===s?void 0:s.default)||70,N=function n(e,i){return"all"===e?"Occupied Setpoint: ".concat(n("setpoint",i)," Deadband: ").concat(n("deadband",i)," Unoccupied Heating: ").concat(n("heating",i)," Cooling: ").concat(n("cooling",i)):"".concat(i[e],"\xba\xa0F")},O=function(n){return n.deadband<f||n.deadband>v?"Deadband must be in the range [".concat(f,",").concat(v,"]."):n.setpoint<n.heating+p+n.deadband/2||n.setpoint>n.cooling-p-n.deadband/2?"Occupied setpoint must be in the range [".concat(n.heating+p+n.deadband/2,",").concat(n.cooling-p-n.deadband/2,"]"):n.heating<g||n.cooling>j?"Unoccupied heating and cooling must be in the range [".concat(g,",").concat(j,"]"):n.setpoint%.5!==0?"Occupied setpoint must be a whole or half degree.":n.deadband%1!==0?"Deadband must be a whole degree.":n.heating%.5!==0||n.cooling%.5!==0?"Unoccupied heating or cooling must be a whole or half degree.":void 0},T=function(n){return!!(n&&(0,u.isNumber)(n.setpoint)&&(0,u.isNumber)(n.deadband)&&(0,u.isNumber)(n.heating)&&(0,u.isNumber)(n.cooling))&&void 0===O(n)}}}]);
//# sourceMappingURL=957.26e45abb.chunk.js.map