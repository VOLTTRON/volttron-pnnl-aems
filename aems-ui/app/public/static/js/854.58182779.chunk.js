"use strict";(self.webpackChunkaems_client=self.webpackChunkaems_client||[]).push([[854],{89854:function(e,n,t){t.r(n),t.d(n,{default:function(){return z}});var i=t(1413),a=t(9153),o=t(15671),d=t(43144),l=t(60136),c=t(43668),s=t(51976),g=t(37305),r=t(50698),u=t(11436),h=t(89521),p=t(763),b=t(36625),v=t(23122),f=t(72791),m=t(60364),x=t(80184),S=function(e){(0,l.Z)(t,e);var n=(0,c.Z)(t);function t(e){var i;return(0,o.Z)(this,t),(i=n.call(this,e)).handleChange=function(e,n){return function(t){var a=i.state.editing;switch(e){case"label":return i.setState(void 0===n?{label:t}:{editing:(0,p.merge)(a,{label:t})});case"setpoint":return i.setState(void 0===n?{label:(0,u.hD)("all",{setpoint:(t[0]+t[1])/2,deadband:(0,p.get)(a,"deadband",(0,p.get)(n,"deadband")),heating:(0,p.get)(a,"heating",(0,p.get)(n,"heating")),cooling:(0,p.get)(a,"cooling",(0,p.get)(n,"cooling"))}),setpoint:(t[0]+t[1])/2}:{editing:(0,p.merge)(a,{label:(0,u.hD)("all",{setpoint:(t[0]+t[1])/2,deadband:(0,p.get)(a,"deadband",(0,p.get)(n,"deadband")),heating:(0,p.get)(a,"heating",(0,p.get)(n,"heating")),cooling:(0,p.get)(a,"cooling",(0,p.get)(n,"cooling"))}),setpoint:(t[0]+t[1])/2})});case"deadband":return i.setState(void 0===n?{label:(0,u.hD)("all",{setpoint:(0,p.get)(a,"setpoint",(0,p.get)(n,"setpoint")),deadband:t,heating:(0,p.get)(a,"heating",(0,p.get)(n,"heating")),cooling:(0,p.get)(a,"cooling",(0,p.get)(n,"cooling"))}),deadband:t}:{editing:(0,p.merge)(a,{label:(0,u.hD)("all",{setpoint:(0,p.get)(a,"setpoint",(0,p.get)(n,"setpoint")),deadband:t,heating:(0,p.get)(a,"heating",(0,p.get)(n,"heating")),cooling:(0,p.get)(a,"cooling",(0,p.get)(n,"cooling"))}),deadband:t})});case"value":return i.setState(void 0===n?{label:(0,u.hD)("all",{setpoint:(0,p.get)(a,"setpoint",(0,p.get)(n,"setpoint")),deadband:(0,p.get)(a,"deadband",(0,p.get)(n,"deadband")),heating:t[0],cooling:t[1]}),heating:t[0],cooling:t[1]}:{editing:(0,p.merge)(a,{label:(0,u.hD)("all",{setpoint:(0,p.get)(a,"setpoint",(0,p.get)(n,"setpoint")),deadband:(0,p.get)(a,"deadband",(0,p.get)(n,"deadband")),heating:t[0],cooling:t[1]}),heating:t[0],cooling:t[1]})})}}},i.handleCreate=function(){var e=i.state,n=e.label,t=e.heating,a=e.cooling;i.props.createSetpoint({label:n,heating:t,cooling:a}),i.setState({label:(0,u.hD)("all",{setpoint:u.Qf,deadband:u.tz,heating:u.cF,cooling:u.tE}),setpoint:u.Qf,deadband:u.tz,heating:u.cF,cooling:u.tE,editing:null})},i.handleEdit=function(e){var n=e.id,t=e.label,a=e.heating,o=e.cooling;i.setState({editing:{id:n,label:t,heating:a,cooling:o}})},i.handleCancel=function(){i.setState({editing:null})},i.handleSave=function(){var e,n=(null===(e=i.state)||void 0===e?void 0:e.editing)||{},t=n.id,a=n.label,o=n.heating,d=n.cooling;i.props.updateSetpoint({id:t,label:a,heating:o,cooling:d}),i.setState({editing:null})},i.handleDelete=function(e){var n=e.id;void 0!==n&&i.props.deleteSetpoint(n)},i.state={label:(0,u.hD)("all",{setpoint:u.Qf,deadband:u.tz,heating:u.cF,cooling:u.tE}),setpoint:u.Qf,deadband:u.tz,heating:u.cF,cooling:u.tE,editing:null},i}return(0,d.Z)(t,[{key:"componentDidMount",value:function(){this.props.readSetpoints()}},{key:"render",value:function(){var e=this,n=this.props.filtered,t=this.state,a=t.label,o=t.setpoint,d=t.deadband,l=t.heating,c=t.cooling,h=t.editing;return(0,x.jsxs)("div",{className:"setpoint",children:[(0,x.jsx)(b.h4,(0,i.Z)({},this.props)),(0,x.jsx)("h2",{children:"Create Setpoint"}),(0,x.jsx)("div",{className:"create",children:(0,x.jsxs)(s.Zb,{interactive:!0,children:[(0,x.jsx)("div",{children:(0,x.jsx)("input",{className:g.O4S,type:"text",value:a,onChange:function(n){return e.handleChange("label")(n.target.value)}})}),(0,x.jsx)("div",{children:(0,x.jsx)("input",{className:g.O4S,type:"number",min:u.bM,max:u.iz,value:d,onChange:function(n){return e.handleChange("deadband")(n.target.value)}})}),(0,x.jsx)("div",{children:(0,x.jsx)(s.U2,{min:u.QG,max:u.Of,stepSize:.5,labelStepSize:5,value:[o-d/2,o+d/2],onChange:this.handleChange("setpoint")})}),(0,x.jsx)("div",{children:(0,x.jsx)(s.U2,{min:u.op,max:u.Ig,stepSize:1,labelStepSize:5,value:[l,c],onChange:this.handleChange("value")})}),(0,x.jsx)("div",{children:(0,x.jsx)(s.zx,{icon:v.RPl,intent:r.S.PRIMARY,minimal:!0,onClick:this.handleCreate})})]})}),(0,x.jsx)("h1",{children:"Setpoints"}),(0,x.jsx)("div",{className:"list",children:null===n||void 0===n?void 0:n.map((function(n,t){return n.id===(null===h||void 0===h?void 0:h.id)?(0,x.jsxs)(s.Zb,{interactive:!0,children:[(0,x.jsx)("div",{children:(0,x.jsx)("input",{className:g.O4S,type:"text",value:h.label,onChange:function(t){return e.handleChange("label",n)(t.target.value)}})}),(0,x.jsx)("div",{children:(0,x.jsx)("input",{className:g.O4S,type:"number",value:h.deadband,onChange:function(t){return e.handleChange("deadband",n)(t.target.value)}})}),(0,x.jsx)("div",{children:(0,x.jsx)(s.U2,{min:u.QG,max:u.Of,stepSize:.5,labelStepSize:5,value:[h.setpoint-d/2,h.setpoint+d/2],onChange:e.handleChange("setpoint",n)})}),(0,x.jsx)("div",{children:(0,x.jsx)(s.U2,{min:u.op,max:u.Ig,stepSize:1,labelStepSize:5,value:[h.heating,h.cooling],onChange:e.handleChange("value",n)})}),(0,x.jsxs)("div",{children:[(0,x.jsx)(s.zx,{icon:v.$eC,intent:r.S.PRIMARY,minimal:!0,onClick:function(){return e.handleSave()}}),(0,x.jsx)(s.zx,{icon:v.eV6,intent:r.S.PRIMARY,minimal:!0,onClick:function(){return e.handleCancel()}})]})]},n.id||t):(0,x.jsxs)(s.Zb,{interactive:!0,children:[(0,x.jsx)("div",{children:n.label}),(0,x.jsx)("div",{children:(0,x.jsx)("input",{className:g.O4S,type:"number",value:n.deadband})}),(0,x.jsx)("div",{children:(0,x.jsx)(s.U2,{min:u.op,max:u.Ig,stepSize:.5,labelStepSize:5,value:[n.setpoint-n.deadband/2,n.setpoint+n.deadband/2]})}),(0,x.jsx)("div",{children:(0,x.jsx)(s.U2,{min:u.op,max:u.Ig,stepSize:1,labelStepSize:5,value:[n.heating,n.cooling]})}),(0,x.jsxs)("div",{children:[(0,x.jsx)(s.zx,{icon:v.dme,intent:r.S.PRIMARY,minimal:!0,onClick:function(){return e.handleEdit(n)}}),(0,x.jsx)(s.zx,{icon:v.R4W,intent:r.S.WARNING,minimal:!0,onClick:function(){return e.handleDelete(n)},disabled:!(0,u.L5)(n)})]})]},n.id||t)}))})]})}}]),t}(f.Component),j={readSetpoints:h.fx,filterSetpoints:h.k4,createSetpoint:h.jC,updateSetpoint:h.d8,deleteSetpoint:h._J},C=(0,m.$j)((function(e){return{setpoints:(0,h.U5)(e),filtered:(0,h.sq)(e)}}),j)(S),z=function(e){return(0,x.jsx)(a.Z,(0,i.Z)((0,i.Z)({},e),{},{renderRoute:function(e){return(0,x.jsx)(C,(0,i.Z)({},e))}}))}},11436:function(e,n,t){t.d(n,{ax:function(){return h},bM:function(){return p},iz:function(){return b},tz:function(){return v},op:function(){return f},cF:function(){return m},Ig:function(){return x},tE:function(){return S},QG:function(){return j},Of:function(){return C},Qf:function(){return z},hD:function(){return D},qr:function(){return y},hQ:function(){return N},L5:function(){return k}});var i,a,o,d,l,c,s,g,r=t(763),u=t(696),h=parseInt("2"),p=(null===(i=u.g9.DeadbandType.options)||void 0===i?void 0:i.min)||2,b=(null===(a=u.g9.DeadbandType.options)||void 0===a?void 0:a.max)||6,v=(null===(o=u.g9.DeadbandType.options)||void 0===o?void 0:o.default)||4,f=(null===(d=u.g9.HeatingType.options)||void 0===d?void 0:d.min)||55,m=(null===(l=u.g9.HeatingType.options)||void 0===l?void 0:l.default)||60,x=(null===(c=u.g9.CoolingType.options)||void 0===c?void 0:c.max)||85,S=(null===(s=u.g9.CoolingType.options)||void 0===s?void 0:s.default)||80,j=f,C=x,z=(null===(g=u.g9.SetpointType.options)||void 0===g?void 0:g.default)||70,D=function e(n,t){return"all"===n?"Occupied Setpoint: ".concat(e("setpoint",t)," Deadband: ").concat(e("deadband",t)," Unoccupied Heating: ").concat(e("heating",t)," Cooling: ").concat(e("cooling",t)):"".concat(t[n],"\xba\xa0F")},y=function(e){return e.deadband<p||e.deadband>b?"Deadband must be in the range [".concat(p,",").concat(b,"]."):e.setpoint<e.heating+h+e.deadband/2||e.setpoint>e.cooling-h-e.deadband/2?"Occupied setpoint must be in the range [".concat(e.heating+h+e.deadband/2,",").concat(e.cooling-h-e.deadband/2,"]"):e.heating<f||e.cooling>x?"Unoccupied heating and cooling must be in the range [".concat(f,",").concat(x,"]"):e.setpoint%.5!==0?"Occupied setpoint must be a whole or half degree.":e.deadband%1!==0?"Deadband must be a whole degree.":e.heating%.5!==0||e.cooling%.5!==0?"Unoccupied heating or cooling must be a whole or half degree.":void 0},N=function(e){return!!(e&&(0,r.isNumber)(e.setpoint)&&(0,r.isNumber)(e.deadband)&&(0,r.isNumber)(e.heating)&&(0,r.isNumber)(e.cooling))&&void 0===y(e)},k=function(e){return 0===(0,r.sum)(Object.values((null===e||void 0===e?void 0:e._count)||{}))}}}]);
//# sourceMappingURL=854.58182779.chunk.js.map