"use strict";(self.webpackChunkaems_client=self.webpackChunkaems_client||[]).push([[212],{53381:function(e,n,i){i.d(n,{f:function(){return le}});var t,a,o,d,l,c,s,r,u,h,p,v,x,m,f,g,j,b,S,y,C,N,T,O,k=i(1413),Z=i(4942),z=i(29439),M=i(51976),D=i(696),E=(i(72426),i(763)),R=null===(t=D.g9.CoolingCapacityType.options)||void 0===t?void 0:t.min,L=null===(a=D.g9.CoolingCapacityType.options)||void 0===a?void 0:a.max,_=null===(o=D.g9.CompressorsType.options)||void 0===o?void 0:o.min,w=null===(d=D.g9.CompressorsType.options)||void 0===d?void 0:d.max,B=null===(l=D.g9.CoolingLockoutType.options)||void 0===l?void 0:l.min,P=null===(c=D.g9.CoolingLockoutType.options)||void 0===c?void 0:c.max,A=null===(s=D.g9.OptimalStartLockoutType.options)||void 0===s?void 0:s.min,H=null===(r=D.g9.OptimalStartLockoutType.options)||void 0===r?void 0:r.max,U=null===(u=D.g9.OptimalStartDeviationType.options)||void 0===u?void 0:u.min,I=null===(h=D.g9.OptimalStartDeviationType.options)||void 0===h?void 0:h.max,Y=null===(p=D.g9.EarliestStartType.options)||void 0===p?void 0:p.min,$=null===(v=D.g9.EarliestStartType.options)||void 0===v?void 0:v.max,G=null===(x=D.g9.LatestStartType.options)||void 0===x?void 0:x.min,K=null===(m=D.g9.LatestStartType.options)||void 0===m?void 0:m.max,F=null===(f=D.g9.HeatPumpBackupType.options)||void 0===f?void 0:f.min,q=null===(g=D.g9.HeatPumpBackupType.options)||void 0===g?void 0:g.max,Q=null===(j=D.g9.HeatPumpLockoutType.options)||void 0===j?void 0:j.min,V=null===(b=D.g9.HeatPumpLockoutType.options)||void 0===b?void 0:b.max,W=null===(S=D.g9.CoolingPeakOffsetType.options)||void 0===S?void 0:S.min,X=null===(y=D.g9.CoolingPeakOffsetType.options)||void 0===y?void 0:y.max,J=null===(C=D.g9.HeatingPeakOffsetType.options)||void 0===C?void 0:C.min,ee=null===(N=D.g9.HeatingPeakOffsetType.options)||void 0===N?void 0:N.max,ne=null===(T=D.g9.EconomizerSetpoint.options)||void 0===T?void 0:T.min,ie=null===(O=D.g9.EconomizerSetpoint.options)||void 0===O?void 0:O.max,te=i(72791),ae=i(23122),oe=i(99574),de=i(80184);function le(e){var n=e.hidden,i=e.unit,t=e.editing,a=e.handleChange,o=(0,te.useState)({}),d=(0,z.Z)(o,2),l=d[0],c=d[1],s=(0,te.useCallback)((function(e){return(0,E.get)(t,e,(0,E.get)(i,e))}),[t,i]),r=function(e,n,i,o,d,r,u){var h=l[d];return void 0===h&&(h=s(d)),(0,de.jsxs)(M.__,{children:[(0,de.jsx)("b",{children:n}),(0,de.jsx)(M.Af,(0,k.Z)((0,k.Z)((0,k.Z)({},e),{},{step:u?.5:1},u&&{minorStepSize:1e-4}),{},{min:i,max:o,value:h,onValueChange:function(e,n){u&&c((0,E.merge)({},l,(0,Z.Z)({},d,n))),a(d,t)(e)},rightElement:r,clampValueOnBlur:!0}))]})},u=function(e,n,i,o,d,l){return(0,de.jsxs)(M.__,{children:[(0,de.jsx)("b",{children:n}),(0,de.jsx)(M.Zz,(0,k.Z)((0,k.Z)({},e),{},{min:i,max:o,stepSize:.5,labelStepSize:d,labelRenderer:function(e,n){return null!==n&&void 0!==n&&n.isHandleTooltip||e>i&&e<o?"".concat(e,"\xba\xa0F"):""},children:(0,de.jsx)(M.Zz.Handle,{type:M.gZ.FULL,interactionKind:M.qB.LOCK,value:s(l),onChange:function(e){a(l,t)(e)}})}))]})},h=function(e,n,i,o,d,l){return(0,de.jsxs)(M.__,{children:[(0,de.jsx)("b",{children:n}),(0,de.jsx)(M.Zz,(0,k.Z)((0,k.Z)({},e),{},{min:i,max:o,stepSize:5,labelStepSize:d,labelRenderer:function(e,n){return null!==n&&void 0!==n&&n.isHandleTooltip||e>i&&e<o?"".concat(e,"\xa0min"):""},children:(0,de.jsx)(M.Zz.Handle,{type:M.gZ.FULL,interactionKind:M.qB.LOCK,value:s(l),onChange:function(e){a(l,t)(e)}})}))]})},p=function(e,n,i,o,d){return(0,de.jsxs)(M.__,{children:[(0,de.jsx)("b",{children:n}),(0,de.jsx)(oe.p,{content:(0,de.jsx)(M.v2,{children:null===i||void 0===i?void 0:i.map((function(e){return(0,de.jsx)(M.sN,{text:e.label,onClick:function(){return a(o,t)(e.name)}},e.label)}))}),placement:"bottom-start",children:(0,de.jsx)(M.zx,(0,k.Z)((0,k.Z)({},e),{},{rightIcon:ae.vv6,minimal:!0,children:d?d(s(o)):s(o)}))})]})};return(0,de.jsxs)(de.Fragment,{children:[(0,de.jsxs)("div",{className:"row",hidden:null===n||void 0===n?void 0:n.includes("label"),children:[(0,de.jsx)("h3",{children:" "}),(0,de.jsx)("div",{className:"unit",children:(0,de.jsxs)(M.__,{children:[(0,de.jsx)("b",{children:"Unit Label"}),(0,de.jsx)(M.BZ,{type:"text",value:s("label"),onChange:function(e){a("label",t)(e.target.value)}})]})}),(0,de.jsx)("div",{}),(0,de.jsx)("div",{})]}),(0,de.jsxs)("div",{className:"row",hidden:null===n||void 0===n?void 0:n.includes("peakLoadExclude"),children:[(0,de.jsx)("div",{className:"select",children:p({},"Participate in Grid Services",[{name:!1,label:"Yes"},{name:!0,label:"No"}],"peakLoadExclude",(function(e){return e?"No":"Yes"}))}),(0,de.jsx)("div",{}),(0,de.jsx)("div",{})]}),(0,de.jsxs)("div",{className:"row",hidden:null===n||void 0===n?void 0:n.includes("coolingPeakOffset"),children:[(0,de.jsx)("div",{className:"unit",children:u(s("peakLoadExclude")?{disabled:!0}:{},"Cooling Offset During Grid Services",W,X,1,"coolingPeakOffset")}),(0,de.jsx)("div",{}),(0,de.jsx)("div",{})]}),(0,de.jsxs)("div",{className:"row",hidden:null===n||void 0===n?void 0:n.includes("heatingPeakOffset"),children:[(0,de.jsx)("div",{className:"unit",children:u(s("peakLoadExclude")?{disabled:!0}:{},"Heating Offset During Grid Services",J,ee,1,"heatingPeakOffset")}),(0,de.jsx)("div",{}),(0,de.jsx)("div",{})]}),(0,de.jsxs)("div",{className:"row",hidden:null===n||void 0===n?void 0:n.includes("zoneLocation"),children:[(0,de.jsx)("div",{className:"select",children:p({},"Zone Location",D.Ak.values.filter((function(e){return"location"===e.type})),"zoneLocation",(function(e){var n;return(null===(n=D.Ak.parse(e))||void 0===n?void 0:n.label)||e}))}),(0,de.jsx)("div",{}),(0,de.jsx)("div",{})]}),(0,de.jsxs)("div",{className:"row",hidden:null===n||void 0===n?void 0:n.includes("zoneMass"),children:[(0,de.jsx)("div",{className:"select",children:p({},"Zone Mass",D.Ak.values.filter((function(e){return"mass"===e.type})),"zoneMass",(function(e){var n;return(null===(n=D.Ak.parse(e))||void 0===n?void 0:n.label)||e}))}),(0,de.jsx)("div",{}),(0,de.jsx)("div",{})]}),(0,de.jsxs)("div",{className:"row",hidden:null===n||void 0===n?void 0:n.includes("zoneOrientation"),children:[(0,de.jsx)("div",{className:"select",children:p({},"Zone Orientation",D.Ak.values.filter((function(e){return"orientation"===e.type})),"zoneOrientation",(function(e){var n;return(null===(n=D.Ak.parse(e))||void 0===n?void 0:n.label)||e}))}),(0,de.jsx)("div",{}),(0,de.jsx)("div",{})]}),(0,de.jsxs)("div",{className:"row",hidden:null===n||void 0===n?void 0:n.includes("zoneBuilding"),children:[(0,de.jsx)("div",{className:"select",children:p({},"Zone Type",D.Ak.values.filter((function(e){return"building"===e.type})),"zoneBuilding",(function(e){var n;return(null===(n=D.Ak.parse(e))||void 0===n?void 0:n.label)||e}))}),(0,de.jsx)("div",{}),(0,de.jsx)("div",{})]}),(0,de.jsxs)("div",{className:"row",hidden:null===n||void 0===n?void 0:n.includes("coolingCapacity"),children:[(0,de.jsx)("div",{className:"unit",children:r({},"Rated Cooling Capacity",R,L,"coolingCapacity",(0,de.jsx)(M.Vp,{minimal:!0,children:"tons"}),!0)}),(0,de.jsx)("div",{}),(0,de.jsx)("div",{})]}),(0,de.jsxs)("div",{className:"row",hidden:null===n||void 0===n?void 0:n.includes("compressors"),children:[(0,de.jsx)("div",{className:"unit",children:r({},"Number of Compressors",_,w,"compressors")}),(0,de.jsx)("div",{}),(0,de.jsx)("div",{})]}),(0,de.jsxs)("div",{className:"row",hidden:null===n||void 0===n?void 0:n.includes("optimalStartLockout"),children:[(0,de.jsx)("div",{className:"unit",children:u({},"Disable Optimal Start when Outdoor Temperatures are below",A,H,2,"optimalStartLockout")}),(0,de.jsx)("div",{}),(0,de.jsx)("div",{})]}),(0,de.jsxs)("div",{className:"row",hidden:null===n||void 0===n?void 0:n.includes("optimalStartDeviation"),children:[(0,de.jsx)("div",{className:"unit",children:u({},"Optimal Start Allowable Zone Temperature Deviation",U,I,.5,"optimalStartDeviation")}),(0,de.jsx)("div",{}),(0,de.jsx)("div",{})]}),(0,de.jsxs)("div",{className:"row",hidden:null===n||void 0===n?void 0:n.includes("earliestStart"),children:[(0,de.jsx)("div",{className:"unit",children:h({},"Earliest Start Time Before Occupancy",Y,$,30,"earliestStart")}),(0,de.jsx)("div",{}),(0,de.jsx)("div",{})]}),(0,de.jsxs)("div",{className:"row",hidden:null===n||void 0===n?void 0:n.includes("latestStart"),children:[(0,de.jsx)("div",{className:"unit",children:h({},"Latest Start Time Before Occupancy",G,K,15,"latestStart")}),(0,de.jsx)("div",{}),(0,de.jsx)("div",{})]}),(0,de.jsxs)("div",{className:"row",hidden:null===n||void 0===n?void 0:n.includes("heatPump"),children:[(0,de.jsx)("div",{className:"select",children:p({},"Heat Pump",[{name:!0,label:"Yes"},{name:!1,label:"No"}],"heatPump",(function(e){return e?"Yes":"No"}))}),(0,de.jsx)("div",{}),(0,de.jsx)("div",{})]}),(0,de.jsxs)("div",{className:"row",hidden:null===n||void 0===n?void 0:n.includes("heatPumpBackup"),children:[(0,de.jsx)("div",{className:"unit",children:r(s("heatPump")?{}:{disabled:!0},"Heat Pump Electric Backup Capacity",F,q,"heatPumpBackup",(0,de.jsx)(M.Vp,{minimal:!0,children:"kW"}),!0)}),(0,de.jsx)("div",{}),(0,de.jsx)("div",{})]}),(0,de.jsxs)("div",{className:"row",hidden:null===n||void 0===n?void 0:n.includes("heatPumpLockout"),children:[(0,de.jsx)("div",{className:"unit",children:u(s("heatPump")?{}:{disabled:!0},"Heat Pump Auxiliary Heat Lockout",Q,V,5,"heatPumpLockout")}),(0,de.jsx)("div",{}),(0,de.jsx)("div",{})]}),(0,de.jsxs)("div",{className:"row",hidden:null===n||void 0===n?void 0:n.includes("economizer"),children:[(0,de.jsx)("div",{className:"select",children:p({},"Economizer",[{name:!0,label:"Yes"},{name:!1,label:"No"}],"economizer",(function(e){return e?"Yes":"No"}))}),(0,de.jsx)("div",{}),(0,de.jsx)("div",{})]}),(0,de.jsxs)("div",{className:"row",hidden:null===n||void 0===n?void 0:n.includes("economizerSetpoint"),children:[(0,de.jsx)("div",{className:"unit",children:u(s("economizer")?{}:{disabled:!0},"Economizer Switchover Temperature Setpoint",ne,ie,5,"economizerSetpoint")}),(0,de.jsx)("div",{}),(0,de.jsx)("div",{})]}),(0,de.jsxs)("div",{className:"row",hidden:null===n||void 0===n?void 0:n.includes("coolingLockout"),children:[(0,de.jsx)("div",{className:"unit",children:u(s("economizer")?{}:{disabled:!0},"Compressor Cooling Lockout Temperature",B,P,5,"coolingLockout")}),(0,de.jsx)("div",{}),(0,de.jsx)("div",{})]})]})}},65212:function(e,n,i){i.r(n),i.d(n,{default:function(){return ee}});var t=i(1413),a=i(9153),o=i(15671),d=i(43144),l=i(60136),c=i(43668),s=i(50698),r=i(32183),u=i(51976),h=i(36625),p=i(4481),v=i(97626),x=i(23122),m=i(763),f=i(99574),g=i(72791),j=i(80184);function b(e){var n,i=e.unit,t=e.editing,a=e.configurations,o=e.handleChange,d=e.handleCreate,l=(0,g.useCallback)((function(e){return(0,m.get)(t,e,(0,m.get)(i,e))}),[t,i]);return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsxs)("div",{className:"row",children:[(0,j.jsx)("div",{className:"configuration select",children:(0,j.jsxs)(u.__,{children:[(0,j.jsx)("h3",{children:"Select Configuration"}),(0,j.jsx)(f.p,{content:(0,j.jsxs)(u.v2,{children:[(0,j.jsx)(u.sN,{text:"New Configuration",onClick:function(){return d(i)}}),null===a||void 0===a?void 0:a.map((function(e){return(0,j.jsx)(u.sN,{text:e.label,onClick:function(){return o("configurationId",i)(e.id)}},e.id)}))]}),placement:"bottom-start",children:(0,j.jsx)(u.zx,{rightIcon:x.vv6,minimal:!0,children:(null===i||void 0===i||null===(n=i.configuration)||void 0===n?void 0:n.label)||"Select Configuration..."})})]})}),(0,j.jsx)("div",{})]}),(0,j.jsxs)("div",{className:"row",children:[(0,j.jsx)("div",{className:"label",children:(0,j.jsxs)(u.__,{children:[(0,j.jsx)("b",{children:"Configuration Label"}),(0,j.jsx)(u.BZ,{type:"text",value:l("configuration.label"),onChange:function(e){return o("configuration.label",t)(e.target.value)}})]})}),(0,j.jsx)("div",{})]})]})}var S=i(29439),y=i(696),C=i(78719),N=i(42632),T=i(72426),O=i.n(T);function k(e){var n,i=e.path,t=e.unit,a=e.editing,o=e.holiday,d=e.handleChange,l=o.id,c=o.label,r=o.type,h=o.month,p=o.day,v=o.observance,f=(0,g.useCallback)((function(e){return(0,m.get)(a,e,(0,m.get)(t,e))}),[a,t]);if("Custom"===r){var b=v&&(null===(n=y.VD.parse(v))||void 0===n?void 0:n.label),S="".concat(O()().set("month",h-1).set("date",p).format("MMMM Do")," ").concat(b&&"(".concat(b,")"));return(0,j.jsx)(j.Fragment,{children:(0,j.jsxs)("div",{className:"row",children:[(0,j.jsx)("div",{children:(0,j.jsxs)(u.__,{children:[(0,j.jsx)("b",{children:c}),(0,j.jsx)(u.BZ,{type:"text",value:S,readOnly:!0})]})}),(0,j.jsx)("div",{children:(0,j.jsx)(u.zx,{icon:x.R4W,intent:s.S.WARNING,minimal:!0,onClick:function(){d(i,a)({id:l,type:r,action:"delete"})}})})]})})}return(0,j.jsxs)("div",{className:"row",children:[(0,j.jsx)("div",{className:"holiday",children:(0,j.jsxs)(u.__,{children:[(0,j.jsx)("b",{children:c}),(0,j.jsx)(u.XZ,{label:"Enabled",checked:"Enabled"===f("".concat(i,".type")),onClick:function(){d("".concat(i),a)({id:f("".concat(i,".id")),type:"Enabled"===f("".concat(i,".type"))?"Disabled":"Enabled"})}})]})}),(0,j.jsx)("div",{})]})}var Z=i(60364),z=y.R$.values.map((function(e){return e.label}));function M(e){var n=e.unit,i=e.editing,t=e.handleChange,a=e.holidays,o=(0,g.useState)(""),d=(0,S.Z)(o,2),l=d[0],c=d[1],r=(0,g.useState)(new Date),h=(0,S.Z)(r,2),p=h[0],v=h[1],b=(0,g.useState)(""),C=(0,S.Z)(b,2),T=C[0],k=C[1],Z=(0,g.useState)(!1),z=(0,S.Z)(Z,2),M=z[0],D=z[1];return(0,j.jsxs)("div",{className:"row",children:[(0,j.jsx)("div",{className:"label",children:(0,j.jsxs)(u.__,{children:[(0,j.jsx)("b",{children:"Holiday Label"}),(0,j.jsx)(u.BZ,{type:"text",value:l,onChange:function(e){return c(e.target.value)}})]})}),(0,j.jsx)("div",{children:(0,j.jsxs)(u.__,{children:[(0,j.jsx)("b",{children:"Date"}),(0,j.jsx)(f.p,{content:(0,j.jsx)(N.M,{value:p,onChange:function(e,n){e&&v(e),D(!n)}}),isOpen:M,placement:"bottom-start",children:(0,j.jsx)(u.zx,{rightIcon:x.XNV,onClick:function(){return D(!0)},minimal:!0,children:O()(p).format("MMMM Do")})})]})}),(0,j.jsx)("div",{children:(0,j.jsxs)(u.__,{children:[(0,j.jsx)("b",{children:"Observance"}),(0,j.jsx)(f.p,{content:(0,j.jsxs)(u.v2,{children:[(0,j.jsx)(u.sN,{text:"Always on Date",onClick:function(){return k("")}}),y.VD.values.map((function(e){return(0,j.jsx)(u.sN,{text:e.label,onClick:function(){return k(e.label)}},e.name)}))]}),placement:"bottom-start",children:(0,j.jsx)(u.zx,{rightIcon:x.vv6,minimal:!0,children:T||"Always on Date"})})]})}),(0,j.jsx)("div",{children:(0,j.jsx)(u.zx,{icon:x.YZ9,intent:s.S.PRIMARY,minimal:!0,disabled:(0,m.isEmpty)(l)||void 0!==a.find((function(e){return e.label===l})),onClick:function(){var e,a=Math.max((0,m.get)(n,"configuration.holidays.length",0),(0,m.get)(i,"configuration.holidays.length",0));t("configuration.holidays.".concat(a),i)({type:"Custom",label:l,month:p.getMonth()+1,day:p.getDate(),observance:T,configurationId:null===n||void 0===n||null===(e=n.configuration)||void 0===e?void 0:e.id,createdAt:O()().format(),action:"create"}),c(""),v(new Date),k("")},children:"Create Holiday"})})]})}function D(e){var n,i=e.unit,t=e.editing,a=e.handleChange,o=(0,Z.I0)(),d=(0,g.useState)(void 0),l=(0,S.Z)(d,2),c=l[0],r=l[1],h=(0,m.merge)([],null===(n=i.configuration)||void 0===n?void 0:n.holidays,(0,m.get)(t,"configuration.holidays"));return h.forEach((function(e,n){return e.index=n})),(0,j.jsxs)(j.Fragment,{children:[(0,j.jsxs)(u.__,{children:[(0,j.jsx)("h3",{children:"Create Holiday"}),(0,j.jsx)(M,{unit:i,editing:t,handleChange:a,holidays:h})]}),(0,j.jsxs)(u.__,{children:[(0,j.jsx)("h3",{children:"Custom Holidays"}),(0,j.jsx)("ul",{children:(0,m.isEmpty)(h.filter((function(e){return"Custom"===e.type&&"delete"!==e.action})))?(0,j.jsx)("li",{children:"No Custom Holidays Defined"},"empty"):h.filter((function(e){return"Custom"===e.type&&"delete"!==e.action})).sort((function(e,n){return O()(n.createdAt).valueOf()-O()(e.createdAt).valueOf()})).map((function(e,n){return(0,j.jsx)("li",{children:(0,j.jsx)(k,{path:"configuration.holidays.".concat(e.index),unit:i,editing:t,holiday:e,handleChange:a},e.index)},e.index)}))})]}),(0,j.jsxs)(u.__,{children:[(0,j.jsx)("h3",{children:"Predefined Holidays"}),(0,j.jsx)("ul",{children:h.filter((function(e){return"Custom"!==e.type})).sort((function(e,n){return z.indexOf(e.label)-z.indexOf(n.label)})).map((function(e,n){return(0,j.jsx)("li",{children:(0,j.jsx)(k,{path:"configuration.holidays.".concat(e.index),unit:i,editing:t,holiday:e,handleChange:a},e.index)},e.index)}))})]}),(0,j.jsx)(u.bZ,{intent:s.S.DANGER,isOpen:void 0!==c,confirmButtonText:"Yes",cancelButtonText:"Cancel",onConfirm:function(){var e;return o((0,C.qd)(null!==(e=null===c||void 0===c?void 0:c.id)&&void 0!==e?e:-1))},onClose:function(){return r(void 0)},children:(0,j.jsxs)("p",{children:["Permanently delete the holiday ",null===c||void 0===c?void 0:c.label,"?"]})})]})}var E=i(63769),R=i(48565);function L(e){var n=e.path,i=e.editing,t=e.occupancy,a=e.handleChange,o=t.id,d=t.label,l=t.date,c=t.schedule,r=null===c||void 0===c?void 0:c.label,h="".concat(O()(l).format("dddd MMMM Do YYYY")," ").concat(r&&"(".concat(r,")")),p=O()(l).startOf("day").isBefore(O()().startOf("day"),"day");return(0,j.jsx)(j.Fragment,{children:(0,j.jsxs)("div",{className:"row",children:[(0,j.jsx)("div",{children:(0,j.jsxs)(u.__,{disabled:p,children:[(0,j.jsx)("b",{children:d}),(0,j.jsx)(u.BZ,{type:"text",value:h,disabled:p,readOnly:!0})]})}),(0,j.jsx)("div",{children:(0,j.jsx)(u.zx,{icon:x.R4W,intent:s.S.WARNING,minimal:!0,onClick:function(){a(n,i)({id:o,action:"delete"})}})})]})})}var _,w=i(50668),B=(0,w.parseBoolean)("false"),P={label:"",occupied:!0,startTime:(0,E.cz)(E.S$),endTime:(0,E.cz)(E.Be)};function A(e){var n=e.unit,i=e.editing,t=e.handleChange,a=(0,g.useState)(""),o=(0,S.Z)(a,2),d=o[0],l=o[1],c=(0,g.useState)(new Date),r=(0,S.Z)(c,2),h=r[0],p=r[1],v=(0,g.useState)((0,m.clone)(P)),b=(0,S.Z)(v,2),y=b[0],C=b[1],T=(0,g.useState)(!1),k=(0,S.Z)(T,2),Z=k[0],z=k[1],M=(0,g.useCallback)((function(e){return(0,m.get)(i,e,(0,m.get)(n,e))}),[i,n]),D=O()(h).format("dddd").toLowerCase(),R={schedule:{start:y.occupied?(0,E.xM)(y.startTime,!1):E.lL,end:y.occupied?(0,E.xM)(y.endTime,!0):E.QM},previous:{start:M("configuration.".concat(D,"Schedule.occupied"))?(0,E.xM)(M("configuration.".concat(D,"Schedule.startTime")),!1):E.lL,end:M("configuration.".concat(D,"Schedule.occupied"))?(0,E.xM)(M("configuration.".concat(D,"Schedule.endTime")),!0):E.QM,occupied:M("configuration.".concat(D,"Schedule.occupied"))}};return(0,j.jsxs)("div",{className:"row",children:[(0,j.jsx)("div",{className:"label",children:(0,j.jsxs)(u.__,{children:[(0,j.jsx)("b",{children:"Occupancy Label"}),(0,j.jsx)(u.BZ,{type:"text",value:d,onChange:function(e){return l(e.target.value)}})]})}),(0,j.jsxs)("div",{className:"row",children:[(0,j.jsx)("div",{className:"label",children:(0,j.jsxs)(u.__,{children:[(0,j.jsx)("b",{children:"Occupancy Schedule"}),(0,j.jsx)(u.BZ,{type:"text",value:y.label,readOnly:!0})]})}),(0,j.jsx)("div",{className:"occupancy",children:(0,j.jsxs)(u.Zz,{min:E.lL,max:E.QM,stepSize:5,labelStepSize:240,labelRenderer:function(e,n){return null!==n&&void 0!==n&&n.isHandleTooltip||e>E.lL&&e<E.QM?(0,E.li)(e):""},disabled:!y.occupied,children:[(0,j.jsx)(u.Zz.Handle,{type:u.gZ.START,interactionKind:u.qB.LOCK,intentAfter:y.occupied?s.S.SUCCESS:s.S.NONE,value:R.schedule.start,onChange:function(e){var n=(0,m.cloneDeep)(y),i=y.occupied,t=(0,E.xM)(y.endTime,!0),a=(0,m.clamp)(e,E.lL,Math.min(t,E.QM)-E.Ls),o=(0,E.sG)("all",{occupied:i,startTime:a,endTime:t});(0,m.merge)(n,{startTime:(0,E.cz)(a),label:o}),C(n)}}),(0,j.jsx)(u.Zz.Handle,{type:u.gZ.START,interactionKind:u.qB.NONE,intentAfter:R.previous.occupied?(0,m.inRange)(R.previous.start,R.schedule.start,R.schedule.end)?s.S.SUCCESS:s.S.PRIMARY:s.S.NONE,value:R.previous.start}),(0,j.jsx)(u.Zz.Handle,{type:u.gZ.END,interactionKind:u.qB.NONE,intentBefore:R.previous.occupied?(0,m.inRange)(R.previous.end,R.schedule.start,R.schedule.end)?s.S.SUCCESS:s.S.PRIMARY:s.S.NONE,value:R.previous.end}),(0,j.jsx)(u.Zz.Handle,{type:u.gZ.END,interactionKind:u.qB.LOCK,intentBefore:y.occupied?s.S.SUCCESS:s.S.NONE,value:R.schedule.end,onChange:function(e){var n=(0,m.cloneDeep)(y),i=y.occupied,t=(0,E.xM)(y.startTime,!1),a=(0,m.clamp)(e,Math.max(t,E.lL)+E.Ls,E.QM),o=(0,E.sG)("all",{occupied:i,startTime:t,endTime:a});(0,m.merge)(n,{endTime:(0,E.cz)(a),label:o}),C(n)}})]})}),B?(0,j.jsx)("div",{className:"unoccupied",children:(0,j.jsx)(u.XZ,{label:"Unoccupied",checked:!y.occupied,onClick:function(){var e=(0,m.cloneDeep)(y),n=!y.occupied,i=(0,E.xM)(y.startTime,!1),t=(0,E.xM)(y.endTime,!0),a=(0,E.sG)("all",{occupied:n,startTime:i,endTime:t});(0,m.merge)(e,{occupied:n,label:a}),C(e)}})}):(0,j.jsx)("div",{})]}),(0,j.jsx)("div",{children:(0,j.jsxs)(u.__,{children:[(0,j.jsx)("b",{children:"Date"}),(0,j.jsx)(f.p,{content:(0,j.jsx)(N.M,{value:h,onChange:function(e,n){e&&p(e),z(!n)}}),isOpen:Z,placement:"bottom-start",children:(0,j.jsx)(u.zx,{rightIcon:x.XNV,onClick:function(){return z(!0)},minimal:!0,children:O()(h).format("dddd MMMM Do YYYY")})})]})}),(0,j.jsx)("div",{children:(0,j.jsx)(u.zx,{icon:x.YZ9,intent:s.S.PRIMARY,minimal:!0,onClick:function(){var e,a=Math.max((0,m.get)(n,"configuration.occupancies.length",0),(0,m.get)(i,"configuration.occupancies.length",0));t("configuration.occupancies.".concat(a),i)({label:d,date:h.toISOString(),schedule:y,configurationId:null===n||void 0===n||null===(e=n.configuration)||void 0===e?void 0:e.id,createdAt:O()().format(),action:"create"}),l(""),p(new Date),C((0,m.clone)(P))},children:"Create Occupancy"})})]})}function H(e){var n,i=e.unit,t=e.editing,a=e.handleChange,o=(0,Z.I0)(),d=(0,g.useState)(void 0),l=(0,S.Z)(d,2),c=l[0],r=l[1],h=(0,m.merge)([],null===(n=i.configuration)||void 0===n?void 0:n.occupancies,(0,m.get)(t,"configuration.occupancies"));return h.forEach((function(e,n){return e.index=n})),(0,j.jsxs)(j.Fragment,{children:[(0,j.jsxs)(u.__,{children:[(0,j.jsx)("h3",{children:"Create Occupancy"}),(0,j.jsx)(A,{unit:i,editing:t,handleChange:a})]}),(0,j.jsxs)(u.__,{children:[(0,j.jsx)("h3",{children:"Temporary Occupancies"}),(0,j.jsx)("ul",{children:(0,m.isEmpty)(h.filter((function(e){return"delete"!==e.action})))?(0,j.jsx)("li",{children:"No Temporary Occupancies Defined"},"empty"):h.filter((function(e){return"delete"!==e.action})).sort((function(e,n){return O()(n.date).valueOf()-O()(e.date).valueOf()})).map((function(e,n){return(0,j.jsx)("li",{children:(0,j.jsx)(L,{path:"configuration.occupancies.".concat(e.index),unit:i,editing:t,occupancy:e,handleChange:a},e.index)},e.index)}))})]}),(0,j.jsx)(u.bZ,{intent:s.S.DANGER,isOpen:void 0!==c,confirmButtonText:"Yes",cancelButtonText:"Cancel",onConfirm:function(){var e;return o((0,R.VT)(null!==(e=null===c||void 0===c?void 0:c.id)&&void 0!==e?e:-1))},onClose:function(){return r(void 0)},children:(0,j.jsxs)("p",{children:["Permanently delete the occupancy ",null===c||void 0===c?void 0:c.label,"?"]})})]})}function U(e){var n=e.title,i=e.path,t=e.unit,a=e.editing,o=e.handleChange,d=e.readOnly,l=void 0===d?["title"]:d,c=(0,g.useCallback)((function(e){return(0,m.get)(a,e,(0,m.get)(t,e))}),[a,t]);return(0,j.jsxs)("div",{className:"row",children:[(0,j.jsx)("h3",{children:" "}),(0,j.jsx)("div",{className:"label",children:(0,j.jsxs)(u.__,{children:[(0,j.jsx)("b",{children:n}),(0,j.jsx)(u.BZ,{type:"text",value:c("".concat(i,".label")),onChange:function(e){o("".concat(i,".label"),a)(e.target.value)},readOnly:null===l||void 0===l?void 0:l.includes("title")})]})}),(0,j.jsx)("div",{className:"schedule",children:(0,j.jsx)(u.U2,{min:E.lL,max:E.QM,stepSize:5,labelStepSize:240,intent:s.S.SUCCESS,value:c("".concat(i,".occupied"))?[(0,E.xM)(c("".concat(i,".startTime")),!1),(0,E.xM)(c("".concat(i,".endTime")),!0)]:[E.lL,E.lL],labelRenderer:function(e,n){return null!==n&&void 0!==n&&n.isHandleTooltip||e>E.lL&&e<E.QM?(0,E.li)(e):""},disabled:!(0,m.get)(a,"".concat(i,".occupied"),(0,m.get)(t,"".concat(i,".occupied"))),onChange:function(e){var n=c("".concat(i,".occupied")),t=(0,m.clamp)(e[0],E.lL,Math.min(e[1],E.QM)-E.Ls),d=(0,m.clamp)(e[1],Math.max(e[0],E.lL)+E.Ls,E.QM),l=(0,E.sG)("all",{occupied:n,startTime:t,endTime:d});o("".concat(i),a)({startTime:(0,E.cz)(t),endTime:(0,E.cz)(d),label:l})}})}),(0,j.jsx)("div",{className:"unoccupied",children:(0,j.jsx)(u.XZ,{label:"Unoccupied",checked:!c("".concat(i,".occupied")),onClick:function(){var e=!c("".concat(i,".occupied")),n=(0,E.xM)(c("".concat(i,".startTime")),!1),t=(0,E.xM)(c("".concat(i,".endTime")),!0),d=(0,E.sG)("all",{occupied:e,startTime:n,endTime:t});o("".concat(i),a)({occupied:e,label:d})}})})]})}P.label=(0,E.sG)("all",P);var I=(0,w.parseBoolean)(null!==(_="false")?_:"");function Y(e){var n=e.unit,i=e.editing,t=e.handleChange;return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(U,{title:"Monday Schedule",path:"configuration.mondaySchedule",unit:n,editing:i,handleChange:t}),(0,j.jsx)(U,{title:"Tuesday Schedule",path:"configuration.tuesdaySchedule",unit:n,editing:i,handleChange:t}),(0,j.jsx)(U,{title:"Wednesday Schedule",path:"configuration.wednesdaySchedule",unit:n,editing:i,handleChange:t}),(0,j.jsx)(U,{title:"Thursday Schedule",path:"configuration.thursdaySchedule",unit:n,editing:i,handleChange:t}),(0,j.jsx)(U,{title:"Friday Schedule",path:"configuration.fridaySchedule",unit:n,editing:i,handleChange:t}),(0,j.jsx)(U,{title:"Saturday Schedule",path:"configuration.saturdaySchedule",unit:n,editing:i,handleChange:t}),(0,j.jsx)(U,{title:"Sunday Schedule",path:"configuration.sundaySchedule",unit:n,editing:i,handleChange:t}),I&&(0,j.jsx)(U,{title:"Holiday Schedule",path:"configuration.holidaySchedule",unit:n,editing:i,handleChange:t})]})}var $=i(49107);function G(e){var n=e.type,i=e.title,t=e.path,a=e.unit,o=e.editing,d=e.setpoint,l=e.handleChange,c=e.readOnly,r=void 0===c?["title"]:c,h=(0,g.useCallback)((function(e){return(0,m.get)(o,e,(0,m.get)(a,e))}),[o,a]),p=(0,g.useMemo)((function(){return(0,$.qr)((0,m.merge)({},(0,m.get)(a,t),d))||"\xa0"}),[t,a,d]),v=function(){return(0,j.jsxs)(u.Zz,{min:$.QG,max:$.Of,stepSize:.5,labelStepSize:5,labelRenderer:function(e,n){return null!==n&&void 0!==n&&n.isHandleTooltip||e>$.op&&e<$.Ig?"".concat(e,"\xba\xa0F"):""},children:[(0,j.jsx)(u.Zz.Handle,{type:u.gZ.START,interactionKind:u.qB.LOCK,intentAfter:s.S.WARNING,value:h("".concat(t,".heating")),onChange:function(e){var n=h("".concat(t,".setpoint")),i=h("".concat(t,".deadband")),a=$.ax+i/2,d=(0,m.clamp)(e,$.op,n-a),c=h("".concat(t,".cooling")),s=(0,$.hD)("all",{setpoint:n,deadband:i,heating:d,cooling:c});l("".concat(t),o)({heating:d,label:s})}}),(0,j.jsx)(u.Zz.Handle,{type:u.gZ.START,interactionKind:u.qB.LOCK,intentAfter:s.S.NONE,value:h("".concat(t,".setpoint"))-h("".concat(t,".deadband"))/2,onChange:function(e){var n=h("".concat(t,".deadband")),i=$.ax+n/2,a=h("".concat(t,".heating")),d=h("".concat(t,".cooling")),c=e+n/2,s=(0,m.clamp)(c,a+i,d-i),r=(0,$.hD)("all",{setpoint:s,deadband:n,heating:a,cooling:d});l("".concat(t),o)({setpoint:s,label:r})}}),(0,j.jsx)(u.Zz.Handle,{type:u.gZ.END,interactionKind:u.qB.LOCK,intentBefore:s.S.NONE,value:h("".concat(t,".setpoint"))+h("".concat(t,".deadband"))/2,onChange:function(e){var n=h("".concat(t,".deadband")),i=$.ax+n/2,a=h("".concat(t,".heating")),d=h("".concat(t,".cooling")),c=e-n/2,s=(0,m.clamp)(c,a+i,d-i),r=(0,$.hD)("all",{setpoint:s,deadband:n,heating:a,cooling:d});l("".concat(t),o)({setpoint:s,label:r})}}),(0,j.jsx)(u.Zz.Handle,{type:u.gZ.END,interactionKind:u.qB.LOCK,intentBefore:s.S.PRIMARY,value:h("".concat(t,".cooling")),onChange:function(e){var n=h("".concat(t,".setpoint")),i=h("".concat(t,".deadband")),a=$.ax+i/2,d=h("".concat(t,".heating")),c=(0,m.clamp)(e,n+a,$.Ig),s=(0,$.hD)("all",{setpoint:n,deadband:i,heating:d,cooling:c});l("".concat(t),o)({cooling:c,label:s})}})]})},x=function(){return(0,j.jsxs)(u.__,{children:[(0,j.jsx)("b",{children:"Occupied"}),(0,j.jsxs)(u.Zz,{min:$.QG,max:$.Of,stepSize:.5,labelStepSize:5,intent:s.S.SUCCESS,labelRenderer:function(e,n){return null!==n&&void 0!==n&&n.isHandleTooltip||e>$.op&&e<$.Ig?"".concat(e,"\xba\xa0F"):""},children:[(0,j.jsx)(u.Zz.Handle,{type:u.gZ.START,interactionKind:u.qB.LOCK,intentBefore:s.S.WARNING,intentAfter:s.S.SUCCESS,value:h("".concat(t,".setpoint"))-h("".concat(t,".deadband"))/2,onChange:function(e){var n=h("".concat(t,".deadband")),i=$.ax+n/2,a=h("".concat(t,".heating")),d=h("".concat(t,".cooling")),c=e+n/2,s=(0,m.clamp)(c,a+i,d-i),r=(0,$.hD)("all",{setpoint:s,deadband:n,heating:a,cooling:d});l("".concat(t),o)({setpoint:s,label:r})}}),(0,j.jsx)(u.Zz.Handle,{type:u.gZ.END,interactionKind:u.qB.LOCK,intentBefore:s.S.SUCCESS,intentAfter:s.S.PRIMARY,value:h("".concat(t,".setpoint"))+h("".concat(t,".deadband"))/2,onChange:function(e){var n=h("".concat(t,".deadband")),i=$.ax+n/2,a=h("".concat(t,".heating")),d=h("".concat(t,".cooling")),c=e-n/2,s=(0,m.clamp)(c,a+i,d-i),r=(0,$.hD)("all",{setpoint:s,deadband:n,heating:a,cooling:d});l("".concat(t),o)({setpoint:s,label:r})}})]})]})},f=function(){return(0,j.jsxs)(u.__,{children:[(0,j.jsx)("b",{children:"Unoccupied"}),(0,j.jsxs)(u.Zz,{min:$.QG,max:$.Of,stepSize:.5,labelStepSize:5,labelRenderer:function(e,n){return null!==n&&void 0!==n&&n.isHandleTooltip||e>$.op&&e<$.Ig?"".concat(e,"\xba\xa0F"):""},children:[(0,j.jsx)(u.Zz.Handle,{type:u.gZ.START,interactionKind:u.qB.LOCK,intentBefore:s.S.WARNING,value:h("".concat(t,".heating")),onChange:function(e){var n=h("".concat(t,".setpoint")),i=h("".concat(t,".deadband")),a=$.ax+i/2,d=(0,m.clamp)(e,$.op,n-a),c=h("".concat(t,".cooling")),s=(0,$.hD)("all",{setpoint:n,deadband:i,heating:d,cooling:c});l("".concat(t),o)({heating:d,label:s})}}),(0,j.jsx)(u.Zz.Handle,{type:u.gZ.END,interactionKind:u.qB.LOCK,intentAfter:s.S.PRIMARY,value:h("".concat(t,".cooling")),onChange:function(e){var n=h("".concat(t,".setpoint")),i=h("".concat(t,".deadband")),a=$.ax+i/2,d=h("".concat(t,".heating")),c=(0,m.clamp)(e,n+a,$.Ig),s=(0,$.hD)("all",{setpoint:n,deadband:i,heating:d,cooling:c});l("".concat(t),o)({cooling:c,label:s})}})]})]})};return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsxs)("div",{className:"row",children:[(0,j.jsx)("h3",{children:" "}),(0,j.jsx)("div",{className:"label",children:(0,j.jsxs)(u.__,{children:[(0,j.jsx)("b",{children:i}),(0,j.jsx)(u.BZ,{type:"text",value:h("".concat(t,".label")),onChange:function(e){l("".concat(t,".label"),o)(e.target.value)},readOnly:null===r||void 0===r?void 0:r.includes("title")})]})}),(0,j.jsx)("div",{className:"deadband",children:(0,j.jsxs)(u.__,{children:[(0,j.jsx)("b",{children:"Deadband"}),(0,j.jsx)(u.Af,{step:1,min:$.bM,max:$.iz,value:h("".concat(t,".deadband")),onValueChange:function(e){var n=h("".concat(t,".setpoint")),i=e,a=h("".concat(t,".heating")),d=h("".concat(t,".cooling")),c=(0,$.hD)("all",{setpoint:n,deadband:i,heating:a,cooling:d});l("".concat(t),o)({deadband:i,label:c})}})]})}),(0,j.jsx)("div",{className:"error",children:(0,j.jsx)("h4",{children:p})}),(0,j.jsx)("div",{})]}),function(){switch(n){case"both":return(0,j.jsxs)("div",{className:"row",children:[(0,j.jsx)("div",{className:"setpoint",children:v()}),(0,j.jsx)("div",{className:"break"}),(0,j.jsx)("div",{className:"setpoint",children:x()}),(0,j.jsx)("div",{className:"break"}),(0,j.jsx)("div",{className:"setpoint",children:f()}),(0,j.jsx)("div",{className:"break"}),(0,j.jsx)("div",{})]});case"single":return(0,j.jsxs)("div",{className:"row",children:[(0,j.jsx)("div",{className:"setpoint",children:v()}),(0,j.jsx)("div",{className:"break"}),(0,j.jsx)("div",{})]});default:return(0,j.jsxs)("div",{className:"row",children:[(0,j.jsx)("div",{className:"setpoint",children:x()}),(0,j.jsx)("div",{className:"break"}),(0,j.jsx)("div",{className:"setpoint",children:f()}),(0,j.jsx)("div",{className:"break"}),(0,j.jsx)("div",{})]})}}()]})}function K(e){var n=e.unit,i=e.editing,t=e.handleChange;return(0,j.jsx)(G,{type:"separate",title:"Setpoints",path:"configuration.setpoint",unit:n,editing:i,setpoint:(0,m.get)(i,"configuration.setpoint"),handleChange:t})}var F=i(95785),q=i(53381),Q=i(77848),V=i(24824),W=function(e){(0,l.Z)(i,e);var n=(0,c.Z)(i);function i(e){var t;return(0,o.Z)(this,i),(t=n.call(this,e)).getValue=function(e,n,i){var a=t.props.units,o=i||(null===a||void 0===a?void 0:a.find((function(e){return e.id===(null===n||void 0===n?void 0:n.id)})));return(0,m.get)(n,e,(0,m.get)(o,e))},t.handleChange=function(e,n){return function(i){if("configurationId"===e)t.props.updateUnit({id:null===n||void 0===n?void 0:n.id,configurationId:i});else!function(i){n&&((0,m.isObject)(t.getValue(e,n))?(0,m.set)(n,e,(0,m.merge)((0,m.cloneDeep)((0,m.get)(n,e)),i)):(0,m.set)(n,e,i),t.setState({editing:n}))}(i)}},t.handleCreate=function(e){var n=(0,Q.ER)();n.unitId=e.id,t.props.createConfiguration(n),t.setState({editing:null,expanded:null})},t.handleEdit=function(e){var n=t.props.filtered,i=t.state.editing,a=i&&(null===n||void 0===n?void 0:n.find((function(e){return e.id===i.id})));a&&t.isSave(a)?t.setState({confirm:function(){return t.setState({editing:{id:e.id}})}}):t.setState({editing:{id:e.id}})},t.handleCancel=function(){var e=t.props.filtered,n=t.state.editing,i=n&&(null===e||void 0===e?void 0:e.find((function(e){return e.id===n.id})));i&&t.isSave(i)?t.setState({confirm:function(){return t.setState({editing:null,expanded:null})}}):t.setState({editing:null,expanded:null})},t.handleConfirm=function(){var e=t.state.confirm;t.setState({confirm:null},null!==e&&void 0!==e?e:void 0)},t.handleSave=function(){var e=t.state.editing;e&&t.props.updateUnit(e)},t.handleDelete=function(e){var n=e.id;void 0!==n&&t.props.deleteConfiguration(n)},t.handlePush=function(e){var n=e.id;void 0!==n&&t.props.updateUnit({id:n,stage:y.$b.UpdateType.label})},t.isSave=function(e){var n,i=t.state.editing,a=(0,m.merge)({},e,i);return(0,$.hQ)(null===(n=a.configuration)||void 0===n?void 0:n.setpoint)&&!(0,m.isEqual)(e,a)},t.isPush=function(e){switch(e.stage){case y.$b.UpdateType.label:case y.$b.DeleteType.label:case y.$b.ProcessType.label:return!1;case y.$b.CreateType.label:case y.$b.CompleteType.label:case y.$b.FailType.label:default:return!t.isSave(e)}},t.state={editing:null,expanded:null,confirm:null},t}return(0,d.Z)(i,[{key:"componentDidMount",value:function(){this.props.readUnits(),this.props.readConfigurations(),this.props.readUnitsPoll(V.Jd),this.props.readConfigurationsPoll(V.Jd)}},{key:"componentWillUnmount",value:function(){this.props.readUnitsPoll(),this.props.readConfigurationsPoll()}},{key:"renderStatus",value:function(e){var n=this,i=x.WNC,t=s.S.WARNING;switch(e.stage){case y.$b.UpdateType.label:i=x.RGM,t=s.S.PRIMARY;break;case y.$b.ProcessType.label:i=x.RGM,t=s.S.SUCCESS;break;case y.$b.CreateType.label:i=x.WNC,t=s.S.WARNING;break;case y.$b.DeleteType.label:i=x.yY6,t=s.S.DANGER;break;case y.$b.CompleteType.label:i=x.ae_,t=s.S.SUCCESS;break;case y.$b.FailType.label:i=x.pnR,t=s.S.DANGER}return(0,j.jsx)(F.u,{content:"Push Unit Configuration",placement:r.Ly.TOP,disabled:!this.isPush(e),children:(0,j.jsx)(u.zx,{icon:i,intent:t,minimal:!0,onClick:function(){return n.handlePush(e)},disabled:!this.isPush(e)})})}},{key:"renderConfirm",value:function(){var e=this;return null===this.state.confirm?null:(0,j.jsx)(u.bZ,{intent:s.S.DANGER,isOpen:!0,confirmButtonText:"Yes",cancelButtonText:"Cancel",onConfirm:function(){return e.handleConfirm()},onClose:function(){return e.setState({confirm:null})},children:(0,j.jsx)("p",{children:"There are changes which have not been saved. Do you still want to continue?"})})}},{key:"renderPrompt",value:function(){var e=this.props.filtered,n=this.state.editing,i=n&&(null===e||void 0===e?void 0:e.find((function(e){return e.id===n.id}))),t=!(0,m.isNil)(i)&&this.isSave(i);return(0,j.jsx)(h.NL,{when:t,message:"There are changes which have not been saved. Do you still want to continue?"})}},{key:"render",value:function(){var e=this,n=this.props,i=n.filtered,a=n.configurations,o=this.state,d=o.editing,l=o.expanded;return(0,j.jsxs)("div",{className:"units",children:[this.renderPrompt(),(0,j.jsx)(h.h4,(0,t.Z)({},this.props)),(0,j.jsx)("h1",{children:"Units"}),(0,j.jsxs)("div",{className:"list",children:[null===i||void 0===i?void 0:i.map((function(n,i){var t,o;return n.id===(null===d||void 0===d?void 0:d.id)?(0,j.jsxs)(u.Zb,{interactive:!0,children:[(0,j.jsxs)("div",{className:"row",children:[(0,j.jsx)("div",{children:(0,j.jsx)(u.__,{children:(0,j.jsx)("h3",{children:n.label})})}),(0,j.jsxs)("div",{children:[e.renderStatus(n),(0,j.jsx)(F.u,{content:"Save",placement:r.Ly.TOP,disabled:!e.isSave(n),children:(0,j.jsx)(u.zx,{icon:x.$eC,intent:s.S.PRIMARY,minimal:!0,onClick:function(){return e.handleSave()},disabled:!e.isSave(n)})}),(0,j.jsx)(F.u,{content:"Exit",placement:r.Ly.TOP,children:(0,j.jsx)(u.zx,{icon:x.eV6,intent:s.S.PRIMARY,minimal:!0,onClick:function(){return e.handleCancel()}})})]})]}),(0,j.jsxs)("div",{className:"row",children:[(0,j.jsx)("div",{children:(0,j.jsxs)(u.__,{children:[(0,j.jsx)("b",{children:"Campus"}),(0,j.jsx)(u.BZ,{type:"text",value:n.campus,readOnly:!0})]})}),(0,j.jsx)("div",{children:(0,j.jsxs)(u.__,{children:[(0,j.jsx)("b",{children:"Building"}),(0,j.jsx)(u.BZ,{type:"text",value:n.building,readOnly:!0})]})}),(0,j.jsx)("div",{children:(0,j.jsxs)(u.__,{children:[(0,j.jsx)("b",{children:"System"}),(0,j.jsx)(u.BZ,{type:"text",value:n.system,readOnly:!0})]})}),(0,j.jsx)("div",{children:(0,j.jsxs)(u.__,{children:[(0,j.jsx)("b",{children:"Timezone"}),(0,j.jsx)(u.BZ,{type:"text",value:n.timezone,readOnly:!0})]})}),(0,j.jsx)("div",{})]}),(0,j.jsxs)(u.UO,{isOpen:!0,children:[(0,j.jsx)(u.mp,{contents:[{id:"configuration",label:"Configuration",icon:x.$qo,hasCaret:!0,isExpanded:"configuration"===l}],onNodeExpand:function(n){return e.setState({expanded:n.id})},onNodeCollapse:function(){return e.setState({expanded:null})},onNodeClick:function(n){return e.setState({expanded:n.id===l?null:n.id})}}),(0,j.jsx)(u.UO,{isOpen:"configuration"===l,children:(0,j.jsx)(b,{unit:n,editing:d,configurations:a,handleChange:e.handleChange,handleCreate:e.handleCreate})}),(0,j.jsx)(u.mp,{contents:[{id:"setpoints",label:"Setpoints",icon:x.IXo,hasCaret:!0,isExpanded:"setpoints"===l}],onNodeExpand:function(n){return e.setState({expanded:n.id})},onNodeCollapse:function(){return e.setState({expanded:null})},onNodeClick:function(n){return e.setState({expanded:n.id===l?null:n.id})}}),(0,j.jsx)(u.UO,{isOpen:"setpoints"===l,children:(0,j.jsx)(K,{unit:n,editing:d,handleChange:e.handleChange})}),(0,j.jsx)(u.mp,{contents:[{id:"schedules",label:"Occupancy Schedules",icon:x.nfX,hasCaret:!0,isExpanded:"schedules"===l}],onNodeExpand:function(n){return e.setState({expanded:n.id})},onNodeCollapse:function(){return e.setState({expanded:null})},onNodeClick:function(n){return e.setState({expanded:n.id===l?null:n.id})}}),(0,j.jsx)(u.UO,{isOpen:"schedules"===l,children:(0,j.jsx)(Y,{unit:n,editing:d,handleChange:e.handleChange})}),(0,j.jsx)(u.mp,{contents:[{id:"holidays",label:"Holidays",icon:x.q4R,hasCaret:!0,isExpanded:"holidays"===l}],onNodeExpand:function(n){return e.setState({expanded:n.id})},onNodeCollapse:function(){return e.setState({expanded:null})},onNodeClick:function(n){return e.setState({expanded:n.id===l?null:n.id})}}),(0,j.jsx)(u.UO,{isOpen:"holidays"===l,children:(0,j.jsx)(D,{unit:n,editing:d,handleChange:e.handleChange})}),(0,j.jsx)(u.mp,{contents:[{id:"occupancies",label:"Temporary Occupancy",icon:x.SdJ,hasCaret:!0,isExpanded:"occupancies"===l}],onNodeExpand:function(n){return e.setState({expanded:n.id})},onNodeCollapse:function(){return e.setState({expanded:null})},onNodeClick:function(n){return e.setState({expanded:n.id===l?null:n.id})}}),(0,j.jsx)(u.UO,{isOpen:"occupancies"===l,children:(0,j.jsx)(H,{unit:n,editing:d,handleChange:e.handleChange})}),(0,j.jsx)(u.mp,{contents:[{id:"rtu",label:"RTU Configuration",icon:x.lt1,hasCaret:!0,isExpanded:"rtu"===l}],onNodeExpand:function(n){return e.setState({expanded:n.id})},onNodeCollapse:function(){return e.setState({expanded:null})},onNodeClick:function(n){return e.setState({expanded:n.id===l?null:n.id})}}),(0,j.jsx)(u.UO,{isOpen:"rtu"===l,children:(0,j.jsx)(q.f,{unit:n,editing:d,handleChange:e.handleChange,hidden:["peakLoadExclude","zoneLocation","zoneMass","zoneOrientation","zoneBuilding","coolingCapacity","compressors","heatPumpBackup","coolingPeakOffset","heatingPeakOffset"]})})]})]},null!==(t=n.id)&&void 0!==t?t:i):(0,j.jsx)(u.Zb,{interactive:!0,children:(0,j.jsxs)("div",{className:"row",children:[(0,j.jsx)("div",{children:(0,j.jsx)(u.__,{children:(0,j.jsx)("h3",{children:n.label})})}),(0,j.jsxs)("div",{children:[e.renderStatus(n),(0,j.jsx)(F.u,{content:"Edit",placement:r.Ly.TOP,children:(0,j.jsx)(u.zx,{icon:x.dme,intent:s.S.PRIMARY,minimal:!0,onClick:function(){return e.handleEdit(n)}})})]})]})},null!==(o=n.id)&&void 0!==o?o:i)})),this.renderConfirm()]})]})}}]),i}(g.Component),X={readUnits:v.Vh,readUnitsPoll:v.j5,filterUnits:v.Oe,updateUnit:v.t1,readConfigurations:p.uu,readConfigurationsPoll:p.z2,createConfiguration:p.Gx,updateConfiguration:p.a3,deleteConfiguration:p.Xc},J=(0,Z.$j)((function(e){return{units:(0,v.OB)(e),filtered:(0,v.ey)(e),configurations:(0,p.yp)(e)}}),X)(W),ee=function(e){return(0,j.jsx)(a.Z,(0,t.Z)((0,t.Z)({},e),{},{renderRoute:function(e){return(0,j.jsx)(J,(0,t.Z)({},e))}}))}},77848:function(e,n,i){i.d(n,{LK:function(){return s},ER:function(){return u},kI:function(){return r}});var t=i(49107),a=i(63769),o=i(696),d=i(72426),l=i.n(d),c=i(763),s=function(e){return l()().format("dddd, MMMM Do YYYY")},r=function(e){return 0===(0,c.sum)(Object.values((null===e||void 0===e?void 0:e._count)||{}))},u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s(),n={label:"",setpoint:t.Qf,deadband:t.tz,heating:t.cF,cooling:t.tE};n.label=(0,t.hD)("all",n);var i={label:"",occupied:!0,startTime:(0,a.cz)(a.S$),endTime:(0,a.cz)(a.Be)};i.label=(0,a.sG)("all",i);var d={label:"",occupied:!1,startTime:(0,a.cz)(a.S$),endTime:(0,a.cz)(a.Be)};d.label=(0,a.sG)("all",d);var l=[o.R$.NewYearsDayType,o.R$.MartinLutherKingJrType,o.R$.PresidentsDayType,o.R$.MemorialDayType,o.R$.JuneteenthType,o.R$.IndependenceDayType,o.R$.LaborDayType,o.R$.ColumbusDayType,o.R$.VeteransDayType,o.R$.ThanksgivingType,o.R$.BlackFridayType,o.R$.ChristmasType].map((function(e){return e.name})),c=o.R$.values.map((function(e){return{label:e.label,type:l.includes(e.name)?"Enabled":"Disabled"}}));return{label:e,setpoint:n,mondaySchedule:i,tuesdaySchedule:i,wednesdaySchedule:i,thursdaySchedule:i,fridaySchedule:i,saturdaySchedule:d,sundaySchedule:d,holidaySchedule:d,holidays:c}}},63769:function(e,n,i){i.d(n,{Ls:function(){return d},lL:function(){return l},S$:function(){return c},QM:function(){return s},Be:function(){return r},cz:function(){return p},li:function(){return v},xM:function(){return x},sG:function(){return m}});var t=i(763),a=i(72426),o=i.n(a),d=120,l=0,c=480,s=1440,r=1080,u="HH:mm",h="h:mm\xa0a",p=function(e){return o()("00:00",[u]).add(Math.trunc(e/60),"hours").add(e%60,"minutes").format(u)},v=function(e){return o()("00:00",[u]).add(Math.trunc(e/60),"hours").add(e%60,"minutes").format(h)},x=function(e,n){return 60*function(e,n,i){return i&&0===e?n:e}(o()(e,[u,h]).hours(),24,n)+o()(e,[u,h]).minutes()},m=function(e,n){var i=void 0===(null===n||void 0===n?void 0:n.occupied)||n.occupied,a=(0,t.isNumber)(n.startTime)?n.startTime:x(n.startTime,!1),o=(0,t.isNumber)(n.endTime)?n.endTime:x(n.endTime,!0);switch(e){case"startTime":return"".concat(v(a));case"endTime":return"".concat(v(o));default:return i?0===a&&1440===o?"Occupied All Day":"Occupied From Start Time: ".concat(v(a)," To End Time: ").concat(v(o)):"Unoccupied All Day"}}},49107:function(e,n,i){i.d(n,{ax:function(){return p},bM:function(){return v},iz:function(){return x},tz:function(){return m},op:function(){return f},cF:function(){return g},Ig:function(){return j},tE:function(){return b},QG:function(){return S},Of:function(){return y},Qf:function(){return C},hD:function(){return N},qr:function(){return T},hQ:function(){return O}});var t,a,o,d,l,c,s,r,u=i(763),h=i(696),p=parseInt("2"),v=(null===(t=h.g9.DeadbandType.options)||void 0===t?void 0:t.min)||2,x=(null===(a=h.g9.DeadbandType.options)||void 0===a?void 0:a.max)||6,m=(null===(o=h.g9.DeadbandType.options)||void 0===o?void 0:o.default)||4,f=(null===(d=h.g9.HeatingType.options)||void 0===d?void 0:d.min)||55,g=(null===(l=h.g9.HeatingType.options)||void 0===l?void 0:l.default)||60,j=(null===(c=h.g9.CoolingType.options)||void 0===c?void 0:c.max)||85,b=(null===(s=h.g9.CoolingType.options)||void 0===s?void 0:s.default)||80,S=f,y=j,C=(null===(r=h.g9.SetpointType.options)||void 0===r?void 0:r.default)||70,N=function e(n,i){return"all"===n?"Occupied Setpoint: ".concat(e("setpoint",i)," Deadband: ").concat(e("deadband",i)," Unoccupied Heating: ").concat(e("heating",i)," Cooling: ").concat(e("cooling",i)):"".concat(i[n],"\xba\xa0F")},T=function(e){return e.deadband<v||e.deadband>x?"Deadband must be in the range [".concat(v,",").concat(x,"]."):e.setpoint<e.heating+p+e.deadband/2||e.setpoint>e.cooling-p-e.deadband/2?"Occupied setpoint must be in the range [".concat(e.heating+p+e.deadband/2,",").concat(e.cooling-p-e.deadband/2,"]"):e.heating<f||e.cooling>j?"Unoccupied heating and cooling must be in the range [".concat(f,",").concat(j,"]"):e.setpoint%.5!==0?"Occupied setpoint must be a whole or half degree.":e.deadband%1!==0?"Deadband must be a whole degree.":e.heating%.5!==0||e.cooling%.5!==0?"Unoccupied heating or cooling must be a whole or half degree.":void 0},O=function(e){return!!(e&&(0,u.isNumber)(e.setpoint)&&(0,u.isNumber)(e.deadband)&&(0,u.isNumber)(e.heating)&&(0,u.isNumber)(e.cooling))&&void 0===T(e)}}}]);
//# sourceMappingURL=212.0db3ed14.chunk.js.map