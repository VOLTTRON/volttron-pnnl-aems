"use strict";(self.webpackChunkaems_client=self.webpackChunkaems_client||[]).push([[29],{15029:function(e,n,i){i.r(n),i.d(n,{default:function(){return C}});var t=i(1413),l=i(9153),c=i(15671),a=i(43144),d=i(60136),r=i(43668),u=i(51976),s=i(37305),o=i(50698),m=i(5476),h=i(60177),p=i(763),v=i(36625),f=i(23122),x=i(72791),T=i(60364),S=i(80184),b=function(e){(0,d.Z)(i,e);var n=(0,r.Z)(i);function i(e){var t;return(0,c.Z)(this,i),(t=n.call(this,e)).handleChange=function(e,n){return function(i){var l=t.state.editing;switch(e){case"label":return t.setState(void 0===n?{label:i}:{editing:(0,p.merge)(l,{label:i})});case"occupied":return t.setState(void 0===n?{occupied:i}:{editing:(0,p.merge)(l,{occupied:i})});case"value":var c=(0,p.clamp)(i[0],m.lL,Math.min(i[1],m.QM)-m.Ls),a=(0,p.clamp)(i[1],Math.max(i[0],m.lL)+m.Ls,m.QM);return t.setState(void 0===n?{label:(0,m.sG)("all",{startTime:c,endTime:a}),startTime:c,endTime:a}:{editing:(0,p.merge)(l,{label:(0,m.sG)("all",{startTime:c,endTime:a}),startTime:c,endTime:a})})}}},t.handleCreate=function(){var e=t.state,n=e.label,i=e.startTime,l=e.endTime,c=e.occupied;t.props.createSchedule({label:n,startTime:(0,m.cz)(i),endTime:(0,m.cz)(l),occupied:c}),t.setState({label:(0,m.sG)("all",{startTime:m.S$,endTime:m.Be}),startTime:m.S$,endTime:m.Be,occupied:!0,editing:null})},t.handleEdit=function(e){var n=e.id,i=e.label,l=e.startTime,c=e.endTime,a=e.occupied;t.setState({editing:{id:n,label:i,startTime:(0,m.xM)(l,!1),endTime:(0,m.xM)(c,!0),occupied:a}})},t.handleCancel=function(){t.setState({editing:null})},t.handleSave=function(){var e,n=(null===(e=t.state)||void 0===e?void 0:e.editing)||{},i=n.id,l=n.label,c=n.startTime,a=n.endTime,d=n.occupied;t.props.updateSchedule({id:i,label:l,startTime:(0,m.cz)(c),endTime:(0,m.cz)(a),occupied:d}),t.setState({editing:null})},t.handleDelete=function(e){var n=e.id;void 0!==n&&t.props.deleteSchedule(n)},t.state={label:(0,m.sG)("all",{startTime:m.S$,endTime:m.Be}),startTime:m.S$,endTime:m.Be,occupied:!0,editing:null},t}return(0,a.Z)(i,[{key:"componentDidMount",value:function(){this.props.readSchedules()}},{key:"render",value:function(){var e=this,n=this.props.filtered,i=this.state,l=i.label,c=i.startTime,a=i.endTime,d=i.occupied,r=i.editing;return(0,S.jsxs)("div",{className:"schedule",children:[(0,S.jsx)(v.h4,(0,t.Z)({},this.props)),(0,S.jsx)("h2",{children:"Create Schedule"}),(0,S.jsx)("div",{className:"create",children:(0,S.jsxs)(u.Zb,{interactive:!0,children:[(0,S.jsx)("div",{children:(0,S.jsx)("input",{className:s.O4S,type:"text",value:l,onChange:function(n){return e.handleChange("label")(n.target.value)}})}),(0,S.jsx)("div",{children:(0,S.jsx)(u.U2,{min:m.lL,max:m.QM,stepSize:5,labelStepSize:240,value:d?[c,a]:[m.lL,m.lL],onChange:this.handleChange("value"),labelRenderer:function(e,n){return null!==n&&void 0!==n&&n.isHandleTooltip||e>0&&e<1440?(0,m.li)(e):""},disabled:!d})}),(0,S.jsx)("div",{children:(0,S.jsx)(u.XZ,{label:"Unoccupied",checked:!d,onClick:function(){return e.handleChange("occupied")(!d)}})}),(0,S.jsx)("div",{children:(0,S.jsx)(u.zx,{icon:f.RPl,intent:o.S.PRIMARY,onClick:this.handleCreate,minimal:!0})})]})}),(0,S.jsx)("h1",{children:"Schedules"}),(0,S.jsx)("div",{className:"list",children:null===n||void 0===n?void 0:n.map((function(n,i){return n.id===(null===r||void 0===r?void 0:r.id)?(0,S.jsxs)(u.Zb,{interactive:!0,children:[(0,S.jsx)("div",{children:(0,S.jsx)("input",{className:s.O4S,type:"text",value:r.label,onChange:function(i){return e.handleChange("label",n)(i.target.value)}})}),(0,S.jsx)("div",{children:(0,S.jsx)(u.U2,{min:m.lL,max:m.QM,stepSize:5,labelStepSize:120,value:r.occupied?[r.startTime,r.endTime]:[m.lL,m.lL],onChange:e.handleChange("value",n),labelRenderer:m.li,disabled:!r.occupied})}),(0,S.jsx)("div",{children:(0,S.jsx)(u.XZ,{label:"Unoccupied",checked:!r.occupied,onClick:function(){return e.handleChange("occupied",n)(!r.occupied)}})}),(0,S.jsxs)("div",{children:[(0,S.jsx)(u.zx,{icon:f.$eC,intent:o.S.PRIMARY,minimal:!0,onClick:function(){return e.handleSave()}}),(0,S.jsx)(u.zx,{icon:f.eV6,intent:o.S.PRIMARY,minimal:!0,onClick:function(){return e.handleCancel()}})]})]},n.id||i):(0,S.jsxs)(u.Zb,{interactive:!0,children:[(0,S.jsx)("div",{children:n.label}),(0,S.jsx)("div",{children:(0,S.jsx)(u.U2,{min:m.lL,max:m.QM,stepSize:5,labelStepSize:120,value:n.occupied?[(0,m.xM)(n.startTime,!1),(0,m.xM)(n.endTime,!0)]:[m.lL,m.lL],labelRenderer:m.li,disabled:!n.occupied})}),(0,S.jsx)("div",{children:(0,S.jsx)(u.XZ,{label:"Unoccupied",checked:!n.occupied})}),(0,S.jsxs)("div",{children:[(0,S.jsx)(u.zx,{icon:f.dme,intent:o.S.PRIMARY,minimal:!0,onClick:function(){return e.handleEdit(n)}}),(0,S.jsx)(u.zx,{icon:f.R4W,intent:o.S.WARNING,minimal:!0,onClick:function(){return e.handleDelete(n)},disabled:!(0,m.zo)(n)})]})]},n.id||i)}))})]})}}]),i}(x.Component),j={readSchedules:h.Rr,filterSchedules:h.ZE,createSchedule:h.AS,updateSchedule:h.Fv,deleteSchedule:h.wn},g=(0,T.$j)((function(e){return{schedules:(0,h.ED)(e),filtered:(0,h._j)(e)}}),j)(b),C=function(e){return(0,S.jsx)(l.Z,(0,t.Z)((0,t.Z)({},e),{},{renderRoute:function(e){return(0,S.jsx)(g,(0,t.Z)({},e))}}))}},5476:function(e,n,i){i.d(n,{Ls:function(){return a},lL:function(){return d},S$:function(){return r},QM:function(){return u},Be:function(){return s},cz:function(){return h},li:function(){return p},xM:function(){return v},sG:function(){return f},zo:function(){return x}});var t=i(763),l=i(72426),c=i.n(l),a=120,d=0,r=480,u=1440,s=1080,o="HH:mm",m="h:mm\xa0a",h=function(e){return c()("00:00",[o]).add(Math.trunc(e/60),"hours").add(e%60,"minutes").format(o)},p=function(e){return c()("00:00",[o]).add(Math.trunc(e/60),"hours").add(e%60,"minutes").format(m)},v=function(e,n){return 60*function(e,n,i){return i&&0===e?n:e}(c()(e,[o,m]).hours(),24,n)+c()(e,[o,m]).minutes()},f=function(e,n){var i=void 0===(null===n||void 0===n?void 0:n.occupied)||n.occupied,l=(0,t.isNumber)(n.startTime)?n.startTime:v(n.startTime,!1),c=(0,t.isNumber)(n.endTime)?n.endTime:v(n.endTime,!0);switch(e){case"startTime":return"".concat(p(l));case"endTime":return"".concat(p(c));default:return i?0===l&&1440===c?"Occupied All Day":"Occupied From Start Time: ".concat(p(l)," To End Time: ").concat(p(c)):"Unoccupied All Day"}},x=function(e){return 0===(0,t.sum)(Object.values((null===e||void 0===e?void 0:e._count)||{}))}}}]);
//# sourceMappingURL=29.04227ac1.chunk.js.map